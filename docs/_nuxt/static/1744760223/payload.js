__NUXT_JSONP__("/", (function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_,$,aa,ab,ac,ad,ae,af,ag,ah,ai,aj,ak,al,am,an,ao,ap,aq,ar,as,at,au,av,aw,ax,ay,az,aA,aB,aC,aD,aE,aF,aG,aH,aI,aJ,aK,aL,aM,aN,aO,aP,aQ,aR,aS,aT,aU,aV,aW,aX,aY,aZ,a_,a$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB,bC,bD,bE,bF,bG,bH,bI,bJ,bK,bL,bM,bN,bO,bP,bQ,bR,bS,bT,bU,bV,bW,bX,bY,bZ,b_,b$,ca,cb,cc,cd,ce,cf,cg,ch,ci,cj,ck,cl,cm,cn,co,cp,cq,cr,cs,ct,cu,cv,cw,cx,cy,cz,cA,cB,cC,cD,cE,cF,cG,cH,cI,cJ,cK,cL,cM,cN,cO,cP,cQ,cR,cS,cT,cU,cV,cW,cX,cY,cZ,c_,c$,da,db,dc,dd,de,df,dg,dh,di,dj,dk,dl,dm,dn,do0,dp,dq,dr,ds,dt,du,dv,dw,dx,dy,dz,dA,dB,dC,dD,dE,dF,dG,dH,dI,dJ,dK,dL,dM,dN,dO,dP,dQ,dR,dS,dT,dU,dV,dW,dX,dY,dZ,d_,d$,ea,eb,ec,ed,ee,ef,eg,eh,ei,ej,ek,el,em,en,eo,ep,eq,er,es,et,eu,ev,ew,ex,ey,ez,eA,eB,eC,eD,eE,eF,eG,eH,eI,eJ,eK,eL,eM,eN,eO,eP,eQ,eR,eS,eT,eU,eV,eW,eX,eY,eZ,e_,e$,fa,fb,fc,fd,fe,ff,fg,fh,fi,fj,fk,fl,fm,fn,fo,fp,fq,fr,fs,ft,fu,fv,fw,fx,fy,fz,fA,fB,fC,fD,fE,fF,fG,fH,fI,fJ,fK,fL,fM,fN,fO,fP,fQ,fR,fS,fT,fU,fV,fW,fX,fY,fZ,f_,f$,ga,gb,gc,gd,ge,gf,gg,gh,gi,gj,gk,gl,gm,gn,go,gp,gq,gr,gs,gt,gu,gv,gw){return {data:[{content:[{slug:aY,description:"Отправь application\u002Fjson в заголовках Accept и Content-Type",heading:"Заголовки для API",altHeadings:"как вернуть json",tags:"api,manual",toc:[],body:{type:r,children:[{type:b,tag:i,props:{heading:A,id:B},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:bK},{type:b,tag:w,props:{},children:[]},{type:a,value:bL}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:bM},{type:b,tag:p,props:{title:bN,uri:bO},children:[]},{type:a,value:bP}]},{type:a,value:g}]},{type:a,value:g},{type:a,value:g},{type:b,tag:i,props:{heading:aZ,id:L},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Laravel может автоматически возвращать json для обычных или XHR запросов.\n    Поведение управляется с помощью заголовков:\n  "}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:h},{type:b,tag:n,props:{title:bQ,link:"https:\u002F\u002Fdeveloper.mozilla.org\u002Fru\u002Fdocs\u002FWeb\u002FHTTP\u002FHeaders\u002FAccept"},children:[]},{type:a,value:"\n    сообщает приложению какой тип данных ожидается в ответе.\n    "},{type:b,tag:w,props:{},children:[]},{type:a,value:h},{type:b,tag:n,props:{title:"Content-Type",link:"https:\u002F\u002Fdeveloper.mozilla.org\u002Fru\u002Fdocs\u002FWeb\u002FHTTP\u002FHeaders\u002FContent-Type"},children:[]},{type:a,value:"\n    сообщает о типе данных в запросе или ответе.\n  "}]},{type:a,value:g}]},{type:a,value:g},{type:b,tag:i,props:{heading:Z,id:V},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Таким образом, необходимо с клиента отправить правильные заголовки для json:\n  "}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:h},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:bR}]},{type:a,value:h},{type:b,tag:w,props:{},children:[]},{type:a,value:h},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:"Content-Type: application\u002Fjson"}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:ar},{type:b,tag:p,props:{title:C,uri:"requests#retrieving-json-input-values"},children:[]},{type:a,value:"\n    Content-Type укажет фреймворку, что входящие данные являются json\n    и таким образом можно будет работать с ними как с обычными\n    или массивом, не прибегая к предварительному декодированию с помощью\n    "},{type:b,tag:e,props:{className:[f,l]},children:[{type:a,value:"json_decode()"}]},{type:a,value:c}]},{type:a,value:g}]},{type:a,value:g},{type:b,tag:i,props:{heading:"Ответ приложения",id:"response"},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:ar},{type:b,tag:p,props:{title:C,uri:"responses#json-responses"},children:[]},{type:a,value:"\n    метод "},{type:b,tag:e,props:{className:[f,l]},children:[{type:a,value:bS}]},{type:a,value:"\n    автоматически конвертирует данные в json и устанавливает необходимые заголовки,\n    поэтому никаких дополнительных действий не требуется.\n  "}]},{type:a,value:g}]},{type:a,value:g},{type:b,tag:i,props:{heading:"Всегда json",id:"only-json"},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Если Laravel используется как API и всегда запрос\u002Fответ должны быть в json, то можно установить заголовки в middleware:\n  "}]},{type:a,value:c},{type:b,tag:q,props:{name:"cases\u002Fapi-headers\u002Fmiddleware-set"},children:[]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Это позволит клиентам не устанавливать заголовки, но вопрос "},{type:b,tag:k,props:{},children:[{type:a,value:"действительно ли это так необходимо"}]},{type:a,value:"?\n  "}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Другой вариант - проверять в middleware заголовки и возвращать\n    "},{type:b,tag:n,props:{title:"406 Not Acceptable",link:"https:\u002F\u002Fdeveloper.mozilla.org\u002Fru\u002Fdocs\u002FWeb\u002FHTTP\u002FStatus\u002F406"},children:[]},{type:a,value:",\n    или любой другой код ошибки.\n    "},{type:b,tag:k,props:{},children:[{type:a,value:bT}]},{type:a,value:", так будет правильнее.\n  "}]},{type:a,value:c},{type:b,tag:q,props:{name:"cases\u002Fapi-headers\u002Fmiddleware-check"},children:[]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    А ещё лучше это сделать на уровне nginx (web-сервера), а не php.\n  "}]},{type:a,value:c},{type:b,tag:q,props:{name:"cases\u002Fapi-headers\u002Fnginx-check"},children:[]},{type:a,value:g}]}]},excerpt:{type:r,children:[{type:b,tag:i,props:{heading:A,id:B},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:bK},{type:b,tag:w,props:{},children:[]},{type:a,value:bL}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:bM},{type:b,tag:p,props:{title:bN,uri:bO},children:[]},{type:a,value:bP}]},{type:a,value:g}]}]},dir:x,path:"\u002Fcases\u002Fapi-headers",extension:y,createdAt:as,updatedAt:bU},{slug:bV,description:bW,heading:"Не работает Artisan",altHeadings:D,tags:_,toc:[],body:{type:r,children:[{type:b,tag:i,props:{heading:A,id:B},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:bX},{type:b,tag:e,props:{className:[f,l]},children:[{type:a,value:bY}]},{type:a,value:bZ}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:b_},{type:b,tag:n,props:{title:b$,link:ca},children:[]},{type:a,value:c}]},{type:a,value:g}]},{type:a,value:g},{type:a,value:g},{type:b,tag:i,props:{heading:"С чего начать",id:"where"},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Все ошибки должны быть в логах, проверь\n    "},{type:b,tag:e,props:{className:[f,j]},children:[{type:a,value:aA}]},{type:a,value:"\n    (также смотри "},{type:b,tag:F,props:{to:aB},children:[{type:a,value:a_}]},{type:a,value:")\n  "}]},{type:a,value:g}]},{type:a,value:g},{type:b,tag:i,props:{heading:"Популярные причины",id:L},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Причин может быть много, поэтому ищи ошибки в логах, но вот самые популярные:\n  "}]},{type:a,value:c},{type:b,tag:M,props:{className:[N,I]},children:[{type:a,value:h},{type:b,tag:s,props:{},children:[{type:a,value:"неподдерживаемая версия php cli: "},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:"php -v"}]}]},{type:a,value:h},{type:b,tag:s,props:{},children:[{type:a,value:"ошибки в роутах (например, не найден контроллер)"}]},{type:a,value:h},{type:b,tag:s,props:{},children:[{type:a,value:"ошибки в "},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:a$}]},{type:a,value:" (например, запросы к БД)"}]},{type:a,value:c}]},{type:a,value:g}]}]},excerpt:{type:r,children:[{type:b,tag:i,props:{heading:A,id:B},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:bX},{type:b,tag:e,props:{className:[f,l]},children:[{type:a,value:bY}]},{type:a,value:bZ}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:b_},{type:b,tag:n,props:{title:b$,link:ca},children:[]},{type:a,value:c}]},{type:a,value:g}]}]},dir:x,path:"\u002Fcases\u002Fartisan-not-working",extension:y,createdAt:as,updatedAt:bU},{slug:cb,description:"Ajax, переменная в script или html-атрибут",heading:"Передача данных в JS",altHeadings:D,tags:O,toc:[],body:{type:r,children:[{type:b,tag:d,props:{},children:[{type:a,value:cc},{type:b,tag:e,props:{className:[E]},children:[{type:a,value:cd}]},{type:a,value:ce}]},{type:a,value:g},{type:a,value:g},{type:b,tag:i,props:{heading:"AJAX",id:"ajax"},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Самый очевидный и популярный способ, это сделать AJAX-запрос на api,\n    в ответе получим необходимые данные, например, в json или html.\n  "}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Подходит если данные не нужны во время первого выполнения и мы можем получить их позже в фоне.\n  "}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Один из популярных примеров - это фильтр товаров. Поскольку выборка из базы данных может занять некоторое время,\n    то для ускорения загрузки основной страницы (первого ответа сервера)\n    такие запросы откладывают и запрашивают список товаров асинхронно.\n  "}]},{type:a,value:g}]},{type:a,value:g},{type:b,tag:i,props:{heading:"Тег \u003Cscript\u003E",id:"script"},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Данный способ подходит, когда данные на frontend необходимы сразу. В html можно использовать тег\n    "},{type:b,tag:n,props:{title:"\u003Cscript\u003E",link:"https:\u002F\u002Fdeveloper.mozilla.org\u002Fru\u002Fdocs\u002FWeb\u002FHTML\u002FElement\u002Fscript"},children:[]},{type:a,value:"\n    код внутри которого будет выполнен сразу после того как будет прочитан клиентом.\n  "}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Данный код обычно располагают в "},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:"\u003Chead\u003E"}]},{type:a,value:" до подключения остальных скриптов.\n  "}]},{type:a,value:c},{type:b,tag:q,props:{name:"cases\u002Fbackend-frontend\u002Fscript"},children:[]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Фасад "},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:"Illuminate\\Support\\Js"}]},{type:a,value:" доступен начиная с 8.x версии,\n    подробнее читай в "},{type:b,tag:p,props:{title:C,uri:"blade#rendering-json"},children:[]},{type:a,value:z}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n   Без хелпера необходимо вручную контролировать значения по умолчанию и следить за экранированием:\n  "}]},{type:a,value:c},{type:b,tag:q,props:{name:"cases\u002Fbackend-frontend\u002Fscript-old"},children:[]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:h},{type:b,tag:k,props:{},children:[{type:a,value:J}]},{type:a,value:", что такие переменные являются\n    "},{type:b,tag:n,props:{title:"глобальными",link:"https:\u002F\u002Flearn.javascript.ru\u002Fglobal-object"},children:[]},{type:a,value:",\n    а это bad-практика.\n    Тем не менее, если приходится использовать данный способ, то рекомендую свести количество переменных к минимуму\n    и дать уникальное имя, например с префиксом имени проекта, а обращаться к ним через "},{type:b,tag:e,props:{className:[f,aj]},children:[{type:a,value:"window"}]},{type:a,value:c}]},{type:a,value:g}]},{type:a,value:g},{type:b,tag:i,props:{heading:"HTML-атрибут",id:"attr"},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Аналогично предыдущему способу, только вместо JS переменной передаём значение в data-* атрибут тега, а затем, после\n    загрузки DOM, читаем атрибут тега.\n  "}]},{type:a,value:c},{type:b,tag:q,props:{name:"cases\u002Fbackend-frontend\u002Fhtml-attr-value"},children:[]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Или как массив\u002Fобъект:\n  "}]},{type:a,value:c},{type:b,tag:q,props:{name:"cases\u002Fbackend-frontend\u002Fhtml-attr-json"},children:[]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Способ подходит лучше для передачи мелких, локальных (не глобальных) данных, например, адрес,\n    куда необходимо отправить данные после выполнения каких-либо асинхронных действий, вызываемых по клику на элемент.\n    Ещё один пример - передача параметров для слайдера, модального окна или любого другого компонента, которые могут\n    контролироваться backend-ом.\n  "}]},{type:a,value:g}]},{type:a,value:g},{type:b,tag:i,props:{heading:"Готовые решения",id:"packages"},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:h},{type:b,tag:n,props:{title:"tighten\u002Fziggy",link:"https:\u002F\u002Fgithub.com\u002Ftighten\u002Fziggy"},children:[]},{type:a,value:h},{type:b,tag:w,props:{},children:[]},{type:a,value:"Если необходимо пробросить маршруты в JS.\n  "}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:h},{type:b,tag:n,props:{title:"rmariuzzo\u002FLaravel-JS-Localization",link:"https:\u002F\u002Fgithub.com\u002Frmariuzzo\u002FLaravel-JS-Localization"},children:[]},{type:a,value:h},{type:b,tag:w,props:{},children:[]},{type:a,value:"Если необходимо пробросить переводы (локализацию) в JS.\n  "}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:h},{type:b,tag:n,props:{title:"Inertiajs",link:"https:\u002F\u002Finertiajs.com"},children:[]},{type:a,value:h},{type:b,tag:w,props:{},children:[]},{type:a,value:"Глобальный пакет для монолитного SPA, который использует вариант с HTML-атрибутом, описанный выше.\n    Не стоит использовать для простого проброса данных, а только для цельных приложений,\n    например, хорошо подходит для админок.\n  "}]},{type:a,value:g}]}]},excerpt:{type:r,children:[{type:b,tag:d,props:{},children:[{type:a,value:cc},{type:b,tag:e,props:{className:[E]},children:[{type:a,value:cd}]},{type:a,value:ce}]}]},dir:x,path:"\u002Fcases\u002Fbackend-frontend",extension:y,createdAt:as,updatedAt:T},{slug:cf,description:"Укажи правильный namespace к контроллеру",heading:"Target class Controller does not exist",altHeadings:D,tags:_,toc:[],body:{type:r,children:[{type:b,tag:d,props:{},children:[{type:a,value:cg},{type:b,tag:p,props:{title:ch,uri:ci},children:[]},{type:a,value:cj}]},{type:a,value:g},{type:b,tag:d,props:{className:[u,v]},children:[{type:a,value:ck}]},{type:a,value:g},{type:b,tag:d,props:{},children:[{type:a,value:cl}]},{type:a,value:g},{type:a,value:g},{type:b,tag:q,props:{name:"cases\u002Fcontroller-does-not-exist\u002Fold"},children:[]},{type:a,value:g},{type:b,tag:d,props:{},children:[{type:a,value:"\n  С 8-ой версии используется «callable syntax»:\n"}]},{type:a,value:g},{type:b,tag:q,props:{name:"cases\u002Fcontroller-does-not-exist\u002Fnew"},children:[]},{type:a,value:g},{type:b,tag:d,props:{className:["alert-remark",W]},children:[{type:a,value:"\n  Важно: Не забудь указать "},{type:b,tag:e,props:{className:[f,l]},children:[{type:a,value:cm}]},{type:a,value:g}]},{type:a,value:g},{type:b,tag:d,props:{},children:[{type:a,value:"\n  Оба варианта рабочие, но в новых версиях был удалён корневой namespace "},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:"App\\Http\\Controllers"}]},{type:a,value:",\n  а значит теперь необходимо указывать полный namespace.\n  Более подробно можно почитать в\n  "},{type:b,tag:p,props:{title:cn,uri:"upgrade#automatic-controller-namespace-prefixing",version:"8.x"},children:[]},{type:a,value:g}]},{type:a,value:g},{type:b,tag:d,props:{className:[co]},children:[{type:a,value:"\n  Это опциональное изменение для улучшенной поддержки IDE, можно продолжать использовать старый вариант\n  указав полный namespace к классу или указав корневой "},{type:b,tag:e,props:{className:[f,aj]},children:[{type:a,value:"$namespace"}]},{type:a,value:"\n  в "},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:cp}]},{type:a,value:", как было в предыдущих версиях,\n  но в этом нет никаких преимуществ и "},{type:b,tag:k,props:{},children:[{type:a,value:"лучше перейти к новому варианту"}]},{type:a,value:$}]}]},excerpt:{type:r,children:[{type:b,tag:d,props:{},children:[{type:a,value:cg},{type:b,tag:p,props:{title:ch,uri:ci},children:[]},{type:a,value:cj}]},{type:a,value:g},{type:b,tag:d,props:{className:[u,v]},children:[{type:a,value:ck}]},{type:a,value:g},{type:b,tag:d,props:{},children:[{type:a,value:cl}]}]},dir:x,path:"\u002Fcases\u002Fcontroller-does-not-exist",extension:y,createdAt:as,updatedAt:T},{slug:aC,description:"Убедись, что нет 500 ошибки или dd(), настрой config\u002Fcors.php или proxy-сервер.",heading:"Blocked by CORS policy",altHeadings:D,tags:"api,errors",toc:[],body:{type:r,children:[{type:b,tag:d,props:{},children:[{type:a,value:cq}]},{type:a,value:g},{type:b,tag:i,props:{heading:A,id:B},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:cr}]},{type:a,value:c},{type:b,tag:d,props:{className:[u,v]},children:[{type:a,value:cs}]},{type:a,value:g}]},{type:a,value:g},{type:a,value:g},{type:b,tag:i,props:{heading:aZ,id:L},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:h},{type:b,tag:n,props:{title:"CORS (Cross-Origin Resource Sharing)",link:"https:\u002F\u002Fdeveloper.mozilla.org\u002Fru\u002Fdocs\u002FWeb\u002FHTTP\u002FCORS"},children:[]},{type:a,value:"\n    простыми словами - механизм безопасности, который ограничивает кросс-доменные запросы согласно политике\n    "},{type:b,tag:n,props:{title:"«Same-origin policy»",link:"https:\u002F\u002Fdeveloper.mozilla.org\u002Fru\u002Fdocs\u002FWeb\u002FSecurity\u002FSame-origin_policy"},children:[]},{type:a,value:z}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Статьи по ссылкам "},{type:b,tag:k,props:{},children:[{type:a,value:"обязательны к осмысленному прочтению"}]},{type:a,value:" всем web-разработчикам.\n  "}]},{type:a,value:g}]},{type:a,value:g},{type:b,tag:i,props:{heading:"Localhost",id:ct},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:h},{type:b,tag:e,props:{className:[E]},children:[{type:a,value:"«У меня везде localhost, почему не работает?»"}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Адреса считаются разными, если у них отличается хотя бы что-то одно:\n  "}]},{type:a,value:c},{type:b,tag:M,props:{className:[N,I]},children:[{type:a,value:h},{type:b,tag:s,props:{},children:[{type:a,value:"домен"}]},{type:a,value:h},{type:b,tag:s,props:{},children:[{type:a,value:"порт"}]},{type:a,value:h},{type:b,tag:s,props:{},children:[{type:a,value:"протокол"}]},{type:a,value:c}]},{type:a,value:g}]},{type:a,value:g},{type:b,tag:i,props:{heading:"Postman",id:"postman"},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:h},{type:b,tag:e,props:{className:[E]},children:[{type:a,value:"«А почему у меня в postman работает?»"}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    В postman отключены CORS, он не следует заголовкам и не ограничивает свои запросы,\n    т.к. это инструмент разработки, а не браузер. Тоже самое касается любого клиента, который не следует SOP.\n  "}]},{type:a,value:g}]},{type:a,value:g},{type:b,tag:i,props:{heading:Z,id:V},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Необходимо настроить CORS со стороны backend-приложения.\n    "},{type:b,tag:k,props:{},children:[{type:a,value:"Не надо пытаться отключить или \"обойти\" проблему, даже для локальной разработки"}]},{type:a,value:z}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Начиная с 7 версии, Laravel "},{type:b,tag:p,props:{title:"поддерживает CORS",uri:cu},children:[]},{type:a,value:" из коробки.\n    Настройки в "},{type:b,tag:e,props:{className:[f,j]},children:[{type:a,value:cv}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    По умолчанию разрешены любые запросы с любых источников на "},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:"\u002Fapi\u002F*"}]},{type:a,value:cw},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:"GET http:\u002F\u002Flocalhost:8000\u002Fapi\u002Fusers"}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Проблемы при локальной разработке возникают чаще всего из-за того, что запросы приходят не на \u002Fapi,\n    поэтому необходимо или отправлять запросы на \u002Fapi, или добавить необходимые пути в конфиг. \n    В "},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:"paths"}]},{type:a,value:" указываются относительные пути без домена.\n  "}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Для реального приложения рекомендуется настроить более точно, с каких конкретных ресурсов разрешены запросы.\n  "}]},{type:a,value:g}]},{type:a,value:g},{type:b,tag:i,props:{heading:cx,id:ba},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Так же проблема может быть из-за не подключенного middleware в "},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:"App\\Http\\Kernel"}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Проверь свойство "},{type:b,tag:e,props:{className:[f,aj]},children:[{type:a,value:"$middleware"}]},{type:a,value:", \n    в нем должен быть указан один из следующих классов:\n  "}]},{type:a,value:c},{type:b,tag:M,props:{className:[N,I]},children:[{type:a,value:h},{type:b,tag:s,props:{},children:[{type:a,value:m},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:cy}]},{type:a,value:" для 9.2+\n    "}]},{type:a,value:h},{type:b,tag:s,props:{},children:[{type:a,value:m},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:"\\Fruitcake\\Cors\\HandleCors"}]},{type:a,value:" для 8.x и ниже, при использовании пакета\n      "},{type:b,tag:n,props:{title:bb,link:bc},children:[]},{type:a,value:h}]},{type:a,value:c}]},{type:a,value:g}]},{type:a,value:g},{type:b,tag:i,props:{heading:"Старые версии",id:"old-version"},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Для более ранних версий (8.x и ниже) необходим пакет\n    "},{type:b,tag:n,props:{title:bb,link:bc},children:[]},{type:a,value:"\n    (в 7.x и 8.x он установлен по умолчанию)\n    или собственная реализация.\n  "}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Если фреймворк обновлялся до версии 9.2 или выше, то пакет\n    "},{type:b,tag:n,props:{title:bb,link:bc},children:[]},{type:a,value:"\n    необходимо удалить, а middleware заменить на "},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:cy}]},{type:a,value:",\n    подробнее смотри в "},{type:b,tag:n,props:{title:"PR",link:"https:\u002F\u002Fgithub.com\u002Flaravel\u002Flaravel\u002Fpull\u002F5825\u002Ffiles"},children:[]},{type:a,value:z}]},{type:a,value:g}]},{type:a,value:g},{type:b,tag:i,props:{heading:"Потеря заголовков",id:"proxy-loss"},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Прокси-сервер может влиять на возвращаемые заголовки и не передавать нужные заголовки для CORS.\n    Убедись, что любое промежуточное ПО не блокирует передачу заголовков клиенту,\n    для этого обратись к соответствующей документации ПО или системному администратору.\n  "}]},{type:a,value:g}]},{type:a,value:g},{type:b,tag:i,props:{heading:"Решение с proxy",id:"proxy"},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Альтернативный вариант - это отправлять запросы на тот же адрес,\n    с которого работает frontend ("},{type:b,tag:e,props:{className:[E]},children:[{type:a,value:"внезапно"}]},{type:a,value:"), как это и происходит в монолитных приложениях.\n  "}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Если frontend и backend расположены на разных доменах, поддоменах, ip-адресах или портах, \n    то можно сделать проксирование запросов, т.е. отправлять с клиента запрос на текущий адрес,\n    а далее он будет перенаправлен сервером на реальный адрес backend-а. Например:\n  "}]},{type:a,value:c},{type:b,tag:M,props:{className:[N,I]},children:[{type:a,value:h},{type:b,tag:s,props:{},children:[{type:a,value:"\n      для Nuxt\n      "},{type:b,tag:n,props:{title:"proxy-module",link:"https:\u002F\u002Fgithub.com\u002Fnuxt-community\u002Fproxy-module"},children:[]},{type:a,value:h}]},{type:a,value:h},{type:b,tag:s,props:{},children:[{type:a,value:"\n      для React\n      "},{type:b,tag:n,props:{title:"http-proxy-middleware",link:"https:\u002F\u002Fgithub.com\u002Fchimurai\u002Fhttp-proxy-middleware"},children:[]},{type:a,value:h}]},{type:a,value:h},{type:b,tag:s,props:{},children:[{type:a,value:"\n      для Nginx\n      "},{type:b,tag:n,props:{title:"proxy_pass",link:"https:\u002F\u002Fnginx.org\u002Fru\u002Fdocs\u002Fhttp\u002Fngx_http_proxy_module.html#proxy_pass"},children:[]},{type:a,value:h}]},{type:a,value:h},{type:b,tag:s,props:{},children:[{type:a,value:"\n      для Apache\n      "},{type:b,tag:n,props:{title:"mod_proxy",link:"https:\u002F\u002Fhttpd.apache.org\u002Fdocs\u002F2.4\u002Fmod\u002Fmod_proxy.html"},children:[]},{type:a,value:h}]},{type:a,value:c}]},{type:a,value:g}]},{type:a,value:g},{type:b,tag:i,props:{heading:"CORS и Server Errors",id:_},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:h},{type:b,tag:k,props:{},children:[{type:a,value:J}]},{type:a,value:", что если на сервере произойдёт критическая ошибка (500),\n    то необходимые заголовки не будут отправлены и браузер запретит запрос,\n    при этом узнать об ошибке на сервере можно будет только в логах или в системе мониторинга.\n  "}]},{type:a,value:g}]}]},excerpt:{type:r,children:[{type:b,tag:d,props:{},children:[{type:a,value:cq}]},{type:a,value:g},{type:b,tag:i,props:{heading:A,id:B},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:cr}]},{type:a,value:c},{type:b,tag:d,props:{className:[u,v]},children:[{type:a,value:cs}]},{type:a,value:g}]}]},dir:x,path:"\u002Fcases\u002Fcors",extension:y,createdAt:as,updatedAt:T},{slug:bd,description:"Выполни миграцию создающую таблицу cache",heading:"Table cache not found",altHeadings:D,tags:cz,toc:[],body:{type:r,children:[{type:b,tag:i,props:{heading:A,id:B},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:aD}]},{type:a,value:c},{type:b,tag:d,props:{className:[u,v]},children:[{type:a,value:cA}]},{type:a,value:g}]},{type:a,value:g},{type:a,value:g},{type:b,tag:i,props:{heading:aa,id:L},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    В env установлен "},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:"CACHE_STORE"}]},{type:a,value:" \n    в "},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:ak}]},{type:a,value:" и отсутствует таблица "},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:cB}]},{type:a,value:" в базе данных.\n  "}]},{type:a,value:g}]},{type:a,value:g},{type:b,tag:i,props:{heading:Z,id:V},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:ar},{type:b,tag:p,props:{title:C,uri:"cache#prerequisites-database"},children:[]},{type:a,value:",\n    чтобы использовать кэш с драйвером "},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:ak}]},{type:a,value:" необходимо выполнить команды:\n  "}]},{type:a,value:c},{type:b,tag:q,props:{name:"cases\u002Fdatabase-cache\u002Finstall-migrations"},children:[]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    или изменить драйвер кэша на другой.\n  "}]},{type:a,value:g}]}]},excerpt:{type:r,children:[{type:b,tag:i,props:{heading:A,id:B},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:aD}]},{type:a,value:c},{type:b,tag:d,props:{className:[u,v]},children:[{type:a,value:cA}]},{type:a,value:g}]}]},dir:x,path:"\u002Fcases\u002Fdatabase-cache",extension:y,createdAt:"2025-04-06T18:05:18.349Z",updatedAt:"2025-04-06T18:25:25.277Z"},{slug:be,description:"Установи расширения php-pdo и php-mysql\u002Fphp-pgsql\u002Fphp-sqlite",heading:"Could not find driver",altHeadings:D,tags:cz,toc:[],body:{type:r,children:[{type:b,tag:i,props:{heading:A,id:B},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:aD}]},{type:a,value:c},{type:b,tag:d,props:{className:[u,v]},children:[{type:a,value:cC}]},{type:a,value:c},{type:b,tag:d,props:{className:[u,v]},children:[{type:a,value:cD}]},{type:a,value:g}]},{type:a,value:g},{type:a,value:g},{type:b,tag:i,props:{heading:aa,id:L},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    В окружении не установлены или не подключены расширения для базы данных.\n    Посмотреть список установленных модулей можно командой "},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:"php -m"}]},{type:a,value:c}]},{type:a,value:g}]},{type:a,value:g},{type:b,tag:i,props:{heading:Z,id:V},children:[{type:a,value:c},{type:b,tag:d,props:{className:[W]},children:[{type:a,value:"\n    Установить расширение "},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:"php-pdo"}]},{type:a,value:cE},{type:b,tag:w,props:{},children:[]},{type:a,value:h},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:"php-mysql"}]},{type:a,value:" для MySQL\n    "},{type:b,tag:w,props:{},children:[]},{type:a,value:h},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:"php-pgsql"}]},{type:a,value:" для PostgreSQL\n    "},{type:b,tag:w,props:{},children:[]},{type:a,value:h},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:"php-sqlite"}]},{type:a,value:" для SQLite\n  "}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Для конкретной версии, например, 8.1:\n  "}]},{type:a,value:c},{type:b,tag:q,props:{name:"cases\u002Fdatabase-driver\u002Finstall-version"},children:[]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Или автоматически для текущей:\n  "}]},{type:a,value:c},{type:b,tag:q,props:{name:"cases\u002Fdatabase-driver\u002Finstall-current"},children:[]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Возможно понадобится перезапуск web-сервера. Обычно больше ничего не требуется, но если модули по какой-то причине\n    не подключились автоматически, то можно активировать вручную:\n  "}]},{type:a,value:c},{type:b,tag:q,props:{name:"cases\u002Fdatabase-driver\u002Fenmod"},children:[]},{type:a,value:g}]},{type:a,value:g},{type:b,tag:i,props:{heading:"Решение для Windows",id:"solution-windows"},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Для Windows смысл тот же,\n    необходимо "},{type:b,tag:n,props:{title:"скачать",link:"https:\u002F\u002Fwindows.php.net\u002Fdownload"},children:[]},{type:a,value:"\n    dll в директорию "},{type:b,tag:e,props:{className:[f,j]},children:[{type:a,value:"ext"}]},{type:a,value:" с расширениями,\n    но скорей всего необходимые модули уже присутствуют в сборке,\n    осталось только их подключить в "},{type:b,tag:e,props:{className:[f,j]},children:[{type:a,value:"php.ini"}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Для этого необходимо удалить символ "},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:";"}]},{type:a,value:" в начале строк:\n  "}]},{type:a,value:c},{type:b,tag:q,props:{name:"cases\u002Fdatabase-driver\u002Fwindows-ini"},children:[]},{type:a,value:g}]}]},excerpt:{type:r,children:[{type:b,tag:i,props:{heading:A,id:B},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:aD}]},{type:a,value:c},{type:b,tag:d,props:{className:[u,v]},children:[{type:a,value:cC}]},{type:a,value:c},{type:b,tag:d,props:{className:[u,v]},children:[{type:a,value:cD}]},{type:a,value:g}]}]},dir:x,path:"\u002Fcases\u002Fdatabase-driver",extension:y,createdAt:aE,updatedAt:T},{slug:cF,description:"Храни и обрабатывай даты в UTC",heading:"Работа с датой и временем",altHeadings:D,tags:U,toc:[],body:{type:r,children:[{type:b,tag:d,props:{},children:[{type:a,value:cG}]},{type:a,value:g},{type:b,tag:d,props:{className:[bf]},children:[{type:a,value:c},{type:b,tag:k,props:{},children:[{type:a,value:cH}]},{type:a,value:g}]},{type:a,value:g},{type:a,value:g},{type:b,tag:d,props:{},children:[{type:a,value:"\n  Часто разработчик использует зону в которой находится он сам или его сервер и поначалу всё работает отлично.\n  Но как только появляются пользователи с другой временной зоной, то возникает вопрос, как с этим работать?\n"}]},{type:a,value:g},{type:b,tag:d,props:{},children:[{type:a,value:"\n  Предположим, что на сайте публикуется online-мероприятие, например, вебинар, у которого есть дата и время проведения.\n  Участниками могут быть люди со всего мира и указать для всех 10 декабря 20:00 нельзя,\n  потому что для каждого часового пояса время будет разное, надеюсь \"почему\" объяснять не надо.\n"}]},{type:a,value:g},{type:b,tag:d,props:{className:["text-xl"]},children:[{type:a,value:"\n  Как это обычно работает:\n"}]},{type:a,value:g},{type:b,tag:d,props:{},children:[{type:a,value:"\n  На сервере все даты хранятся в UTC, независимо от временной зоны пользователя и сервера\n  (речь про физическое расположение, а не настройки сервера).\n  Любые манипуляции с датами происходят именно в этой зоне.\n"}]},{type:a,value:g},{type:b,tag:d,props:{},children:[{type:a,value:"\n  Далее есть два варианта:\n"}]},{type:a,value:g},{type:b,tag:M,props:{className:[N,I,"ml-2",al]},children:[{type:a,value:c},{type:b,tag:s,props:{},children:[{type:a,value:"\n    если API, то возвращаем данные и клиент отображает дату с учётом "},{type:b,tag:k,props:{},children:[{type:a,value:"текущей"}]},{type:a,value:" временной зоны пользователя. \n    Для корректного преобразования времени на клиенте необходимо возвращать дату в формате с временной зоной, \n    например, по стандарту "},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:"ISO 8601"}]},{type:a,value:z}]},{type:a,value:c},{type:b,tag:s,props:{},children:[{type:a,value:"\n    если обычный MPA на blade, то мы должны предварительно получить от клиента его временную зону\n    и конвертировать дату на уровне представления.\n  "}]},{type:a,value:g}]},{type:a,value:g},{type:b,tag:d,props:{},children:[{type:a,value:"\n  Клиент в свою очередь отправляет дату тоже в UTC или вместе с тайм-зоной и сервер сам конвертирует в UTC.\n"}]},{type:a,value:g},{type:b,tag:d,props:{},children:[{type:a,value:"\n  Таким образом, мы даём клиенту или представлению полную свободу по отображению даты\n  с простой возможностью конвертации в любую другую тайм-зону.\n  Это же касается и формата даты - хранить в рекомендуемом формате СУБД,\n  а на клиенте приводить к необходимому формату (форматы так же зависят от локации пользователя).\n"}]},{type:a,value:g},{type:b,tag:d,props:{},children:[{type:a,value:"\n  Представим ещё одну ситуацию - есть много серверов по всему миру, у каждого своё локальное время\n  и пользователи создают новые мероприятия и указывают своё локальное время.\n  Если потребуется чтобы сервера общались между собой, \n  то придётся хранить и передавать таймзону и конвертировать в локальное.\n"}]},{type:a,value:g},{type:b,tag:d,props:{},children:[{type:a,value:"\n  Если мы по умолчанию храним в UTC, то ничего больше не требуется, просто возвращаем время клиенту,\n  который уже отобразит с учётом локального времени пользователя.\n"}]},{type:a,value:g},{type:b,tag:d,props:{},children:[{type:a,value:"\n  Можно подумать, что достаточно придерживаться всегда одной любой тайм-зоны, но во-первых очевидно,\n  что удобнее использовать нулевую, это универсальный, принятый и понятный формат везде.\n  Во-вторых, если мы работаем с временными метками (Unix time), то они, как известно, всегда в UTC.\n"}]},{type:a,value:g},{type:b,tag:d,props:{},children:[{type:a,value:"\n  Ещё немного информации можешь найти в статье\n  «"},{type:b,tag:n,props:{title:"Always Use UTC Dates And Times",link:"https:\u002F\u002Fkylekatarnls.medium.com\u002Falways-use-utc-dates-and-times-8a8200ca3164"},children:[]},{type:a,value:"»\n  или погуглив самостоятельно.\n"}]}]},excerpt:{type:r,children:[{type:b,tag:d,props:{},children:[{type:a,value:cG}]},{type:a,value:g},{type:b,tag:d,props:{className:[bf]},children:[{type:a,value:c},{type:b,tag:k,props:{},children:[{type:a,value:cH}]},{type:a,value:g}]}]},dir:x,path:"\u002Fcases\u002Fdatetime",extension:y,createdAt:P,updatedAt:T},{slug:aF,description:"Укажи в DB_HOST имя контейнера с БД",heading:"Database Connection refused в Docker",altHeadings:D,tags:"docker,errors,database",toc:[],body:{type:r,children:[{type:b,tag:i,props:{heading:A,id:B},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:cI}]},{type:a,value:c},{type:b,tag:d,props:{className:[u,v]},children:[{type:a,value:cJ}]},{type:a,value:g}]},{type:a,value:g},{type:a,value:g},{type:b,tag:i,props:{heading:aa,id:L},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    На самом деле, причин может быть много, например, не запустился контейнер с БД\n    или неправильно настроена сеть.\n  "}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Но самая популярная причина это неправильный адрес хоста в конфиге.\n    Чаще всего указывается "},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:ct}]},{type:a,value:", но с докером необходимо указать имя контейнера с БД.\n  "}]},{type:a,value:g}]},{type:a,value:g},{type:b,tag:i,props:{heading:Z,id:V},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    В "},{type:b,tag:e,props:{className:[f,j]},children:[{type:a,value:aG}]},{type:a,value:" указать правильный "},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:"DB_HOST"}]},{type:a,value:h},{type:b,tag:w,props:{},children:[]},{type:a,value:"Имя контейнера указывается в "},{type:b,tag:e,props:{className:[f,j]},children:[{type:a,value:"docker-compose.yml"}]},{type:a,value:",\n    в большинстве случаев это "},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:"mysql"}]},{type:a,value:aH},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:"db"}]},{type:a,value:",\n    но в реальности может быть любым.\n  "}]},{type:a,value:c},{type:b,tag:q,props:{name:"cases\u002Fdocker-database\u002Fenv-host"},children:[]},{type:a,value:g}]}]},excerpt:{type:r,children:[{type:b,tag:i,props:{heading:A,id:B},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:cI}]},{type:a,value:c},{type:b,tag:d,props:{className:[u,v]},children:[{type:a,value:cJ}]},{type:a,value:g}]}]},dir:x,path:"\u002Fcases\u002Fdocker-database",extension:y,createdAt:aE,updatedAt:T},{slug:cK,description:"Сравнение запросов Model и DB",heading:"Eloquent VS Facade DB",altHeadings:"Холивар",tags:ak,toc:[],body:{type:r,children:[{type:b,tag:d,props:{},children:[{type:a,value:cL}]},{type:a,value:g},{type:b,tag:d,props:{},children:[{type:a,value:cM}]},{type:a,value:g},{type:a,value:g},{type:b,tag:d,props:{},children:[{type:a,value:"\n  Некоторые проекты и команды полностью отказываются от Eloquent в пользу DB фасада\n  и пропагандируют свой выбор как неопровержимо верное решение.\n  Данная тема периодически вспыхивает в чатах и почти всегда это переходит в холивар.\n  Вместо долгих рассуждений предлагаю сразу взглянуть на цифры.\n"}]},{type:a,value:g},{type:b,tag:i,props:{heading:"Условия",id:"condition"},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Замер был сделан на php 8.1, mysql 8.0, laravel 9.\n    Нас интересует "},{type:b,tag:k,props:{},children:[{type:a,value:"только разница между Eloquent и DB"}]},{type:a,value:",\n    время выполнения самих запросов относительно\n    и будет напрямую зависеть от конфигурации железа и ПО.\n  "}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Модель использовалась пустой, без событий, кастов и трейтов, в реальном проекте чем больше будет навешано на модель функционала,\n    тем медленнее будут отрабатывать запросы, что логично.\n  "}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Значения средние из 100 прогонов, в секундах.\n  "}]},{type:a,value:g}]},{type:a,value:g},{type:b,tag:i,props:{heading:"Чтение",id:"read-time"},children:[{type:a,value:c},{type:b,tag:aI,props:{className:[bg]},children:[{type:a,value:h},{type:b,tag:am,props:{className:[am]},children:[{type:a,value:m},{type:b,tag:bh,props:{},children:[{type:a,value:m},{type:b,tag:K,props:{},children:[{type:a,value:o},{type:b,tag:S,props:{},children:[{type:a,value:"Чтение, строк"}]},{type:a,value:o},{type:b,tag:S,props:{},children:[{type:a,value:bi}]},{type:a,value:o},{type:b,tag:S,props:{},children:[{type:a,value:cN}]},{type:a,value:o},{type:b,tag:S,props:{},children:[{type:a,value:cO}]},{type:a,value:o},{type:b,tag:S,props:{},children:[{type:a,value:cP}]},{type:a,value:m}]},{type:a,value:m}]},{type:a,value:m},{type:b,tag:bj,props:{},children:[{type:a,value:m},{type:b,tag:K,props:{},children:[{type:a,value:o},{type:b,tag:t,props:{},children:[{type:a,value:"1"}]},{type:a,value:o},{type:b,tag:t,props:{},children:[{type:a,value:"0.00098"}]},{type:a,value:o},{type:b,tag:t,props:{},children:[{type:a,value:"0.00068"}]},{type:a,value:o},{type:b,tag:t,props:{},children:[{type:a,value:"0.0003"}]},{type:a,value:o},{type:b,tag:t,props:{},children:[{type:a,value:"+44%"}]},{type:a,value:m}]},{type:a,value:m},{type:b,tag:K,props:{},children:[{type:a,value:o},{type:b,tag:t,props:{},children:[{type:a,value:"10"}]},{type:a,value:o},{type:b,tag:t,props:{},children:[{type:a,value:"0.00136"}]},{type:a,value:o},{type:b,tag:t,props:{},children:[{type:a,value:"0.00071"}]},{type:a,value:o},{type:b,tag:t,props:{},children:[{type:a,value:"0.00065"}]},{type:a,value:o},{type:b,tag:t,props:{},children:[{type:a,value:"+91%"}]},{type:a,value:m}]},{type:a,value:m},{type:b,tag:K,props:{},children:[{type:a,value:o},{type:b,tag:t,props:{},children:[{type:a,value:"100"}]},{type:a,value:o},{type:b,tag:t,props:{},children:[{type:a,value:"0.00373"}]},{type:a,value:o},{type:b,tag:t,props:{},children:[{type:a,value:"0.00088"}]},{type:a,value:o},{type:b,tag:t,props:{},children:[{type:a,value:"0.00285"}]},{type:a,value:o},{type:b,tag:t,props:{},children:[{type:a,value:"+320%"}]},{type:a,value:m}]},{type:a,value:m},{type:b,tag:K,props:{},children:[{type:a,value:o},{type:b,tag:t,props:{},children:[{type:a,value:"1 000"}]},{type:a,value:o},{type:b,tag:t,props:{},children:[{type:a,value:"0.02461"}]},{type:a,value:o},{type:b,tag:t,props:{},children:[{type:a,value:"0.00289"}]},{type:a,value:o},{type:b,tag:t,props:{},children:[{type:a,value:"0.02172"}]},{type:a,value:o},{type:b,tag:t,props:{},children:[{type:a,value:"+750%"}]},{type:a,value:m}]},{type:a,value:m},{type:b,tag:K,props:{},children:[{type:a,value:o},{type:b,tag:t,props:{},children:[{type:a,value:"10 000"}]},{type:a,value:o},{type:b,tag:t,props:{},children:[{type:a,value:"0.22458"}]},{type:a,value:o},{type:b,tag:t,props:{},children:[{type:a,value:"0.02122"}]},{type:a,value:o},{type:b,tag:t,props:{},children:[{type:a,value:"0.20336"}]},{type:a,value:o},{type:b,tag:t,props:{},children:[{type:a,value:"+950%"}]},{type:a,value:m}]},{type:a,value:m}]},{type:a,value:h}]},{type:a,value:c}]},{type:a,value:g}]},{type:a,value:g},{type:b,tag:i,props:{heading:"Результаты чтения",id:"read-result"},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:h},{type:b,tag:k,props:{},children:[{type:a,value:"В чтении данных DB выигрывает у Eloquent"}]},{type:a,value:", но существенно сказывается только на больших объёмах данных,\n    запрос на 10К строк отработал в 9 раз быстрее.\n  "}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Но при этом мы лишаемся всех удобств при работе с БД. В реальности чаще всего нам потребуется\n    дополнительная обработка данных, связи придётся доставать и компоновать вручную,\n    обновлять данные тоже необходимо вручную отдельным запросом... в общем как в старые добрые...\n  "}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Имеет ли смысл? "},{type:b,tag:k,props:{},children:[{type:a,value:"Лично я"}]},{type:a,value:" не вижу смысла отказываться от Eloquent,\n    ибо с таким же успехом можно отказаться и от самой Laravel.\n    Запросы можно переписать только там где это "},{type:b,tag:k,props:{},children:[{type:a,value:"действительно"}]},{type:a,value:" необходимо.\n    В более или менее среднем приложении придётся писать дополнительно \"репозитории\" или сервисы,\n    чтобы навести порядок и контролировать разбросанные и несвязные запросы, что приведёт рано или поздно к кастомной ORM,\n    но из костылей и палок.\n  "}]},{type:a,value:g}]},{type:a,value:g},{type:b,tag:i,props:{heading:cQ,id:"write-time"},children:[{type:a,value:c},{type:b,tag:aI,props:{className:[bg]},children:[{type:a,value:h},{type:b,tag:am,props:{className:[am,"mr-2"]},children:[{type:a,value:m},{type:b,tag:bh,props:{},children:[{type:a,value:m},{type:b,tag:K,props:{},children:[{type:a,value:o},{type:b,tag:S,props:{},children:[{type:a,value:cQ}]},{type:a,value:o},{type:b,tag:S,props:{},children:[{type:a,value:bi}]},{type:a,value:o},{type:b,tag:S,props:{},children:[{type:a,value:cN}]},{type:a,value:o},{type:b,tag:S,props:{},children:[{type:a,value:cO}]},{type:a,value:o},{type:b,tag:S,props:{},children:[{type:a,value:cP}]},{type:a,value:m}]},{type:a,value:m}]},{type:a,value:m},{type:b,tag:bj,props:{},children:[{type:a,value:m},{type:b,tag:K,props:{},children:[{type:a,value:o},{type:b,tag:t,props:{},children:[{type:a,value:aJ}]},{type:a,value:o},{type:b,tag:t,props:{},children:[{type:a,value:cR}]},{type:a,value:o},{type:b,tag:t,props:{},children:[{type:a,value:"0.00605"}]},{type:a,value:o},{type:b,tag:t,props:{},children:[{type:a,value:"0.00078"}]},{type:a,value:o},{type:b,tag:t,props:{},children:[{type:a,value:"+12%"}]},{type:a,value:m}]},{type:a,value:m},{type:b,tag:K,props:{},children:[{type:a,value:o},{type:b,tag:t,props:{},children:[{type:a,value:aJ}]},{type:a,value:o},{type:b,tag:t,props:{},children:[{type:a,value:"0.00736"}]},{type:a,value:o},{type:b,tag:t,props:{},children:[{type:a,value:"0.00749"}]},{type:a,value:o},{type:b,tag:t,props:{},children:[{type:a,value:"-0.00013"}]},{type:a,value:o},{type:b,tag:t,props:{},children:[{type:a,value:"-1%"}]},{type:a,value:m}]},{type:a,value:m},{type:b,tag:K,props:{},children:[{type:a,value:o},{type:b,tag:t,props:{},children:[{type:a,value:aJ}]},{type:a,value:o},{type:b,tag:t,props:{},children:[{type:a,value:cR}]},{type:a,value:o},{type:b,tag:t,props:{},children:[{type:a,value:"0.00589"}]},{type:a,value:o},{type:b,tag:t,props:{},children:[{type:a,value:"0.00094"}]},{type:a,value:o},{type:b,tag:t,props:{},children:[{type:a,value:"+16%"}]},{type:a,value:m}]},{type:a,value:m},{type:b,tag:K,props:{},children:[{type:a,value:o},{type:b,tag:t,props:{},children:[{type:a,value:aJ}]},{type:a,value:o},{type:b,tag:t,props:{},children:[{type:a,value:"0.00617"}]},{type:a,value:o},{type:b,tag:t,props:{},children:[{type:a,value:"0.00578"}]},{type:a,value:o},{type:b,tag:t,props:{},children:[{type:a,value:"0.00039"}]},{type:a,value:o},{type:b,tag:t,props:{},children:[{type:a,value:"+6%"}]},{type:a,value:m}]},{type:a,value:m}]},{type:a,value:h}]},{type:a,value:c}]},{type:a,value:g}]},{type:a,value:g},{type:b,tag:i,props:{heading:"Результаты записи",id:"write-result"},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Поскольку "},{type:b,tag:e,props:{className:[f,l]},children:[{type:a,value:aK}]},{type:a,value:" может сохранить только одну запись за раз,\n    то не получится его сравнить с "},{type:b,tag:e,props:{className:[f,l]},children:[{type:a,value:an}]},{type:a,value:" в записи большого количества строк.\n    Один "},{type:b,tag:e,props:{className:[f,l]},children:[{type:a,value:an}]},{type:a,value:" очевидно будет работать быстрее, чем "},{type:b,tag:e,props:{className:[f,l]},children:[{type:a,value:aK}]},{type:a,value:" в цикле.\n    Поэтому тестировать имело смысл только запись одной строки.\n  "}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:h},{type:b,tag:k,props:{},children:[{type:a,value:"Преимущество DB при записи отсутствует."}]},{type:a,value:" В некоторых прогонах результат даже оказался хуже.\n    Различия можно списать на погрешность измерений.\n  "}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Если необходимо вставить большое кол-во записей, то конечно "},{type:b,tag:e,props:{className:[f,l]},children:[{type:a,value:an}]},{type:a,value:"\n    это сделает эффективнее одним запросом, иначе смысла не вижу.\n  "}]},{type:a,value:g}]},{type:a,value:g},{type:b,tag:i,props:{heading:cS,id:cT},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Если не хватает производительности Eloquent,\n    то проблема скорей всего не решится отказом в пользу DB, а если и решится,\n    то надолго ли и как это повлияет на поддержку приложения и скорость разработки в перспективе?\n  "}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    В погоне за производительностью можно пойти ещё дальше (немного)\n    и отказаться от QueryBuilder и писать чистые SQL-запросы с DB или с PDO (и так до «чистого кода» можно продолжать).\n    Вопрос в том, действительно ли это решает проблему не принося новую?\n    Возможно, стоит рассмотреть другие способы хранения данных или увеличить производительность с помощью железа.\n  "}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Универсального ответа здесь быть не может, Eloquent позволяет быстро вести разработку\n    и влечёт за собой расходы ресурсов, как и любая другая логика. На самом деле, "},{type:b,tag:k,props:{},children:[{type:a,value:"с таким же успехом можно сравнивать\n    производительность фреймворков и чистого php..."}]},{type:a,value:c}]},{type:a,value:g}]}]},excerpt:{type:r,children:[{type:b,tag:d,props:{},children:[{type:a,value:cL}]},{type:a,value:g},{type:b,tag:d,props:{},children:[{type:a,value:cM}]}]},dir:x,path:"\u002Fcases\u002Feloquent-vs-db",extension:y,createdAt:aE,updatedAt:T},{slug:cU,description:bW,heading:"500 Internal Server Error",altHeadings:"Что делать, Как исправить?",tags:_,toc:[],body:{type:r,children:[{type:b,tag:d,props:{},children:[{type:a,value:cV},{type:b,tag:n,props:{title:cW,link:cX},children:[]},{type:a,value:cY}]},{type:a,value:g},{type:b,tag:d,props:{},children:[{type:a,value:cZ},{type:b,tag:F,props:{to:aB},children:[{type:a,value:a_}]},{type:a,value:g}]},{type:a,value:g},{type:a,value:g},{type:b,tag:d,props:{className:[X]},children:[{type:a,value:c},{type:b,tag:k,props:{},children:[{type:a,value:J}]},{type:a,value:" что возвращает 500 ошибку, Laravel или web-сервер (nginx, apache):\n"}]},{type:a,value:g},{type:b,tag:M,props:{className:[N,I,"mb-2"]},children:[{type:a,value:c},{type:b,tag:s,props:{},children:[{type:a,value:"\n    если фреймворк, тогда смотри "},{type:b,tag:F,props:{to:aB},children:[{type:a,value:"логи лары"}]},{type:a,value:" или включи "},{type:b,tag:p,props:{title:"debug mode",uri:"configuration#debug-mode"},children:[]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:s,props:{},children:[{type:a,value:"\n    если web-сервер, тогда смотри логи web-сервера, скорей всего проблема с конфигураций,\n    а в случае с apache проблема чаще всего в "},{type:b,tag:e,props:{className:[f,j]},children:[{type:a,value:ab}]},{type:a,value:c}]},{type:a,value:g}]},{type:a,value:g},{type:b,tag:d,props:{},children:[{type:a,value:"\n  Фреймворк возвращает 500 ошибку при любом исключении, кроме 404 (не найдено),\n  419 (неверный CSRF-токен), 422 (ошибка валидации),\n  401 (авторизация) и 403 (отказано в доступе).\n  "},{type:b,tag:w,props:{},children:[]},{type:a,value:"Также вызов "},{type:b,tag:e,props:{className:[f,l]},children:[{type:a,value:c_}]},{type:a,value:" вернёт 500 код.\n"}]},{type:a,value:g},{type:b,tag:d,props:{},children:[{type:a,value:"\n  Если ошибка произошла с AJAX-запросом,\n  то в "},{type:b,tag:n,props:{title:"DevTools",link:"https:\u002F\u002Fdeveloper.chrome.com\u002Fdocs\u002Fdevtools\u002F"},children:[]},{type:a,value:",\n  на вкладке network, при условии что включён debug mode,\n  также можно найти полное описание ошибки и стектрейс.\n"}]},{type:a,value:g},{type:b,tag:d,props:{},children:[{type:a,value:"\n  Рекомендую воспользоваться инструментом "},{type:b,tag:p,props:{title:"Telescope",uri:"telescope#introduction"},children:[]},{type:a,value:",\n  для более удобного мониторинга запросов в процессе разработки. \n  А для мониторинга ошибок в production -\n  "},{type:b,tag:n,props:{title:"Sentry",link:"https:\u002F\u002Fdocs.sentry.io\u002Fplatforms\u002Fphp\u002Fguides\u002Flaravel\u002F"},children:[]},{type:a,value:g}]}]},excerpt:{type:r,children:[{type:b,tag:d,props:{},children:[{type:a,value:cV},{type:b,tag:n,props:{title:cW,link:cX},children:[]},{type:a,value:cY}]},{type:a,value:g},{type:b,tag:d,props:{},children:[{type:a,value:cZ},{type:b,tag:F,props:{to:aB},children:[{type:a,value:a_}]},{type:a,value:g}]}]},dir:x,path:"\u002Fcases\u002Ferror-500",extension:y,createdAt:aE,updatedAt:T},{slug:bk,description:"Проверь порядок миграций и типы полей у внешнего ключа",heading:"Cannot add foreign key",altHeadings:D,tags:c$,toc:[],body:{type:r,children:[{type:b,tag:i,props:{heading:A,id:B},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:da}]},{type:a,value:c},{type:b,tag:d,props:{className:[u,v]},children:[{type:a,value:db}]},{type:a,value:c},{type:b,tag:d,props:{className:[u,v]},children:[{type:a,value:bl}]},{type:a,value:c},{type:b,tag:d,props:{className:[u,v]},children:[{type:a,value:bm}]},{type:a,value:c},{type:b,tag:d,props:{className:[u,v]},children:[{type:a,value:bn}]},{type:a,value:c},{type:b,tag:d,props:{className:[u,v]},children:[{type:a,value:bo}]},{type:a,value:g}]},{type:a,value:g},{type:a,value:g},{type:b,tag:d,props:{},children:[{type:a,value:"\n  Все требования к механизму внешних ключей можно найти в\n  "},{type:b,tag:n,props:{title:C,link:"https:\u002F\u002Fdev.mysql.com\u002Fdoc\u002Frefman\u002F8.0\u002Fen\u002Fcreate-table-foreign-keys.html"},children:[]},{type:a,value:c},{type:b,tag:w,props:{},children:[]},{type:a,value:"Далее рассмотрим самые популярные причины.\n"}]},{type:a,value:g},{type:b,tag:i,props:{heading:"Разные типы полей",id:"diff-type"},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Столбцы должно быть одного типа,\n    а для "},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:"INTEGER"}]},{type:a,value:aH},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:"DECIMAL"}]},{type:a,value:"\n    ещё и одного размера.\n  "}]},{type:a,value:c},{type:b,tag:d,props:{className:[u,v]},children:[{type:a,value:bl}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Обычно внешний ключ ссылается на ID другой таблицы и по умолчанию тип ID:\n    "},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:"UNSIGNED BIG INTEGER"}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:q,props:{name:"cases\u002Fforeign-keys\u002Fmigration-old"},children:[]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Или начиная с 7 версии более лаконичный синтаксис, который создаёт колонку и ключ:\n  "}]},{type:a,value:c},{type:b,tag:q,props:{name:"cases\u002Fforeign-keys\u002Fmigration-new"},children:[]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:h},{type:b,tag:k,props:{},children:[{type:a,value:J}]},{type:a,value:", что в старых версиях по умолчанию тип ID был "},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:"UNSIGNED INTEGER"}]},{type:a,value:c}]},{type:a,value:g}]},{type:a,value:g},{type:b,tag:i,props:{heading:"Порядок миграций",id:"order"},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Логично, что прежде чем ссылаться на таблицу она уже должна быть создана,\n    тем не менее это часто упускается из виду и сначала создаётся \"дочерняя\" таблица.\n  "}]},{type:a,value:c},{type:b,tag:d,props:{className:[u,v]},children:[{type:a,value:bm}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Не всегда ошибка говорит, что не так и может быть общей: "},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:"Cannot add foreign key constraint"}]},{type:a,value:c}]},{type:a,value:g}]},{type:a,value:g},{type:b,tag:i,props:{heading:"Данные в таблице",id:"data-already"},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Таблица уже содержит невалидные значения. Вариант часто встречается, \n    когда внешний ключ добавляется на уже созданную таблицу в которой есть данные.\n  "}]},{type:a,value:c},{type:b,tag:d,props:{className:[u,v]},children:[{type:a,value:bo}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Ошибка говорит о том, что нельзя добавить ключ, т.к. данные не консистентные.\n    Проблему необходимо устранить вручную установив правильные значения или "},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:"NULL"}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Ещё один вариант происходит при откате миграций:\n  "}]},{type:a,value:c},{type:b,tag:d,props:{className:[u,v]},children:[{type:a,value:bn}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Причина часто в нарушенном порядке миграций или проблемах в "},{type:b,tag:e,props:{className:[f,l]},children:[{type:a,value:"down()"}]},{type:a,value:".\n    Если ошибка происходит при "},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:"php artisan migrate:fresh"}]},{type:a,value:", то необходимо вручную удалять\n    таблицы или данные в них.\n  "}]},{type:a,value:g}]},{type:a,value:g},{type:b,tag:i,props:{heading:"Движок таблиц",id:"engine"},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Родительская таблица не InnoDB. MyISAM не поддерживает внешние ключи.\n  "}]},{type:a,value:g}]}]},excerpt:{type:r,children:[{type:b,tag:i,props:{heading:A,id:B},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:da}]},{type:a,value:c},{type:b,tag:d,props:{className:[u,v]},children:[{type:a,value:db}]},{type:a,value:c},{type:b,tag:d,props:{className:[u,v]},children:[{type:a,value:bl}]},{type:a,value:c},{type:b,tag:d,props:{className:[u,v]},children:[{type:a,value:bm}]},{type:a,value:c},{type:b,tag:d,props:{className:[u,v]},children:[{type:a,value:bn}]},{type:a,value:c},{type:b,tag:d,props:{className:[u,v]},children:[{type:a,value:bo}]},{type:a,value:g}]}]},dir:x,path:"\u002Fcases\u002Fforeign-keys",extension:y,createdAt:ag,updatedAt:T},{slug:bp,description:"Укажи $fillable в модели",heading:"Не сохраняется поле в БД",altHeadings:"mass assignment, fillable",tags:c$,toc:[],body:{type:r,children:[{type:b,tag:i,props:{heading:A,id:B},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:dc}]},{type:a,value:c},{type:b,tag:d,props:{className:[u,v]},children:[{type:a,value:dd}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:de}]},{type:a,value:g}]},{type:a,value:g},{type:a,value:g},{type:b,tag:i,props:{heading:aa,id:L},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    По умолчанию модель защищена от\n    "},{type:b,tag:p,props:{title:"массового назначения",uri:df},children:[]},{type:a,value:"\n    полей, например:\n  "}]},{type:a,value:c},{type:b,tag:q,props:{name:"cases\u002Ffillable\u002Fquery"},children:[]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    При таком сохранении данных необходимо явно разрешать имена полей.\n  "}]},{type:a,value:g}]},{type:a,value:g},{type:b,tag:i,props:{heading:Z,id:V},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Указать необходимые поля в свойстве модели "},{type:b,tag:e,props:{className:[f,aj]},children:[{type:a,value:dg}]},{type:a,value:" согласно\n    "},{type:b,tag:p,props:{title:C,uri:df},children:[]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:q,props:{name:"cases\u002Ffillable\u002Fsolution"},children:[]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    или установить значения полей вручную:\n  "}]},{type:a,value:c},{type:b,tag:q,props:{name:"cases\u002Ffillable\u002Fsolution-2"},children:[]},{type:a,value:g}]}]},excerpt:{type:r,children:[{type:b,tag:i,props:{heading:A,id:B},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:dc}]},{type:a,value:c},{type:b,tag:d,props:{className:[u,v]},children:[{type:a,value:dd}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:de}]},{type:a,value:g}]}]},dir:x,path:"\u002Fcases\u002Ffillable",extension:y,createdAt:ag,updatedAt:T},{slug:dh,description:aA,heading:"Где найти логи?",altHeadings:"Где посмотреть ошибки",tags:U,toc:[],body:{type:r,children:[{type:b,tag:i,props:{heading:di,id:dj,className:[dk]},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:dl},{type:b,tag:e,props:{className:[f,j]},children:[{type:a,value:aA}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:dm},{type:b,tag:e,props:{className:[f,j]},children:[{type:a,value:dn}]},{type:a,value:do0}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:dp},{type:b,tag:p,props:{title:C,uri:dq},children:[]},{type:a,value:c}]},{type:a,value:g}]},{type:a,value:g},{type:a,value:g},{type:b,tag:i,props:{heading:"Логи php",id:"php"},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Логи php определяются директивами\n    "},{type:b,tag:n,props:{title:"log_errors",link:"https:\u002F\u002Fwww.php.net\u002Fmanual\u002Fru\u002Ferrorfunc.configuration.php#ini.log-errors"},children:[]},{type:a,value:"\n    и\n    "},{type:b,tag:n,props:{title:"error_log",link:"https:\u002F\u002Fwww.php.net\u002Fmanual\u002Fru\u002Ferrorfunc.configuration.php#ini.error-log"},children:[]},{type:a,value:"\n    в php.ini.\n  "}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Обычно error_log не определён и пути к логам указываются в конфигурации хоста nginx\u002Fapache:\n  "}]},{type:a,value:c},{type:b,tag:q,props:{name:"cases\u002Fhere-is-logs\u002Fvhost"},children:[]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Для UNIX пути обычно такие:\n  "}]},{type:a,value:c},{type:b,tag:M,props:{className:[N,I,W]},children:[{type:a,value:h},{type:b,tag:s,props:{},children:[{type:a,value:m},{type:b,tag:e,props:{className:[f,j]},children:[{type:a,value:"\u002Fvar\u002Flog\u002Fnginx\u002F"}]},{type:a,value:h}]},{type:a,value:h},{type:b,tag:s,props:{},children:[{type:a,value:m},{type:b,tag:e,props:{className:[f,j]},children:[{type:a,value:"\u002Fvar\u002Flog\u002Fapache2\u002F"}]},{type:a,value:h}]},{type:a,value:h},{type:b,tag:s,props:{},children:[{type:a,value:m},{type:b,tag:e,props:{className:[f,j]},children:[{type:a,value:"\u002Fvar\u002Flog\u002Fhttpd\u002F"}]},{type:a,value:h}]},{type:a,value:h},{type:b,tag:s,props:{},children:[{type:a,value:m},{type:b,tag:e,props:{className:[f,j]},children:[{type:a,value:"\u002Fvar\u002Flog\u002Fsyslog\u002F"}]},{type:a,value:h}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    На windows, при использовании openserver, laragon, xampp и прочих, смотри документацию к своему web-серверу,\n    возможно, в GUI есть соответствующие пункты меню или кнопки.\n  "}]},{type:a,value:g}]}]},excerpt:{type:r,children:[{type:b,tag:i,props:{heading:di,id:dj,className:[dk]},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:dl},{type:b,tag:e,props:{className:[f,j]},children:[{type:a,value:aA}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:dm},{type:b,tag:e,props:{className:[f,j]},children:[{type:a,value:dn}]},{type:a,value:do0}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:dp},{type:b,tag:p,props:{title:C,uri:dq},children:[]},{type:a,value:c}]},{type:a,value:g}]}]},dir:x,path:"\u002Fcases\u002Fhere-is-logs",extension:y,createdAt:P,updatedAt:T},{slug:dr,description:"Неприлично простая инструкция",heading:"Как сохранить изображение",altHeadings:"как сохранить картинку",tags:U,toc:[],body:{type:r,children:[{type:b,tag:i,props:{heading:bq},children:[{type:a,value:c},{type:b,tag:ds,props:{className:[br,I,W]},children:[{type:a,value:h},{type:b,tag:s,props:{className:[ac]},children:[{type:a,value:"\n      Создаём симлинк: "},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:bs}]},{type:a,value:h}]},{type:a,value:h},{type:b,tag:s,props:{className:[ac]},children:[{type:a,value:"\n      Сохраняем изображение в "},{type:b,tag:e,props:{className:[f,j]},children:[{type:a,value:at}]},{type:a,value:m},{type:b,tag:q,props:{name:"cases\u002Fhow-store-image\u002Fsimple-store"},children:[]},{type:a,value:h}]},{type:a,value:h},{type:b,tag:s,props:{className:[ac]},children:[{type:a,value:"\n      В БД сохраняем "},{type:b,tag:e,props:{className:[f,aj]},children:[{type:a,value:"$path"}]},{type:a,value:" - это путь "},{type:b,tag:k,props:{},children:[{type:a,value:"БЕЗ"}]},{type:a,value:" "},{type:b,tag:e,props:{className:[f,j]},children:[{type:a,value:at}]},{type:a,value:h}]},{type:a,value:h},{type:b,tag:s,props:{className:[ac]},children:[{type:a,value:"\n      Отображаем в шаблоне:\n      "},{type:b,tag:q,props:{name:"cases\u002Fhow-store-image\u002Fsimple-display"},children:[]},{type:a,value:h}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:d,props:{className:[E]},children:[{type:a,value:"\n    Нужен более развёрнутый пример? Смотри полную версию "},{type:b,tag:F,props:{to:"\u002Fstorage\u002F"},children:[{type:a,value:"«Работа с файлами в Laravel»"}]},{type:a,value:c}]},{type:a,value:g}]}]},dir:x,path:"\u002Fcases\u002Fhow-store-image",extension:y,createdAt:P,updatedAt:Q},{slug:dt,description:"Погугли; Сформулируй вопрос; будь кратким; показывай код как есть; не нервничай; не пиши в личку",heading:"Как задавать вопросы?",altHeadings:"Ааа, помогите, ничего не работает, У меня ошибка, что делать?",tags:U,toc:[],body:{type:r,children:[{type:b,tag:d,props:{className:[aL,aM]},children:[{type:a,value:du}]},{type:a,value:g},{type:b,tag:i,props:{heading:dv,id:dw},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:dx},{type:b,tag:k,props:{},children:[{type:a,value:dy}]},{type:a,value:dz},{type:b,tag:n,props:{title:dA,link:dB},children:[]},{type:a,value:dC}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:dD}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:dE},{type:b,tag:k,props:{},children:[{type:a,value:dF}]},{type:a,value:dG}]},{type:a,value:g}]},{type:a,value:g},{type:a,value:g},{type:b,tag:i,props:{heading:"Переходи к сути",id:"gist"},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Не задавай\n    "},{type:b,tag:n,props:{title:"meta-вопросы",link:"https:\u002F\u002Fnometa.xyz\u002Fru.html"},children:[]},{type:a,value:h},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:"привет"}]},{type:a,value:ad},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:"помогите"}]},{type:a,value:ad},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:"есть кто?"}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Сразу задавай подробный вопрос.\n  "}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Не спрашивай, работал ли кто с "},{type:b,tag:e,props:{className:[dH]},children:[{type:a,value:dI}]},{type:a,value:"\n    библиотекой или сталкивался ли кто с "},{type:b,tag:e,props:{className:[dH]},children:[{type:a,value:dI}]},{type:a,value:" ошибкой.\n    Даже если ни кто не сталкивался, то "},{type:b,tag:k,props:{},children:[{type:a,value:"опытные разработчики всё равно смогут подсказать"}]},{type:a,value:" в какую сторону двигаться.\n  "}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:h},{type:b,tag:k,props:{},children:[{type:a,value:"Просто задай свой вопрос."}]},{type:a,value:" Без лишних прелюдий и топтаний вокруг темы.\n  "}]},{type:a,value:g}]},{type:a,value:g},{type:b,tag:i,props:{heading:"Конкретика",id:"clarity"},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Не пиши "},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:"не работает"}]},{type:a,value:ah},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:"кидает ошибку"}]},{type:a,value:ah},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:"не помогло"}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:h},{type:b,tag:k,props:{},children:[{type:a,value:"Объясняй подробно, что происходит"}]},{type:a,value:", какая ошибка,\n    показывай итоговый код.\n  "}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:h},{type:b,tag:k,props:{},children:[{type:a,value:"Не используй местоимения"}]},{type:a,value:", говори всегда конкретно, потому что часто сложно понять о чем идёт речь,\n    когда сообщение состоит из \"он\", \"оно\", \"это\", \"этот\", \"тот\".\n  "}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Чем больше ты заставляешь из тебя вытаскивать информацию и задавать уточняющие вопросы,\n    тем меньше людей будет продолжать тратить на тебя время. \n    "},{type:b,tag:k,props:{},children:[{type:a,value:"Будь продуктивен, давай всю информацию сам"}]},{type:a,value:", \n    а не жди пока тебя попросят скинуть скрин ошибки или показать код, ибо "},{type:b,tag:k,props:{},children:[{type:a,value:"это нужно только тебе"}]},{type:a,value:z}]},{type:a,value:g}]},{type:a,value:g},{type:b,tag:i,props:{heading:"Полные скриншоты",id:"full-screen"},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Прикрепляй к сообщению "},{type:b,tag:k,props:{},children:[{type:a,value:"полные скриншоты"}]},{type:a,value:" кода и ошибок, "},{type:b,tag:k,props:{},children:[{type:a,value:"не обрезай их"}]},{type:a,value:".\n    Часто самое важное почему-то игнорируется, не надо стеснятся своего кода или неймингов,\n    "},{type:b,tag:k,props:{},children:[{type:a,value:"конфиденциальные данные закрась"}]},{type:a,value:". Большие куски кода или логов загружай на\n    "},{type:b,tag:n,props:{title:"pastebin",link:"https:\u002F\u002Fpaste.laravel.io\u002F"},children:[]},{type:a,value:c}]},{type:a,value:g}]},{type:a,value:g},{type:b,tag:i,props:{heading:"Показывай как есть",id:"show-really"},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Никогда "},{type:b,tag:k,props:{},children:[{type:a,value:"не изменяй код "}]},{type:a,value:" который отправляешь в чат, всегда отправляй то, что запускаешь.\n    Популярная проблема: тестируется один код, а в чат присылается другой,\n    в результате время людей потрачено в пустую, а ты будешь реже получать ответы.\n  "}]},{type:a,value:g}]},{type:a,value:g},{type:b,tag:i,props:{heading:"Не нервничай",id:"do-not-worry"},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Если тебя отправляют в гугл или в доку, то ты должен понимать, что ты задаёшь очень примитивные вопросы, \n    которые мог бы решить и сам, не психуй, а прими к сведению. Если ты гуглил, а тебе говорят \"погугли\", попроси\n    точную формулировку запроса, гуглить тоже надо уметь. Если тебе отвечают незнакомым словом,\n    не спеши сразу спрашивать \"что это?\", а разберись в теме сам.\n  "}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:h},{type:b,tag:k,props:{},children:[{type:a,value:"Не огрызайся и не отвечай "}]},{type:a,value:" на токсичные сообщения, тем более не переходи на личности.\n    В вопросе тебе это не поможет, а \"mute\" получишь ты.\n    Будь взрослее, "},{type:b,tag:k,props:{},children:[{type:a,value:"тебе ни кто ничего не должен"}]},{type:a,value:z}]},{type:a,value:g}]},{type:a,value:g},{type:b,tag:i,props:{heading:"Только общий чат",id:"only-public"},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:h},{type:b,tag:k,props:{},children:[{type:a,value:"Не пиши в личку"}]},{type:a,value:", продолжай общаться в общем чате. "},{type:b,tag:k,props:{},children:[{type:a,value:"Не стесняйся и не бойся критики"}]},{type:a,value:",\n    важно мнение большинства, а не одного человека.\n    Если отвечающий не прав, то кто-то вмешается и укажет на это,\n    а в личке тебя научат bad-практикам и ты об этом не узнаешь.\n    Как минимум правильных решений может быть несколько, в чем и заключается преимущество чатов.\n  "}]},{type:a,value:g}]},{type:a,value:g},{type:b,tag:i,props:{heading:"Зачем нужен чат?",id:L},children:[{type:a,value:c},{type:b,tag:d,props:{className:[E,W]},children:[{type:a,value:"\n    «Дай голодному рыбу - и ты накормишь его на один день.\n    Дай ему удочку, научи его ловить рыбу - и ты накормишь его на всю жизнь»\n  "}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:h},{type:b,tag:k,props:{},children:[{type:a,value:"Чат не гугл"}]},{type:a,value:", потому что гугл - это гугл. Ваш Кэп.\n  "}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Чат нужен "},{type:b,tag:k,props:{},children:[{type:a,value:aN}]},{type:a,value:" для простых вопросов-ответов, а для того,\n    чтобы более опытные разработчики "},{type:b,tag:k,props:{},children:[{type:a,value:"помогли научиться решать проблемы"}]},{type:a,value:", внести ясность в тему,\n    а не просто давали тебе готовые ответы.\n    Также чат нужен для сбора мнений, дискуссий и оценок.\n  "}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Разработка - это не только алгоритмический процесс по инструкциям,\n    разработка - это ещё и творчество, которое требует соответствующего мышления.\n  "}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Если тебе задают вопросы вместо ответа, то попробуй погуглить их или поразмышлять над ними в чате, потому что\n    такие вопросы являются "},{type:b,tag:k,props:{},children:[{type:a,value:"наводящими"}]},{type:a,value:". Дать тебе прямой ответ часто бесполезно,\n    ибо "},{type:b,tag:k,props:{},children:[{type:a,value:"смысл научиться думать самостоятельно"}]},{type:a,value:".\n    И в дальнейшем ты должен начать задавать такие наводящие вопросы самому себе и таким образом научиться\n    самостоятельно находить способы решения задач и проблем.\n  "}]},{type:a,value:g}]}]},excerpt:{type:r,children:[{type:b,tag:d,props:{className:[aL,aM]},children:[{type:a,value:du}]},{type:a,value:g},{type:b,tag:i,props:{heading:dv,id:dw},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:dx},{type:b,tag:k,props:{},children:[{type:a,value:dy}]},{type:a,value:dz},{type:b,tag:n,props:{title:dA,link:dB},children:[]},{type:a,value:dC}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:dD}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:dE},{type:b,tag:k,props:{},children:[{type:a,value:dF}]},{type:a,value:dG}]},{type:a,value:g}]}]},dir:x,path:"\u002Fcases\u002Fhow-to-ask",extension:y,createdAt:P,updatedAt:Q},{slug:dJ,description:"Laravel и Vue НЕ связаны друг с другом",heading:"Связка Laravel и Vue",altHeadings:dK,tags:O,toc:[],body:{type:r,children:[{type:b,tag:d,props:{},children:[{type:a,value:c},{type:b,tag:k,props:{},children:[{type:a,value:dL}]},{type:a,value:dM}]},{type:a,value:g},{type:b,tag:d,props:{},children:[{type:a,value:dN}]},{type:a,value:g},{type:a,value:g},{type:b,tag:d,props:{},children:[{type:a,value:"\n  Клиентская часть (frontend) взаимодействует с серверной частью (backend) по HTTP.\n"}]},{type:a,value:g},{type:b,tag:d,props:{},children:[{type:a,value:c},{type:b,tag:k,props:{},children:[{type:a,value:"Не важно что на фронте"}]},{type:a,value:": Vue, React, Angular и т.п. и что на бэке: Laravel, Symfony, Django, Spring, .Net и другие - принцип работы не меняется.\n"}]},{type:a,value:g},{type:b,tag:d,props:{},children:[{type:a,value:"\n  Laravel - backend фреймворк. Vue - frontend. Даже если ты пишешь vue в blade, то программно это никак их не связывает между собой.\n  Js выполняется на клиенте, php - на сервере.\n"}]},{type:a,value:g},{type:b,tag:d,props:{},children:[{type:a,value:"\n  Пишешь html в blade? Ок, но blade не выполняет html,\n  его читает клиент, а сервер возвращает обычный текст с заголовком "},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:"Content-Type: text\u002Fhtml"}]},{type:a,value:g}]},{type:a,value:g},{type:b,tag:d,props:{},children:[{type:a,value:"\n  Раньше Vue шёл из коробки с Laravel?! Не совсем. Он просто был указан в зависимостях\n  "},{type:b,tag:e,props:{className:[f,j]},children:[{type:a,value:"package.json"}]},{type:a,value:" и имел компонент для примера.\n  Всё, "},{type:b,tag:k,props:{},children:[{type:a,value:"никакой логики и \"связок\""}]},{type:a,value:", даже не было форм логина и регистрации. Возможно, имхо, это была маркетинговая компания по рекламе Vue.\n  Начиная с 6 версии, фронта из коробки всё меньше и меньше, как и должно быть в backend фреймворке.\n"}]},{type:a,value:g},{type:b,tag:d,props:{},children:[{type:a,value:"\n  Связкой можно назвать пакет Inertia.js, но он лишь \"сглаживает углы\", а общий принцип не меняется:\n  есть клиент, есть сервер, общение по HTTP. И Inertia - это не обязательно Vue, но и React.\n"}]},{type:a,value:g},{type:b,tag:d,props:{},children:[{type:a,value:"\n  Laravel + Vue действительно популярный стек на текущий момент, но популярны они не из-за каких-то\n  интеграций и магического функционала. "},{type:b,tag:k,props:{},children:[{type:a,value:"Это просто хорошие и удобные инструменты с низким порогом входа"}]},{type:a,value:",\n  поэтому с ними так легко и приятно работать.\n"}]}]},excerpt:{type:r,children:[{type:b,tag:d,props:{},children:[{type:a,value:c},{type:b,tag:k,props:{},children:[{type:a,value:dL}]},{type:a,value:dM}]},{type:a,value:g},{type:b,tag:d,props:{},children:[{type:a,value:dN}]}]},dir:x,path:"\u002Fcases\u002Flaravel-and-vue",extension:y,createdAt:ag,updatedAt:Q},{slug:dO,description:D,heading:"Логика в контроллерах это плохо?",altHeadings:"мысликсер, имхо",tags:U,toc:[],body:{type:r,children:[{type:b,tag:d,props:{className:[aL,aM]},children:[{type:a,value:dP}]},{type:a,value:g},{type:b,tag:d,props:{},children:[{type:a,value:dQ},{type:b,tag:F,props:{to:dR},children:[{type:a,value:bt}]},{type:a,value:dS}]},{type:a,value:g},{type:a,value:g},{type:b,tag:d,props:{},children:[{type:a,value:"\n  Например, если мы пишем простейший CRUD контроллер,\n  задача которого прочитать и записать данные, то, в случае с Laravel, вынос логики из контроллера может не принести пользы.\n"}]},{type:a,value:g},{type:b,tag:d,props:{},children:[{type:a,value:c},{type:b,tag:k,props:{className:[bf]},children:[{type:a,value:"Я ни в коем случае не призываю писать логику в контроллерах"}]},{type:a,value:", а говорю о том, что лаконичный синтаксис фреймворка\n  позволяет это делать не захламляя контроллер и не нарушая DRY. Например:\n"}]},{type:a,value:g},{type:b,tag:q,props:{name:"bad-practices\u002Fheavy-controllers\u002Fsimple"},children:[]},{type:a,value:g},{type:b,tag:d,props:{},children:[{type:a,value:"\n  Если говорить о перспективе, то конечно, "},{type:b,tag:k,props:{},children:[{type:a,value:"код может обрасти логикой или понадобится где-то ещё"}]},{type:a,value:".\n  Вопрос когда это произойдёт и произойдёт ли вообще? А когда произойдёт, то мы легко перенесём этот код в сервис.\n"}]},{type:a,value:g},{type:b,tag:d,props:{},children:[{type:a,value:"\n  Да, кейс, когда создаётся пост без загрузки изображений и дополнительной логики достаточно редкий,\n  но он встречается, ибо не все приложения должны иметь \"сложную\" логику, не надо заниматься самообманом,\n  не все проекты это высоконагруженные соц. сети и платформы с огромной кодовой базой и не все станут такими в будущем.\n  Если ты планируешь, что приложение будет расти и есть понимание \"как\",\n  то конечно, лучше сразу вынести в \"сервисы\", но если приложение будет простым CRUD-ом\n  и код похож на пример выше, то копипаст логики в \"сервис\" проблему не решает, а ставит новые задачи, например,\n  передача данных в сервис (DTO) и их валидация, обработка ответа и ошибок от сервиса.\n"}]},{type:a,value:g},{type:b,tag:d,props:{},children:[{type:a,value:"\n  На практике, к сожалению, я часто встречаю перенос логики из контроллера в другой класс,\n  который находится в директории "},{type:b,tag:e,props:{className:[f,j]},children:[{type:a,value:"app\u002FServices\u002F"}]},{type:a,value:", состоит из статических методов,\n  данные пробрасываются массивом или ещё хуже, как "},{type:b,tag:e,props:{className:[f,l]},children:[{type:a,value:aO}]},{type:a,value:",\n  а обработка ошибок отсутствует полностью. "},{type:b,tag:k,props:{},children:[{type:a,value:"В итоге такой сервис всё равно затруднительно использовать где-то ещё"}]},{type:a,value:",\n  а попытка кастомизации приводит к многочисленным ошибкам в разных местах приложения.\n  И появляется вопрос что хуже: такой \"сервис\" или логика в контроллерах?\n"}]},{type:a,value:g},{type:b,tag:d,props:{},children:[{type:a,value:c},{type:b,tag:e,props:{className:[E]},children:[{type:a,value:bT}]},{type:a,value:", если не хватает опыта, то лучше пусть в приложении будет похожая логика,\n  которая благодаря инструментарию фреймворка выглядит лаконично,\n  чем такие \"недосервисы\", которые существуют только из-за мема \"логика в контроллерах это плохо\".\n  "},{type:b,tag:k,props:{},children:[{type:a,value:"Цель верная, а мотив нет."}]},{type:a,value:g}]},{type:a,value:g},{type:b,tag:d,props:{},children:[{type:a,value:"\n  Данный вопрос не является простым и ответ не может быть однозначным, т.к. относится к архитектуре приложения,\n  а на архитектуру влияет множество факторов, учесть которые без опыта и конкретного ТЗ, к сожалению, невозможно.\n  В разделе "},{type:b,tag:F,props:{to:"\u002Flinks\u002F#books"},children:[{type:a,value:"«ссылки»"}]},{type:a,value:" можешь найти немного литературы, которая, возможно,\n  продвинет тебя в понимании. Удачи.\n"}]}]},excerpt:{type:r,children:[{type:b,tag:d,props:{className:[aL,aM]},children:[{type:a,value:dP}]},{type:a,value:g},{type:b,tag:d,props:{},children:[{type:a,value:dQ},{type:b,tag:F,props:{to:dR},children:[{type:a,value:bt}]},{type:a,value:dS}]}]},dir:x,path:"\u002Fcases\u002Flogic-in-controllers",extension:y,createdAt:P,updatedAt:Q},{slug:"intro",description:"Что такое Laravel Way?",heading:"Laraway - путь которого не существует",altHeadings:"Интро",shortHeight:150,toc:[],body:{type:r,children:[{type:b,tag:d,props:{},children:[{type:a,value:dT}]},{type:a,value:g},{type:b,tag:d,props:{},children:[{type:a,value:dU}]},{type:a,value:g},{type:b,tag:d,props:{},children:[{type:a,value:dV}]},{type:a,value:g},{type:a,value:g},{type:b,tag:d,props:{className:["text-2xl"]},children:[{type:a,value:"\n  \"Ларавэйно\" - это\n"}]},{type:a,value:g},{type:b,tag:M,props:{className:[W,N,I]},children:[{type:a,value:c},{type:b,tag:s,props:{},children:[{type:a,value:"code style"}]},{type:a,value:c},{type:b,tag:s,props:{},children:[{type:a,value:"соглашения об именовании"}]},{type:a,value:c},{type:b,tag:s,props:{},children:[{type:a,value:"best-practices, как следствия ошибок разработчиков плохо знакомых с фреймворком"}]},{type:a,value:c},{type:b,tag:s,props:{},children:[{type:a,value:"использование инструментов из коробки"}]},{type:a,value:g}]},{type:a,value:g},{type:b,tag:d,props:{},children:[{type:a,value:"\n  Но ничто из этого списка не относится конкретно к Laravel и не диктует \"как надо\".\n"}]},{type:a,value:g},{type:b,tag:d,props:{},children:[{type:a,value:"\n  Также в этот список относят повальное использование различных фасадов и хелперов заменяющих нативные возможности.\n  Например, всегда использовать "},{type:b,tag:e,props:{className:[f,l]},children:[{type:a,value:"collect()"}]},{type:a,value:" вместо простого массива;\n  "},{type:b,tag:e,props:{className:[f,l]},children:[{type:a,value:"Arr::get()"}]},{type:a,value:", чтобы получить элемент; бездумно обернуть всё в\n  "},{type:b,tag:e,props:{className:[f,l]},children:[{type:a,value:"tap()"}]},{type:a,value:dW},{type:b,tag:e,props:{className:[f,l]},children:[{type:a,value:"app()"}]},{type:a,value:".\n  Слепое использование функционала, только потому что он предоставлен твоим любимым фреймворком - это и есть проблема «Laravel Way».\n"}]},{type:a,value:g},{type:b,tag:d,props:{},children:[{type:a,value:"\n  Чем больше ты упарываешься в магию и пытаешься писать \"ларавэйно\", тем дальше ты уходишь от качественного и оптимизированного кода.\n  Не надо использовать фичи, просто потому что они есть. Не надо пытаться подражать коду фреймворка из vendor-а.\n  Надо стараться писать аккуратный и простой код согласно реальному ТЗ,\n  а не обмазываться вызовами тяжёлых функций без необходимости.\n"}]},{type:a,value:g},{type:b,tag:d,props:{},children:[{type:a,value:"\n  Ответом на вопрос "},{type:b,tag:k,props:{},children:[{type:a,value:"«How to do it in Laravel?»"}]},{type:a,value:" будет всегда - "},{type:b,tag:k,props:{},children:[{type:a,value:"«также как и не в Laravel»"}]},{type:a,value:".\n  Тем не менее, конечно, не стоит изобретать велосипед и игнорировать возможности фреймворка... "},{type:b,tag:k,props:{},children:[{type:a,value:"сохраняй равновесие"}]},{type:a,value:$}]},{type:a,value:g},{type:b,tag:d,props:{},children:[{type:a,value:"\n  И какой же вывод, спросишь ты? Всё свелось к Инь-Яну?\n  Разработка - это всегда баланс и компромисс между множеством крайностей.\n  Код - это средство общения людей с машинами и с другими людьми.\n  На самом деле нет никакого «laravel way», нет никакого правильного или аутентичного пути конкретно для Laravel.\n  Мы пишем код, чтобы он корректно работал, был поддерживаемый и читаем для других разработчиков.\n  А \"ларавэйный\" ли он - не имеет никакого значения, не стоит гнаться за абстрактными понятиями.\n"}]},{type:a,value:g},{type:b,tag:d,props:{className:["mt-7"]},children:[{type:a,value:"\n  Laraway - это бесконечный, суровый и в тоже время прекрасный холивар...\n  Каким будет твой - решать тебе.\n"}]},{type:a,value:g},{type:b,tag:d,props:{className:[E]},children:[{type:a,value:"\n  Добро пожаловать в мир разработки и удачного пути...\n"}]}]},excerpt:{type:r,children:[{type:b,tag:d,props:{},children:[{type:a,value:dT}]},{type:a,value:g},{type:b,tag:d,props:{},children:[{type:a,value:dU}]},{type:a,value:g},{type:b,tag:d,props:{},children:[{type:a,value:dV}]}]},dir:x,path:"\u002Fcases\u002Fintro",extension:y,createdAt:P,updatedAt:dX},{slug:"magic",description:"Не интуитивные моменты, о которых необходимо знать заранее",heading:"Неочевидное поведение",altHeadings:D,tags:D,toc:[],body:{type:r,children:[{type:b,tag:d,props:{},children:[{type:a,value:dY}]},{type:a,value:g},{type:b,tag:d,props:{},children:[{type:a,value:dZ}]},{type:a,value:g},{type:b,tag:d,props:{},children:[{type:a,value:d_}]},{type:a,value:g},{type:a,value:g},{type:b,tag:i,props:{heading:"Passed Validation",id:"passed-validation"},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:h},{type:b,tag:p,props:{title:"Документация",uri:"validation#preparing-input-for-validation"},children:[]},{type:a,value:"\n    предлагает методы в "},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:"FormRequest"}]},{type:a,value:" для обработки значений в запросе:\n  "}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:h},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:d$}]},{type:a,value:" предназначен для подготовки полей ДО валидации.\n    Это может быть полезно для приведения полей к определенному типу, форматирования slug,\n    добавления составных полей и т.п.\n  "}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:h},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:ea}]},{type:a,value:" предназначен для нормализации полей ПОСЛЕ валидации.\n    Может использоваться для восстановления значений, добавления новых полей, приведения к типу.\n    Применяется не часто.\n  "}]},{type:a,value:c},{type:b,tag:d,props:{className:[au]},children:[{type:a,value:"\n    После валидации в FormRequest, многие разработчики, используют популярные методы излечения данных из запроса:\n    "},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:av}]},{type:a,value:ae},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:bu}]},{type:a,value:z}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Неочевидность заключается в том, что методы "},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:av}]},{type:a,value:ae},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:bu}]},{type:a,value:"\n    могут вернуть иные значения от методов "},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:ao}]},{type:a,value:ah},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:bv}]},{type:a,value:bw},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:"only"}]},{type:a,value:z}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Это связанно с тем, что методы "},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:av}]},{type:a,value:ae},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:bu}]},{type:a,value:" возвращают\n    значения которые прошли валидацию, включая изменения в "},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:d$}]},{type:a,value:" \n    и "},{type:b,tag:k,props:{},children:[{type:a,value:aN}]},{type:a,value:" включая изменения в "},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:ea}]},{type:a,value:", \n    потому что эти значения не проходили валидацию.\n  "}]},{type:a,value:c},{type:b,tag:q,props:{name:"cases\u002Fmagic\u002Fpassed-validation"},children:[]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Если подумать, то поведение вполне логичное, но при смешивании методов "},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:av}]},{type:a,value:"\n    и "},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:ao}]},{type:a,value:" легко можно упустить, что значения разные. Например, результат \n    "},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:av}]},{type:a,value:" передается в "},{type:b,tag:e,props:{className:[f,l]},children:[{type:a,value:"Model::create()"}]},{type:a,value:" массивом, а\n    одиночное значение из "},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:ao}]},{type:a,value:" передается отдельно в сервис, при этом разработчик может\n    ожидать, что значения будут одинаковыми.\n  "}]},{type:a,value:g}]},{type:a,value:g},{type:b,tag:i,props:{heading:"API Response",id:"api-response"},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n     Многие разработчики уже привыкли, что в laravel из контроллера можно возвращать что угодно: \n     ApiResource и Response, шаблоны и модели, строки и массивы, stdClass и любые реализации PSR-7.\n  "}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Рекомендую ознакомиться с реализацией метода\n    "},{type:b,tag:p,props:{title:"toResponse",type:O,uri:"Illuminate\u002FRouting\u002FRouter.html#method_toResponse"},children:[]},{type:a,value:"\n    в роутере, чтобы лучше понимать почему и как это работает.\n  "}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Пример ниже встречается достаточно редко, но всё же имеет неочевидное поведение:\n  "}]},{type:a,value:c},{type:b,tag:q,props:{name:"cases\u002Fmagic\u002Fapi-response"},children:[]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    По умолчанию "},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:eb}]},{type:a,value:" имеет wrapper "},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:ec}]},{type:a,value:" \n    и во втором примере ресурс теряет wrapper из-за "},{type:b,tag:e,props:{className:[f,l]},children:[{type:a,value:bS}]},{type:a,value:".\n    Это не значит, что ключ "},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:ec}]},{type:a,value:" всегда удаляется. \n    Это происходит из-за дополнительного оборачивания в "},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:ed}]},{type:a,value:", \n    чем уже и является "},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:eb}]},{type:a,value:z}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Поведение не критичное, но может привести к \"сборной солянке\" ответов, что доставит неудобства для клиента.\n  "}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Скорей всего, такой код пишут для изменения статуса ответа, либо просто потому что так привыкли и \n    копировали с других контроллеров или уроков, где возвращался обычный массив.\n  "}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Если же это делалось для изменения статуса,\n    то у "},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:ed}]},{type:a,value:", наследника "},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:ee}]},{type:a,value:",\n    уже есть необходимые методы:\n  "}]},{type:a,value:c},{type:b,tag:q,props:{name:"cases\u002Fmagic\u002Fapi-response-with-status"},children:[]},{type:a,value:g}]},{type:a,value:g},{type:b,tag:i,props:{heading:"DI в контроллере",id:"controller-di"},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    На данную тему есть блок в "},{type:b,tag:F,props:{to:"\u002Fbad-practices\u002F#constructor-controller"},children:[{type:a,value:bt}]},{type:a,value:",\n    где в одном из пунктов говорится о жизненном цикле фреймворка.\n  "}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Внедрение зависимостей в конструкторе контроллера вполне стандартная практика, которая\n    не влияет на сами зависимости, но не в laravel, где контроллер создается ДО выполнения middleware,\n    а значит сервисы будут инстанцированы намного раньше, чем будут использованы.\n  "}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Это оказывает неочевидное влияние, если сервис зависит от каких-либо состояний, которые вносят middleware.\n    Самый популярный случай это работа с сессией, аутентификацией и авторизацией, но не ограничивается ими.\n  "}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Чаще всего, зависимость от каких-либо внешних состояний в конструкторе контроллера свидетельствует о плохой архитектуре\n    сервиса. Но на практике периодически встречается и поэтому приходится считаться и задумываться о том,\n    в какой момент инстанцируется тот или иной класс.\n  "}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Рекомендую внедрять зависимости непосредственно в методы контроллера, таким образом они будут ближе к логике, \n    не будут влиять на соседние методы, будут созданы в момент вызова экшена перед использованием.\n  "}]},{type:a,value:g}]},{type:a,value:g},{type:b,tag:i,props:{heading:"Eloquent collection",id:"eloquent-collection"},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Коллекции достаточно популярны в приложениях на laravel и так или иначе с ними приходится работать. \n    Когда говорят "},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:bx}]},{type:a,value:", то чаще всего имеют в виду базовый класс\n    "},{type:b,tag:p,props:{title:"\\Illuminate\\Support\\Collection",type:O,uri:"Illuminate\u002FSupport\u002FCollection.html"},children:[]},{type:a,value:"\n    и ссылаются на "},{type:b,tag:p,props:{title:aP,uri:"collections"},children:[]},{type:a,value:" коллекций.\n  "}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Есть еще одна популярная коллекция, с которой тоже все работают, но не все знают.\n    Это\n    "},{type:b,tag:p,props:{title:"\\Illuminate\\Database\\Eloquent\\Collection",type:O,uri:"Illuminate\u002FDatabase\u002FEloquent\u002FCollection.html"},children:[]},{type:a,value:"\n    (далее просто "},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:ap}]},{type:a,value:") с отдельной страницей \n    "},{type:b,tag:p,props:{title:C,uri:"eloquent-collections"},children:[]},{type:a,value:z}]},{type:a,value:c},{type:b,tag:d,props:{className:[ef]},children:[{type:a,value:h},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:ap}]},{type:a,value:" наследует "},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:bx}]},{type:a,value:", \n    поэтому очевидной разницы нет, методы написаны таким образом, что не меняется их поведение, но не значит, \n    что так будет всегда.\n  "}]},{type:a,value:c},{type:b,tag:d,props:{className:[ef]},children:[{type:a,value:"\n    Немаловажный момент, что методы \n    "},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:"countBy"}]},{type:a,value:aq},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:"collapse"}]},{type:a,value:aq},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:"flatten"}]},{type:a,value:aq},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:"flip"}]},{type:a,value:aq},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:"keys"}]},{type:a,value:aq},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:"pluck"}]},{type:a,value:aq},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:"zip"}]},{type:a,value:ad},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:"pad"}]},{type:a,value:"\n    вернут базовую "},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:bx}]},{type:a,value:", \n    а не "},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:ap}]},{type:a,value:", смотри  \n    "},{type:b,tag:p,props:{title:aP,uri:"eloquent-collections#eloquent-collection-conversion"},children:[]},{type:a,value:z}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Также "},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:ap}]},{type:a,value:h},{type:b,tag:p,props:{title:"добавляет новые методы",uri:"eloquent-collections#available-methods"},children:[]},{type:a,value:",\n    например, \n    "},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:"find"}]},{type:a,value:ad},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:eg}]},{type:a,value:" и т.п., которых нет в базовой коллекции.\n  "}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    В данном блоке нет явных \"проблем\" или особенностей, но важно понимать с какой коллекцией работаешь. \n  "}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Также нет 100% гарантии, что завтра какие-то методы базовой коллекции не изменят своё поведение,\n    а методы "},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:ap}]},{type:a,value:" останутся прежними или наоборот. Конечно, эта ответственность\n    ложится на плечи разработчиков фреймворка, но всё же.\n  "}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Чаще всего методы "},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:ap}]},{type:a,value:" пытаются использоваться на базовой коллекции,\n    что приводит к ошибке, но и выявляется обычно на этапе разработки.\n  "}]},{type:a,value:g}]},{type:a,value:g},{type:b,tag:i,props:{heading:"Сериализация моделей",id:"model-job"},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Для асинхронного выполнения задач используют "},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:eh}]},{type:a,value:" и часто в качестве значений\n    передают модели "},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:bi}]},{type:a,value:" («laravel way»).\n  "}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Для того чтобы правильно сериализировать модель в "},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:eh}]},{type:a,value:" используется трейт \n    "},{type:b,tag:p,props:{title:"\\Illuminate\\Queue\\SerializesModels",type:O,uri:"Illuminate\u002FQueue\u002FSerializesModels.html"},children:[]},{type:a,value:z}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Неочевидностью такой сериализации модели является обратный процесс - десериализации, в котором происходит обновление\n    модели из базы данных для её актуализации. Это происходит в методе\n    "},{type:b,tag:p,props:{title:"restoreModel",type:O,uri:"Illuminate\u002FQueue\u002FSerializesAndRestoresModelIdentifiers.html#method_restoreModel"},children:[]},{type:a,value:",\n    внутри которого "},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:"firstOrFail"}]},{type:a,value:ae},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:eg}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Само по себе такое поведение вполне логично, потому что пока задача находилась в очереди данные могли измениться.\n    Но при этом, можно не сразу понять, почему падает с ошибкой, когда вроде запись должна существовать, \n    особенно это актуально с SoftDelete.\n  "}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Если же обновление модели является нежелательным результатом, то следует отказаться от использования трейта \n    и передачи всей модели, а передавать только необходимые данные.\n  "}]},{type:a,value:g}]},{type:a,value:g},{type:b,tag:i,props:{heading:"Model binding",id:"model-binding"},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    При использовании "},{type:b,tag:p,props:{title:"«Route Model Binding»",uri:"routing#route-model-binding"},children:[]},{type:a,value:"\n    начинающие разработчики иногда сталкиваются с тем, что в контроллер приходит \"пустая\" модель.\n  "}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Это происходит когда не срабатывает binding и класс инжектится, как любой другой, с помощью \n    "},{type:b,tag:p,props:{title:"«Service Container»",uri:"container"},children:[]},{type:a,value:", \n    который просто создаст \"пустую\" модель "},{type:b,tag:e,props:{className:[f,l]},children:[{type:a,value:"new Model()"}]},{type:a,value:z}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Самая популярная причина - это разные имена сегмента в маршруте и аргумента в контроллере.\n    Соответствие имен - основное условие работы binding, об этом прямо сказано в\n    "},{type:b,tag:p,props:{title:C,uri:"routing#implicit-binding"},children:[]},{type:a,value:z}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Также binding может приводить к неочевидным 404-ым ошибкам, например, из-за \n    "},{type:b,tag:p,props:{title:"«Global Scopes»",uri:"eloquent#global-scopes"},children:[]},{type:a,value:",\n    таких как "},{type:b,tag:p,props:{title:"«Soft Delete»",uri:"\u002Feloquent#soft-deleting"},children:[]},{type:a,value:" или любых других.\n  "}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Если на используемой модели есть «Soft Delete» и его надо игнорировать, \n    то используй метод "},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:"withTrashed"}]},{type:a,value:", согласно \n    "},{type:b,tag:p,props:{title:C,uri:"routing#implicit-soft-deleted-models"},children:[]},{type:a,value:z}]},{type:a,value:g}]},{type:a,value:g},{type:b,tag:i,props:{heading:"Cookie queue",id:"cookie-queue"},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Иногда начинающие разработчики устанавливают cookie и читают их одном процессе.\n    Кажется, что записанное значение должно быть таким же и при чтении, но это не так.\n  "}]},{type:a,value:c},{type:b,tag:q,props:{name:"cases\u002Fmagic\u002Fcookie-queue"},children:[]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Здесь всё логично, текущее значение было "},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:"old"}]},{type:a,value:", установили "},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:"new"}]},{type:a,value:",\n    но установятся cookie только в ответе, о чем говорит метод "},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:"queue"}]},{type:a,value:". Следовательно\n    метод "},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:ao}]},{type:a,value:" вернет новое значение только при следующем запросе, когда клиент отправит cookie,\n    а в текущем запросе будет читаться \"предыдущее\" значение.\n  "}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:h},{type:b,tag:k,props:{},children:[{type:a,value:J}]},{type:a,value:", что использование "},{type:b,tag:e,props:{className:[f,l]},children:[{type:a,value:c_}]},{type:a,value:" \n    или "},{type:b,tag:e,props:{className:[f,l]},children:[{type:a,value:"dump()"}]},{type:a,value:" помешает установке cookie, должен произойти корректный ответ клиенту.\n  "}]},{type:a,value:g}]},{type:a,value:g},{type:b,tag:i,props:{heading:"Request params",id:"request-params"},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Если в теле запроса и в query параметрах присутствуют одинаковые имена, \n    то при чтении параметров из "},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:aO}]},{type:a,value:" может возникнуть неочевидная ситуация.\n  "}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:ei},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:"query"}]},{type:a,value:" всегда читает только параметры из "},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:"QUERY_STRING"}]},{type:a,value:",\n    с ним проблем нет. Если в \"GET\" параметрах ничего не передано, то он вернет "},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:"null"}]},{type:a,value:z}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Но, остальные методы в "},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:aO}]},{type:a,value:" возвращают разные значения. Пример:\n  "}]},{type:a,value:c},{type:b,tag:q,props:{name:"cases\u002Fmagic\u002Frequest-params"},children:[]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Методы "},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:ao}]},{type:a,value:ah},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:bv}]},{type:a,value:" и магическое свойство возвращают разные значения,\n    когда параметр передан в query и в body одновременно. Это происходит из-за внутреннего устройства методов.\n  "}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    У метода "},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:ao}]},{type:a,value:" приоритетным является\n    значение из query, если его нет, то читается из body.\n  "}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:ei},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:bv}]},{type:a,value:" и магическое свойство, из-за способа слияния,\n    сначала получают параметр из body, а затем из query.\n  "}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Пустые значения также учитываются, потому что существует ключ. \n    Методы вернут одинаковые значения, только если в запросе отсутствуют одинаковые имена.\n  "}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Данное поведение может серьезно повлиять на логику выполнения, если вдруг в запросе придут одинаковые параметры\n    из разных \"источников\".\n  "}]},{type:a,value:g}]},{type:a,value:g},{type:b,tag:i,props:{heading:"Blade components",id:"blade-components"},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    При использовании Blade компонентов необходимо учитывать \n    "},{type:b,tag:p,props:{title:"зарезервированные слова",uri:"blade#reserved-keywords"},children:[]},{type:a,value:",\n    которые могут изменить ожидаемое поведение шаблонов.\n  "}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Кроме перечисленных в документации, ещё\n    "},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:ej}]},{type:a,value:ad},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:_}]},{type:a,value:ad},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:"component"}]},{type:a,value:ad},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:"componentName"}]},{type:a,value:cE},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:"attributes"}]},{type:a,value:z}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Использование зарезервированных слов может неявно повлиять на выполнение шаблонов или привести к ошибке.\n    Например, в примере ниже, если не была явно определена переменная "},{type:b,tag:e,props:{className:[f,l]},children:[{type:a,value:"$component"}]},{type:a,value:",\n    то в ней будет объект предыдущего компонента.\n  "}]},{type:a,value:c},{type:b,tag:q,props:{name:"cases\u002Fmagic\u002Fblade-components"},children:[]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Это достаточно редкий случай, но если где-то ниже в шаблоне будет проверка переменной \n    на "},{type:b,tag:e,props:{className:[f,l]},children:[{type:a,value:"empty"}]},{type:a,value:", то результат будет ложным.\n  "}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Тоже самое касается и остальных имен, список объявленных переменных можно получить\n    с помощью функции "},{type:b,tag:e,props:{className:[f,l]},children:[{type:a,value:"get_defined_vars()"}]},{type:a,value:z}]},{type:a,value:g}]}]},excerpt:{type:r,children:[{type:b,tag:d,props:{},children:[{type:a,value:dY}]},{type:a,value:g},{type:b,tag:d,props:{},children:[{type:a,value:dZ}]},{type:a,value:g},{type:b,tag:d,props:{},children:[{type:a,value:d_}]}]},dir:x,path:"\u002Fcases\u002Fmagic",extension:y,createdAt:ek,updatedAt:"2025-04-15T23:33:55.474Z"},{slug:el,description:"Проверь роуты и убедись, что нет редиректа",heading:"Method is not supported",altHeadings:D,tags:_,toc:[],body:{type:r,children:[{type:b,tag:i,props:{heading:em,id:en},children:[{type:a,value:c},{type:b,tag:d,props:{className:[u,v]},children:[{type:a,value:eo}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:ep}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:eq},{type:b,tag:e,props:{className:[f,l]},children:[{type:a,value:er}]},{type:a,value:es},{type:b,tag:e,props:{className:[f,l]},children:[{type:a,value:et}]},{type:a,value:eu},{type:b,tag:e,props:{className:[f,l]},children:[{type:a,value:by}]},{type:a,value:c}]},{type:a,value:g}]},{type:a,value:g},{type:a,value:g},{type:b,tag:i,props:{heading:"Второй вариант",id:"variant-2"},children:[{type:a,value:c},{type:b,tag:d,props:{className:[u,v]},children:[{type:a,value:"\n    The GET method is not supported for this route. Supported methods: POST.\n  "}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Эта проблема специфичнее предыдущей. т.к. чаще всего происходит при отправке POST запроса, а в ошибке пишет про GET,\n    что путает начинающих.\n  "}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Самая популярное - это редирект. Редирект всегда GET. Происходить он может по многим причинам, вот самые популярные:\n  "}]},{type:a,value:c},{type:b,tag:M,props:{className:[N,I]},children:[{type:a,value:h},{type:b,tag:s,props:{},children:[{type:a,value:"в URL есть закрывающий слэш и по умолчанию переадресовывает на адрес без \"\u002F\""}]},{type:a,value:h},{type:b,tag:s,props:{},children:[{type:a,value:"переадресация c\u002Fна www"}]},{type:a,value:h},{type:b,tag:s,props:{},children:[{type:a,value:"переадресация на http(s)"}]},{type:a,value:h},{type:b,tag:s,props:{},children:[{type:a,value:"редирект в пользовательском коде"}]},{type:a,value:h},{type:b,tag:s,props:{},children:[{type:a,value:"иное правило в настройках web-сервера"}]},{type:a,value:c}]},{type:a,value:g}]}]},excerpt:{type:r,children:[{type:b,tag:i,props:{heading:em,id:en},children:[{type:a,value:c},{type:b,tag:d,props:{className:[u,v]},children:[{type:a,value:eo}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:ep}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:eq},{type:b,tag:e,props:{className:[f,l]},children:[{type:a,value:er}]},{type:a,value:es},{type:b,tag:e,props:{className:[f,l]},children:[{type:a,value:et}]},{type:a,value:eu},{type:b,tag:e,props:{className:[f,l]},children:[{type:a,value:by}]},{type:a,value:c}]},{type:a,value:g}]}]},dir:x,path:"\u002Fcases\u002Fmethod-is-not-supported",extension:y,createdAt:ag,updatedAt:Q},{slug:ev,description:"where('status', 1) или whereStatus(1)",heading:"Магический синтаксис",altHeadings:ew,tags:ak,toc:[],body:{type:r,children:[{type:b,tag:d,props:{},children:[{type:a,value:ex},{type:b,tag:F,props:{to:ey},children:[{type:a,value:ez}]},{type:a,value:eA}]},{type:a,value:g},{type:b,tag:d,props:{},children:[{type:a,value:eB},{type:b,tag:e,props:{className:[f,l]},children:[{type:a,value:aw}]},{type:a,value:eC}]},{type:a,value:g},{type:a,value:g},{type:b,tag:q,props:{name:"cases\u002Fmethod-magic-syntax\u002Fwhere-regular"},children:[]},{type:a,value:g},{type:b,tag:q,props:{name:"cases\u002Fmethod-magic-syntax\u002Fwhere-magic"},children:[]},{type:a,value:g},{type:b,tag:d,props:{},children:[{type:a,value:"\n  Обычно у разработчиков первая реакция\n  "},{type:b,tag:e,props:{className:[E]},children:[{type:a,value:"\"ух ты, а так можно было?\""}]},{type:a,value:". Да, действительно так "},{type:b,tag:k,props:{},children:[{type:a,value:"можно, но не нужно"}]},{type:a,value:$}]},{type:a,value:g},{type:b,tag:i,props:{heading:"Читаемость кода",id:"readability"},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Сначала код может показаться более \"гладким\", но выглядит он так только в простых примерах,\n    с простыми именами полей. Когда условий значительно больше, а имена становятся реальными,\n    то читаемость кода падает.\n  "}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    В первом примере (обычный синтаксис) мы можем очень быстро, не вчитываясь, пробежаться глазами\n    и найти все "},{type:b,tag:e,props:{className:[f,l]},children:[{type:a,value:aw}]},{type:a,value:" и поля по которым происходит выборка.\n    Это происходит благодаря визуальному отделению имени поля от имени метода и помогает в этом ещё и подсветка.\n  "}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Во втором примере, нам придётся вчитываться в название метода и искать\n    где заканчивается where и начинается имя колонки, и подсветка нам в этом не поможет.\n  "}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Субъективно, скажешь ты? Ок, двигаемся дальше.\n  "}]},{type:a,value:g}]},{type:a,value:g},{type:b,tag:i,props:{heading:"Поддержка IDE",id:"ide"},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Следующая проблема альтернативного синтаксиса - это поддержка IDE. На сегодняшний день существует плагин, который\n    понимает такие методы, но позиция "},{type:b,tag:e,props:{className:[E]},children:[{type:a,value:"\"нужен плагин, чтобы работать с фреймворком\""}]},{type:a,value:" слабая.\n    Может лучше писать так, что бы код можно было поддерживать не привязываясь к IDE и плагинам?\n    Понимаю, когда иначе никак не написать или вариант превосходит в своей полезности, но в данном случае это не так.\n  "}]},{type:a,value:g}]},{type:a,value:g},{type:b,tag:i,props:{heading:"Конфликт методов",id:"conflict"},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    И самая главная проблема - конфликт с \"реальными\" методами QueryBuilder-а. Например:\n  "}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:h},{type:b,tag:e,props:{className:[f,l]},children:[{type:a,value:"whereDate()"}]},{type:a,value:h},{type:b,tag:e,props:{className:[f,l]},children:[{type:a,value:"whereTime()"}]},{type:a,value:h},{type:b,tag:e,props:{className:[f,l]},children:[{type:a,value:"whereMonth()"}]},{type:a,value:h},{type:b,tag:e,props:{className:[f,l]},children:[{type:a,value:"whereDay()"}]},{type:a,value:h},{type:b,tag:e,props:{className:[f,l]},children:[{type:a,value:"whereYear()"}]},{type:a,value:h},{type:b,tag:e,props:{className:[f,l]},children:[{type:a,value:"whereColumn()"}]},{type:a,value:h},{type:b,tag:e,props:{className:[f,l]},children:[{type:a,value:"whereKey()"}]},{type:a,value:h},{type:b,tag:e,props:{className:[f,l]},children:[{type:a,value:"whereExists()"}]},{type:a,value:h},{type:b,tag:e,props:{className:[f,l]},children:[{type:a,value:"whereFullText()"}]},{type:a,value:h},{type:b,tag:e,props:{className:[f,l]},children:[{type:a,value:"whereNot()"}]},{type:a,value:h},{type:b,tag:e,props:{className:[f,l]},children:[{type:a,value:"whereHas()"}]},{type:a,value:h},{type:b,tag:e,props:{className:[f,l]},children:[{type:a,value:"whereIn()"}]},{type:a,value:h},{type:b,tag:e,props:{className:[f,l]},children:[{type:a,value:"whereBetween()"}]},{type:a,value:h},{type:b,tag:e,props:{className:[f,l]},children:[{type:a,value:"whereJsonContains()"}]},{type:a,value:h},{type:b,tag:e,props:{className:[f,l]},children:[{type:a,value:"whereNested()"}]},{type:a,value:h},{type:b,tag:e,props:{className:[f,l]},children:[{type:a,value:"whereSub()"}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    И это не полный список, который может дополняться с обновлениями фреймворка.\n    Маловероятно, что в БД будут поля с именами has или in, но такая вероятность всегда есть. А, например,\n    date, time, month, day, year, key, full_text встречаются достаточно часто. В данном случае будут вызваны методы фреймворка и\n    чтобы сделать выборку по полю, придётся писать обычный "},{type:b,tag:e,props:{className:[f,l]},children:[{type:a,value:aw}]},{type:a,value:", что делает код разностилевым\n    и как следствие напрашивается логичный вариант - писать в одном стиле.\n  "}]},{type:a,value:g}]},{type:a,value:g},{type:b,tag:d,props:{},children:[{type:a,value:"\n  Я не буду отговаривать использовать \"магический синтаксис\", каждый делает выводы для себя сам,\n  но не вижу ни одного плюса, чтобы отказаться от обычного "},{type:b,tag:e,props:{className:[f,l]},children:[{type:a,value:aw}]},{type:a,value:$}]},{type:a,value:g},{type:b,tag:d,props:{},children:[{type:a,value:"\n  Тем не менее есть места, где \"магический синтаксис\" выглядит уместно и не доставляет проблем, например, в response:\n"}]},{type:a,value:g},{type:b,tag:q,props:{name:"cases\u002Fmethod-magic-syntax\u002Fwith-regular"},children:[]},{type:a,value:g},{type:b,tag:q,props:{name:"cases\u002Fmethod-magic-syntax\u002Fwith-magic"},children:[]}]},excerpt:{type:r,children:[{type:b,tag:d,props:{},children:[{type:a,value:ex},{type:b,tag:F,props:{to:ey},children:[{type:a,value:ez}]},{type:a,value:eA}]},{type:a,value:g},{type:b,tag:d,props:{},children:[{type:a,value:eB},{type:b,tag:e,props:{className:[f,l]},children:[{type:a,value:aw}]},{type:a,value:eC}]}]},dir:x,path:"\u002Fcases\u002Fmethod-magic-syntax",extension:y,createdAt:P,updatedAt:Q},{slug:eD,description:"new Model() vs Model::create()",heading:"Способы сохранения новых данных",altHeadings:ew,tags:ak,toc:[],body:{type:r,children:[{type:b,tag:d,props:{},children:[{type:a,value:eE},{type:b,tag:p,props:{title:C,uri:eF},children:[]},{type:a,value:eG}]},{type:a,value:g},{type:b,tag:d,props:{},children:[{type:a,value:eH},{type:b,tag:e,props:{className:[E]},children:[{type:a,value:eI}]},{type:a,value:$}]},{type:a,value:g},{type:a,value:g},{type:b,tag:i,props:{heading:"Отличия",id:"compare"},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Первый пример отличается от второго и третьего только тем, что не требует\n    указания "},{type:b,tag:e,props:{className:[f,aj]},children:[{type:a,value:dg}]},{type:a,value:" в модели.\n  "}]},{type:a,value:c},{type:b,tag:q,props:{name:"cases\u002Fmodel-creation\u002Fnew"},children:[]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Второй и третий примеры ничем не отличаются, кроме того, что вариант с "},{type:b,tag:e,props:{className:[f,l]},children:[{type:a,value:aK}]},{type:a,value:"\n    более компактен.\n  "}]},{type:a,value:c},{type:b,tag:q,props:{name:"cases\u002Fmodel-creation\u002Ffill"},children:[]},{type:a,value:c},{type:b,tag:q,props:{name:"cases\u002Fmodel-creation\u002Fcreate"},children:[]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    В четвёртом примере используется метод\n    "},{type:b,tag:p,props:{title:an,type:O,uri:"Illuminate\u002FDatabase\u002FQuery\u002FBuilder.html#method_insert"},children:[]},{type:a,value:",\n    который возвращает "},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:"boolean"}]},{type:a,value:", а не саму модель.\n    Также метод не заполнит автоматически поля "},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:"created_at"}]},{type:a,value:ae},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:"updated_at"}]},{type:a,value:",\n    касты и события модели работать не будут, т.к. метод является частью QueryBuilder, а не модели.\n  "}]},{type:a,value:c},{type:b,tag:q,props:{name:"cases\u002Fmodel-creation\u002Finsert"},children:[]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Метод\n    "},{type:b,tag:p,props:{title:"insertGetId()",type:O,uri:"Illuminate\u002FDatabase\u002FQuery\u002FBuilder.html#method_insertGetId"},children:[]},{type:a,value:"\n    работает аналогично и возвращает ID вставленной записи, при этом за один раз сохранить можно только одну запись, в отличии от простого\n    "},{type:b,tag:e,props:{className:[f,l]},children:[{type:a,value:an}]},{type:a,value:", который позволяет сохранять несколько записей.\n  "}]},{type:a,value:g}]},{type:a,value:g},{type:b,tag:i,props:{heading:cS,id:cT},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Можно выбрать любой способ.\n    Если не нужен ручной контроль и стремиться за лаконичностью, то "},{type:b,tag:e,props:{className:[f,l]},children:[{type:a,value:aK}]},{type:a,value:",\n    если необходимо сохранить много записей за раз, то "},{type:b,tag:e,props:{className:[f,l]},children:[{type:a,value:an}]},{type:a,value:c}]},{type:a,value:g}]}]},excerpt:{type:r,children:[{type:b,tag:d,props:{},children:[{type:a,value:eE},{type:b,tag:p,props:{title:C,uri:eF},children:[]},{type:a,value:eG}]},{type:a,value:g},{type:b,tag:d,props:{},children:[{type:a,value:eH},{type:b,tag:e,props:{className:[E]},children:[{type:a,value:eI}]},{type:a,value:$}]}]},dir:x,path:"\u002Fcases\u002Fmodel-creation",extension:y,createdAt:ag,updatedAt:Q},{slug:eJ,description:"Выстави права для записи",heading:"Failed to open stream: Permission denied",altHeadings:"Нет прав на запись, Отказано в доступе",tags:_,toc:[],body:{type:r,children:[{type:b,tag:d,props:{},children:[{type:a,value:eK},{type:b,tag:e,props:{className:[E]},children:[{type:a,value:eL}]},{type:a,value:$}]},{type:a,value:g},{type:b,tag:i,props:{heading:eM,id:eN},children:[{type:a,value:c},{type:b,tag:d,props:{className:[u,v]},children:[{type:a,value:eO}]},{type:a,value:c},{type:b,tag:d,props:{className:[u,v]},children:[{type:a,value:eP}]},{type:a,value:c},{type:b,tag:d,props:{className:[u,v]},children:[{type:a,value:eQ}]},{type:a,value:g}]},{type:a,value:g},{type:a,value:g},{type:b,tag:i,props:{heading:aZ,id:L},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Laravel использует директории "},{type:b,tag:e,props:{className:[f,j]},children:[{type:a,value:"bootstrap\u002Fcache\u002F"}]},{type:a,value:ae},{type:b,tag:e,props:{className:[f,j]},children:[{type:a,value:eR}]},{type:a,value:"\n    для хранения системных файлов, кэша и логов, поэтому у пользователя под которым запускается php должен быть доступ на запись в эти директории.\n  "}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Для начала необходимо ознакомится с основами прав доступа в UNIX системах, с командами\n    "},{type:b,tag:e,props:{className:[f,l]},children:[{type:a,value:"chmod"}]},{type:a,value:bw},{type:b,tag:e,props:{className:[f,l]},children:[{type:a,value:"chown"}]},{type:a,value:cw},{type:b,tag:n,props:{title:"статья #1",link:"https:\u002F\u002Fhabr.com\u002Fru\u002Fpost\u002F469667\u002F"},children:[]},{type:a,value:ad},{type:b,tag:n,props:{title:"статья #2",link:"https:\u002F\u002Fyounglinux.info\u002Fbash\u002Frwx"},children:[]},{type:a,value:" или\n    "},{type:b,tag:n,props:{title:eS,link:"https:\u002F\u002Fbit.ly\u002F3v8SW9B"},children:[]},{type:a,value:"\n    самостоятельно. Для более сложных задач можно углубиться до\n    "},{type:b,tag:n,props:{title:"ACL (Access Control List)",link:"https:\u002F\u002Fwiki.archlinux.org\u002Ftitle\u002FAccess_Control_Lists_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)"},children:[]},{type:a,value:z}]},{type:a,value:g}]},{type:a,value:g},{type:b,tag:i,props:{heading:"Быстрое решение",id:V},children:[{type:a,value:c},{type:b,tag:q,props:{name:"cases\u002Fpermission-denied\u002Fchmod"},children:[]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    где www-data - группа под которой работает web-сервер (nginx, apache).\n  "}]},{type:a,value:g}]}]},excerpt:{type:r,children:[{type:b,tag:d,props:{},children:[{type:a,value:eK},{type:b,tag:e,props:{className:[E]},children:[{type:a,value:eL}]},{type:a,value:$}]},{type:a,value:g},{type:b,tag:i,props:{heading:eM,id:eN},children:[{type:a,value:c},{type:b,tag:d,props:{className:[u,v]},children:[{type:a,value:eO}]},{type:a,value:c},{type:b,tag:d,props:{className:[u,v]},children:[{type:a,value:eP}]},{type:a,value:c},{type:b,tag:d,props:{className:[u,v]},children:[{type:a,value:eQ}]},{type:a,value:g}]}]},dir:x,path:"\u002Fcases\u002Fpermission-denied",extension:y,createdAt:ag,updatedAt:Q},{slug:eT,description:"Репозитории с Eloquent не нужны",heading:"Репозиторий и Eloquent",altHeadings:dK,tags:ak,toc:[],body:{type:r,children:[{type:b,tag:d,props:{},children:[{type:a,value:eU}]},{type:a,value:g},{type:a,value:g},{type:b,tag:i,props:{heading:"Быстрый ответ",id:"quick-answer"},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Начнём с того, что если ты задаёшься вопросом\n    "},{type:b,tag:e,props:{className:[E]},children:[{type:a,value:"«А нужны ли мне репозитории в Laravel?»"}]},{type:a,value:",\n    то ответ будет простым: "},{type:b,tag:e,props:{className:[E]},children:[{type:a,value:"«Нет, не нужны»"}]},{type:a,value:z}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    По очень простой причине: если ты "},{type:b,tag:k,props:{},children:[{type:a,value:aN}]},{type:a,value:" знаешь зачем ты что-то делаешь, то этого делать "},{type:b,tag:k,props:{},children:[{type:a,value:aN}]},{type:a,value:" надо.\n    А если знаешь зачем, то ты либо делаешь, либо нет и на этом собственно всё.\n  "}]},{type:a,value:g}]},{type:a,value:g},{type:b,tag:i,props:{heading:"Чтиво",id:"links"},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Предлагаю ознакомится с более подробными\n    материалами "},{type:b,tag:e,props:{className:[aQ]},children:[{type:a,value:"(комментарии тоже рекомендуются к прочтению)"}]},{type:a,value:bz}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:h},{type:b,tag:n,props:{title:"Как не нужно использовать паттерн Repository",link:"https:\u002F\u002Fhabr.com\u002Fru\u002Fpost\u002F316836\u002F"},children:[]},{type:a,value:h},{type:b,tag:w,props:{},children:[]},{type:a,value:h},{type:b,tag:n,props:{title:"Пожалуйста, прекращайте говорить про шаблон Репозиторий с Eloquent",link:"https:\u002F\u002Fhabr.com\u002Fru\u002Fpost\u002F444688\u002F"},children:[]},{type:a,value:h},{type:b,tag:w,props:{},children:[]},{type:a,value:h},{type:b,tag:n,props:{title:"Полезные репозитории с Eloquent?",link:"https:\u002F\u002Fhabr.com\u002Fru\u002Fpost\u002F445452\u002F"},children:[]},{type:a,value:h},{type:b,tag:w,props:{},children:[]},{type:a,value:h},{type:b,tag:n,props:{title:"Почему здравый смысл важнее паттернов, а Active Record не так уж и плох",link:"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompanies\u002Fdomclick\u002Farticles\u002F515560\u002F"},children:[]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    С материалами я согласен, поэтому здесь в точности повторяться смысла нет.\n  "}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    И немного о самом шаблоне проектирования:\n  "}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:h},{type:b,tag:n,props:{title:"Хранилище (Repository)",link:"https:\u002F\u002Fdesignpatternsphp.readthedocs.io\u002Fru\u002Flatest\u002FMore\u002FRepository\u002FREADME.html"},children:[]},{type:a,value:h},{type:b,tag:w,props:{},children:[]},{type:a,value:h},{type:b,tag:n,props:{title:"Паттерн репозиторий",link:"https:\u002F\u002Fgist.github.com\u002Fmaestrow\u002F594fd9aee859c809b043"},children:[]},{type:a,value:h},{type:b,tag:w,props:{},children:[]},{type:a,value:h},{type:b,tag:n,props:{title:"Назначение репозиториев (en)",link:"https:\u002F\u002Fmuhammedsari.me\u002Frepositories-and-their-true-purpose"},children:[]},{type:a,value:c}]},{type:a,value:g}]},{type:a,value:g},{type:b,tag:i,props:{heading:"Суть холивара",id:"topic"},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Вся суть сводится к тому, что в Laravel репозитории - это бесполезный слой абстракции,\n    поскольку Eloquent ORM - реализация ActiveRecord, уже является репозиторием.\n    И те репозитории, что пишутся с Eloquent, в итоге не выполняют роль присущую паттерну.\n  "}]},{type:a,value:g}]},{type:a,value:g},{type:b,tag:i,props:{heading:"Зачем?",id:L},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"Чаще всего репозитории в Laravel используются разработчиками:"}]},{type:a,value:c},{type:b,tag:M,props:{className:[N,I,W]},children:[{type:a,value:h},{type:b,tag:s,props:{},children:[{type:a,value:"\n      пришли с других фреймворков или языков, где привыкли иначе разделять бизнес-логику и работу с БД\n    "}]},{type:a,value:h},{type:b,tag:s,props:{},children:[{type:a,value:"\n      пытаются устранить повторяющиеся запросы и сделать \"сервис\" отвечающий за выборку конкретных данных\n    "}]},{type:a,value:h},{type:b,tag:s,props:{},children:[{type:a,value:"\n      решили, что использовать репозитории надо обязательно, по принципу "},{type:b,tag:n,props:{title:"«Здесь так принято»",link:"https:\u002F\u002Fwikireality.ru\u002Fwiki\u002F%D0%97%D0%B4%D0%B5%D1%81%D1%8C_%D1%82%D0%B0%D0%BA_%D0%BF%D1%80%D0%B8%D0%BD%D1%8F%D1%82%D0%BE"},children:[]},{type:a,value:h}]},{type:a,value:h},{type:b,tag:s,props:{},children:[{type:a,value:"\n      для тестирования и моков\n    "}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Всё это в той или иной мере может иметь смысл, но только потому, что смысл мы вкладываем сами.\n    В реальности я вижу в проектах классы, которые в имени содержат постфикс Repository, но являются ли они репозиториями?\n    Нет. Они являются обычными хелперами, в которые завернули QueryBuilder и которые "},{type:b,tag:k,props:{},children:[{type:a,value:"возвращают модели"}]},{type:a,value:".\n    И модели дальше "},{type:b,tag:k,props:{},children:[{type:a,value:"могут и будут"}]},{type:a,value:" использоваться в обход репозиториев.\n    А методы эти либо бесполезные - "},{type:b,tag:e,props:{className:[f,l]},children:[{type:a,value:"getById()"}]},{type:a,value:",\n    либо узкоспециализированные "},{type:b,tag:e,props:{className:[f,l]},children:[{type:a,value:"getUserWithOrdersForCabinet()"}]},{type:a,value:",\n    которые используются один раз в одном месте приложения\n    и являются обычными "},{type:b,tag:p,props:{title:"скоупами",uri:"eloquent#query-scopes"},children:[]},{type:a,value:c}]},{type:a,value:g}]}]},excerpt:{type:r,children:[{type:b,tag:d,props:{},children:[{type:a,value:eU}]}]},dir:x,path:"\u002Fcases\u002Frepository",extension:y,createdAt:P,updatedAt:Q},{slug:aR,description:"Передай заголовки Referer или Origin с доменом для SPA.",heading:"Postman и Sanctum",altHeadings:D,tags:"sanctum,api,manual",toc:[],body:{type:r,children:[{type:b,tag:i,props:{heading:A,id:B},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:eV},{type:b,tag:p,props:{title:eW,uri:eX},children:[]},{type:a,value:eY},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:eZ}]},{type:a,value:e_}]},{type:a,value:g}]},{type:a,value:g},{type:a,value:g},{type:b,tag:i,props:{heading:aa,id:L},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Для корректной работы \"SPA способа\" необходимы некоторые условия, а именно:\n  "}]},{type:a,value:c},{type:b,tag:M,props:{className:[N,I,al]},children:[{type:a,value:h},{type:b,tag:s,props:{},children:[{type:a,value:"\n      Заголовок "},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:bQ}]},{type:a,value:" (см. "},{type:b,tag:F,props:{to:"\u002Fapi-headers\u002F"},children:[{type:a,value:"«Заголовки для API»"}]},{type:a,value:")\n    "}]},{type:a,value:h},{type:b,tag:s,props:{},children:[{type:a,value:"Заголовки "},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:e$}]},{type:a,value:aH},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:aS}]}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    С первым пунктом обычно проблем не возникает, а вот про Referer\u002FOrigin знают не все, хотя это есть в документации.\n    Дело в том, что механизм Sanctum подключается вариативно с помощью middleware\n    "},{type:b,tag:n,props:{title:"\\Laravel\\Sanctum\\Http\\Middleware\\EnsureFrontendRequestsAreStateful",link:"https:\u002F\u002Fgithub.com\u002Flaravel\u002Fsanctum\u002Fblob\u002F4.x\u002Fsrc\u002FHttp\u002FMiddleware\u002FEnsureFrontendRequestsAreStateful.php"},children:[]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    И будут ли применены к запросу другие middleware зависит от метода "},{type:b,tag:e,props:{className:[f,l]},children:[{type:a,value:"fromFrontend"}]},{type:a,value:",\n    который получает домен из заголовков Referer или Origin \n    и ищет их среди разрешенных доменов в конфиге "},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:"sanctum.stateful"}]},{type:a,value:"\n    или "},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:bA}]},{type:a,value:" в env.\n  "}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Таким образом, если нет заголовков или домен не соответствует разрешенным, то middleware не подключается, а значит\n    не стартует сессия и не работает аутентификация.\n  "}]},{type:a,value:g}]},{type:a,value:g},{type:b,tag:i,props:{heading:Z,id:V},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Необходимо отправлять в Postman заголовок "},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:e$}]},{type:a,value:aH},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:aS}]},{type:a,value:"\n    с разрешенным доменом (на котором находится SPA), указанным в "},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:bA}]},{type:a,value:z}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Например, "},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:"Origin: https:\u002F\u002Fexample.com"}]},{type:a,value:c}]},{type:a,value:g}]},{type:a,value:g},{type:b,tag:i,props:{heading:"Настройка Postman",id:"config"},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Выполнять запросы вручную каждый раз утомительно, \n    необходим предварительный запрос на "},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:"\u002Fsanctum\u002Fcsrf-cookie"}]},{type:a,value:" и передавать куки в следующем запросе.\n  "}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Вместо этого можно \"автоматизировать\" запросы в Postman.\n    Для этого необходимо добавить скрипт на вкладке Pre-request Script.\n  "}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:h},{type:b,tag:k,props:{},children:[{type:a,value:J}]},{type:a,value:", что используется переменная окружения "},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:"API_URL"}]},{type:a,value:", её необходимо \n    "},{type:b,tag:n,props:{title:"создать в Postman",link:"https:\u002F\u002Flearning.postman.com\u002Fdocs\u002Fsending-requests\u002Fvariables\u002Fenvironment-variables\u002F"},children:[]},{type:a,value:", \n    либо заменить на свой URL прямо в скрипте.\n  "}]},{type:a,value:c},{type:b,tag:q,props:{name:"cases\u002Fsanctum-postman\u002Fpre-script"},children:[]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Не забудь передать заголовки "},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:bR}]},{type:a,value:ae},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:aS}]},{type:a,value:" с\n    адресом, где находится frontend приложение. Так же убедись, что домен добавлен в "},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:bA}]},{type:a,value:z}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:h},{type:b,tag:k,props:{},children:[{type:a,value:J}]},{type:a,value:", что SPA и API приложения могут находиться на разных поддоменах, \n    поэтому в "},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:aS}]},{type:a,value:" необходимо указывать именно адрес SPA, а не API.\n  "}]},{type:a,value:g}]}]},excerpt:{type:r,children:[{type:b,tag:i,props:{heading:A,id:B},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:eV},{type:b,tag:p,props:{title:eW,uri:eX},children:[]},{type:a,value:eY},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:eZ}]},{type:a,value:e_}]},{type:a,value:g}]}]},dir:x,path:"\u002Fcases\u002Fsanctum-postman",extension:y,createdAt:Q,updatedAt:Q},{slug:fa,description:"Не работает ЧПУ",heading:"Страницы возвращают 404, кроме главной",altHeadings:"не работает ЧПУ, не работают роуты",tags:_,toc:[],body:{type:r,children:[{type:b,tag:i,props:{heading:aa,id:L},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:fb},{type:b,tag:p,props:{title:fc,uri:fd},children:[]},{type:a,value:fe},{type:b,tag:e,props:{className:[f,j]},children:[{type:a,value:ff}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:fg}]},{type:a,value:g}]},{type:a,value:g},{type:a,value:g},{type:b,tag:i,props:{heading:"Кэш",id:cB},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Посмотреть доступные маршруты можно командой: "},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:by}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Очистить кэш: "},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:"php artisan route:clear"}]},{type:a,value:c}]},{type:a,value:g}]},{type:a,value:g},{type:b,tag:i,props:{heading:"Apache"},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Правила для ЧПУ описываются в\n    "},{type:b,tag:n,props:{title:ab,link:"https:\u002F\u002Fgithub.com\u002Flaravel\u002Flaravel\u002Fblob\u002F6e1103180b439bf6970b4a50e9e42cc5de9f9bf3\u002Fpublic\u002F.htaccess#L17"},children:[]},{type:a,value:",\n    причины по которым они могут не работать:\n  "}]},{type:a,value:c},{type:b,tag:i,props:{heading:fh,id:"apache-rewrite"},children:[{type:a,value:h},{type:b,tag:d,props:{},children:[{type:a,value:"\n      Не установлен или отключён\n      "},{type:b,tag:n,props:{title:fh,link:"https:\u002F\u002Fhttpd.apache.org\u002Fdocs\u002Fcurrent\u002Fmod\u002Fmod_rewrite.html"},children:[]},{type:a,value:h}]},{type:a,value:h},{type:b,tag:d,props:{},children:[{type:a,value:"\n      Посмотреть загруженные модули можно командой:\n    "}]},{type:a,value:h},{type:b,tag:q,props:{name:"cases\u002Fpretty-url-404\u002Fapache\u002Fmod-rewrite-check"},children:[]},{type:a,value:h},{type:b,tag:d,props:{},children:[{type:a,value:"\n      Активировать модуль:\n    "}]},{type:a,value:h},{type:b,tag:q,props:{name:"cases\u002Fpretty-url-404\u002Fapache\u002Fmod-rewrite-enable"},children:[]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:i,props:{heading:fi,id:"allow-override"},children:[{type:a,value:h},{type:b,tag:d,props:{},children:[{type:a,value:"\n      Директива\n      "},{type:b,tag:n,props:{title:fi,link:"https:\u002F\u002Fhttpd.apache.org\u002Fdocs\u002Fcurrent\u002Fmod\u002Fcore.html#allowoverride"},children:[]},{type:a,value:"\n      имеет значение "},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:"None"}]},{type:a,value:" для директории проекта,\n      что отключает чтение "},{type:b,tag:e,props:{className:[f,j]},children:[{type:a,value:ab}]},{type:a,value:h}]},{type:a,value:h},{type:b,tag:d,props:{},children:[{type:a,value:"\n      Значение должно быть "},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:"All"}]},{type:a,value:h}]},{type:a,value:h},{type:b,tag:q,props:{name:"cases\u002Fpretty-url-404\u002Fapache\u002Fallow-override"},children:[]},{type:a,value:h},{type:b,tag:d,props:{},children:[{type:a,value:m},{type:b,tag:k,props:{},children:[{type:a,value:J}]},{type:a,value:" на путь, нужен тот, где находится твой проект.\n      Тоже самое можно указать в конфигурации самого хоста, а не основного конфига.\n    "}]},{type:a,value:h},{type:b,tag:d,props:{},children:[{type:a,value:m},{type:b,tag:k,props:{},children:[{type:a,value:"Не забудь перезапустить apache"}]},{type:a,value:" после изменений в конфигурации.\n      Быстро проверить, что "},{type:b,tag:e,props:{className:[f,j]},children:[{type:a,value:ab}]},{type:a,value:" используется можно добавив в него любую синтаксическую ошибку,\n      если получим 500 ошибку, то файл используется, иначе игнорируется.\n    "}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:i,props:{heading:ab,id:"htaccess"},children:[{type:a,value:h},{type:b,tag:d,props:{},children:[{type:a,value:"\n      Правки в "},{type:b,tag:e,props:{className:[f,j]},children:[{type:a,value:ab}]},{type:a,value:", которые изменили поведение по умолчанию.\n      Сравни свой файл с\n      "},{type:b,tag:n,props:{title:"оригинальным",link:"https:\u002F\u002Fgithub.com\u002Flaravel\u002Flaravel\u002Fblob\u002F6e1103180b439bf6970b4a50e9e42cc5de9f9bf3\u002Fpublic\u002F.htaccess"},children:[]},{type:a,value:G}]},{type:a,value:h},{type:b,tag:d,props:{},children:[{type:a,value:m},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:"RewriteEngine"}]},{type:a,value:" должен иметь значение "},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:"On"}]},{type:a,value:", а запросы направляться в index.php:\n    "}]},{type:a,value:h},{type:b,tag:q,props:{name:"cases\u002Fpretty-url-404\u002Fapache\u002Fhtaccess"},children:[]},{type:a,value:c}]},{type:a,value:g}]},{type:a,value:g},{type:b,tag:i,props:{heading:"Nginx",id:"nginx"},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Для Nginx в документации есть\n    "},{type:b,tag:p,props:{title:"раздел",uri:"deployment#nginx"},children:[]},{type:a,value:"\n    с примером конфигурации. Обрати внимание на "},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:"try_files"}]},{type:a,value:" в секции "},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:"location \u002F"}]},{type:a,value:bz}]},{type:a,value:c},{type:b,tag:q,props:{name:"cases\u002Fpretty-url-404\u002Fnginx\u002Ftry-files"},children:[]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Какие-либо изменения в данной строке могут повлиять на правильную работу, поэтому попробуй использовать в точности как в документации.\n  "}]},{type:a,value:g}]}]},excerpt:{type:r,children:[{type:b,tag:i,props:{heading:aa,id:L},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:fb},{type:b,tag:p,props:{title:fc,uri:fd},children:[]},{type:a,value:fe},{type:b,tag:e,props:{className:[f,j]},children:[{type:a,value:ff}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:fg}]},{type:a,value:g}]}]},dir:x,path:"\u002Fcases\u002Fpretty-url-404",extension:y,createdAt:ag,updatedAt:Q},{slug:fj,description:"Сгенерируй ключ, добавь в аккаунт, профит. Подробнее по ссылке...",heading:"SSH ключ для репозитория",altHeadings:D,tags:U,toc:[],body:{type:r,children:[{type:b,tag:d,props:{},children:[{type:a,value:fk}]},{type:a,value:g},{type:a,value:g},{type:b,tag:d,props:{},children:[{type:a,value:"\n  Разобраться с SSH крайне просто, это займёт минут 10, благодаря уже готовой инструкции от GitHub:\n  "},{type:b,tag:n,props:{title:"Генерация SSH ключа",link:"https:\u002F\u002Fdocs.github.com\u002Fen\u002Fauthentication\u002Fconnecting-to-github-with-ssh\u002Fgenerating-a-new-ssh-key-and-adding-it-to-the-ssh-agent"},children:[]},{type:a,value:c},{type:b,tag:w,props:{},children:[]},{type:a,value:c},{type:b,tag:n,props:{title:"Добавление ключа на аккаунт",link:"https:\u002F\u002Fdocs.github.com\u002Fen\u002Fauthentication\u002Fconnecting-to-github-with-ssh\u002Fadding-a-new-ssh-key-to-your-github-account"},children:[]},{type:a,value:g}]},{type:a,value:g},{type:b,tag:d,props:{},children:[{type:a,value:"\n  Инструкция подходит не только для GitHub, принцип один и тот же. А если совсем упростить то вот:\n"}]},{type:a,value:g},{type:b,tag:d,props:{className:[X]},children:[{type:a,value:"\n  1. Генерируем ключ:\n"}]},{type:a,value:g},{type:b,tag:q,props:{name:"cases\u002Fssh-key\u002Fgenerate"},children:[]},{type:a,value:g},{type:b,tag:d,props:{className:[aQ]},children:[{type:a,value:"\n  Указываем свой email, имя ключа оставляем по умолчанию (если нет такого), вводим любую кодовую фразу (запоминаем)\n"}]},{type:a,value:g},{type:b,tag:d,props:{className:[X]},children:[{type:a,value:"\n  2. Запускаем агент и добавляем в него ключ:\n"}]},{type:a,value:g},{type:b,tag:q,props:{name:"cases\u002Fssh-key\u002Fadd"},children:[]},{type:a,value:g},{type:b,tag:d,props:{},children:[{type:a,value:"\n  3. Копируем содержимое "},{type:b,tag:k,props:{},children:[{type:a,value:"публичного"}]},{type:a,value:" ключа любым удобным способом:\n"}]},{type:a,value:g},{type:b,tag:q,props:{name:"cases\u002Fssh-key\u002Fcopy"},children:[]},{type:a,value:g},{type:b,tag:d,props:{},children:[{type:a,value:"\n  4. Вставляем "},{type:b,tag:k,props:{},children:[{type:a,value:"публичный"}]},{type:a,value:" ключ в настройках своего аккаунта "},{type:b,tag:k,props:{},children:[{type:a,value:"(не репозитория)"}]},{type:a,value:" на GitHub, GitLab, BitBacket и т.д.\n  Путь примерно такой: "},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:"Settings \u003E SSH keys \u003E Add SSH key"}]},{type:a,value:g}]},{type:a,value:g},{type:b,tag:d,props:{className:[X]},children:[{type:a,value:"\n  5. Клонируем репозиторий по ssh или меняем у текущего, используя свой адрес:\n"}]},{type:a,value:g},{type:b,tag:q,props:{name:"cases\u002Fssh-key\u002Fgit-remote-set"},children:[]},{type:a,value:g},{type:b,tag:d,props:{},children:[{type:a,value:"\n  Для более подробной информации по своей операционной системе смотри инструкции по ссылкам выше.\n"}]}]},excerpt:{type:r,children:[{type:b,tag:d,props:{},children:[{type:a,value:fk}]}]},dir:x,path:"\u002Fcases\u002Fssh-key",extension:y,createdAt:P,updatedAt:Q},{slug:fl,description:"Web-сервер должен смотреть в public",heading:"Laravel и shared-hosting",altHeadings:D,tags:U,toc:[],body:{type:r,children:[{type:b,tag:i,props:{heading:A,id:B},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:fm},{type:b,tag:e,props:{className:[f,j]},children:[{type:a,value:Y}]},{type:a,value:fn}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:fo},{type:b,tag:F,props:{to:fp},children:[{type:a,value:fq}]},{type:a,value:fr},{type:b,tag:e,props:{className:[f,j]},children:[{type:a,value:bB}]},{type:a,value:fs}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:ft},{type:b,tag:e,props:{className:[f,j]},children:[{type:a,value:aG}]},{type:a,value:fu},{type:b,tag:w,props:{},children:[]},{type:a,value:fv},{type:b,tag:e,props:{className:[f,j]},children:[{type:a,value:ab}]},{type:a,value:fw},{type:b,tag:w,props:{},children:[]},{type:a,value:fx}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:h},{type:b,tag:k,props:{},children:[{type:a,value:fy}]},{type:a,value:fz},{type:b,tag:e,props:{className:[f,j]},children:[{type:a,value:R}]},{type:a,value:fA}]},{type:a,value:g}]},{type:a,value:g},{type:a,value:g},{type:b,tag:i,props:{heading:"Проблема хостингов",id:"hosting-trouble"},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Шаред-хостинги не подходят под фреймворки, которые более требовательны к окружению, чем CMS.\n    Даже с наличием ssh-доступа и более-менее функционального cli, проблемы не ограничиваются корневой директорией:\n  "}]},{type:a,value:c},{type:b,tag:M,props:{className:[N,I,al]},children:[{type:a,value:h},{type:b,tag:s,props:{},children:[{type:a,value:"\n      Ограниченные ресурсы железа.\n    "}]},{type:a,value:h},{type:b,tag:s,props:{},children:[{type:a,value:"\n      Могут быть недоступны какие-либо расширения php.\n    "}]},{type:a,value:h},{type:b,tag:s,props:{},children:[{type:a,value:"\n      Может не быть требуемой версии php для web или для cli.\n    "}]},{type:a,value:h},{type:b,tag:s,props:{},children:[{type:a,value:"\n      Ограниченные возможности настройки php.ini или баз данных.\n    "}]},{type:a,value:h},{type:b,tag:s,props:{},children:[{type:a,value:"\n      Сложности с запуском демона для очередей.\n    "}]},{type:a,value:h},{type:b,tag:s,props:{},children:[{type:a,value:"\n      Отсутствует node или установлена устаревшая версия.\n    "}]},{type:a,value:h},{type:b,tag:s,props:{},children:[{type:a,value:"\n      Нет возможности использовать Websockets, Supervisor, Octane, Docker, Redis, Varnish, Meilisearch...\n    "}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Данный список можно продолжать очень долго, всё зависит от технологий использующихся в проекте.\n    Если ко всему этому и нет нормальной консоли с php cli и git, то это вообще безумие...\n  "}]},{type:a,value:g}]},{type:a,value:g},{type:b,tag:d,props:{className:[ax,aT,ay,aQ]},children:[{type:a,value:"\n  В примерах ниже будет использоваться "},{type:b,tag:e,props:{className:[f,j]},children:[{type:a,value:Y}]},{type:a,value:" как директория web-сервера.\n  Имя директории варьируется от провайдера и в твоём случае может быть иной, например,\n  "},{type:b,tag:e,props:{className:[f,j]},children:[{type:a,value:"www"}]},{type:a,value:ah},{type:b,tag:e,props:{className:[f,j]},children:[{type:a,value:"docs"}]},{type:a,value:ah},{type:b,tag:e,props:{className:[f,j]},children:[{type:a,value:"html"}]},{type:a,value:bC},{type:b,tag:e,props:{className:[f,j]},children:[{type:a,value:"htdocs"}]},{type:a,value:ah},{type:b,tag:e,props:{className:[f,j]},children:[{type:a,value:"domains"}]},{type:a,value:" и т.д.\n"}]},{type:a,value:g},{type:b,tag:i,props:{heading:"Решение 1: Взять VPS","menu-heading":"VPS",id:"solution-vps"},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:h},{type:b,tag:k,props:{},children:[{type:a,value:"Отказаться от шаред-хостинга"}]},{type:a,value:" и взять по той же цене обычный VPS, в котором можно свободно настроить среду.\n    "},{type:b,tag:k,props:{},children:[{type:a,value:"Это самый адекватный и правильный вариант"}]},{type:a,value:".\n    Для настройки сервера тебе понадобятся базовые знания в linux, которые должны быть у каждого backend разработчика. \n    Если у тебя VPS или решил на него перейти, то смотри второй пункт\n    "},{type:b,tag:F,props:{to:"\u002Fshared-hosting#solution-document-root"},children:[{type:a,value:"«Как настроить DocumentRoot»"}]},{type:a,value:z}]},{type:a,value:g}]},{type:a,value:g},{type:b,tag:i,props:{heading:"Решение 2: Настроить DocumentRoot","menu-heading":"DocumentRoot",id:"solution-document-root"},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Настроить web-сервер и "},{type:b,tag:k,props:{},children:[{type:a,value:"изменить document_root"}]},{type:a,value:" так, чтобы он смотрел в "},{type:b,tag:e,props:{className:[f,j]},children:[{type:a,value:R}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:q,props:{name:"cases\u002Fshared-hosting\u002Fconfig"},children:[]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Некоторые современные хостинги позволяют настраивать корневую директорию,\n    уточни у тех. поддержки и если такой возможности нет,\n    то читай дальше...\n  "}]},{type:a,value:g}]},{type:a,value:g},{type:b,tag:i,props:{heading:"Решение 3: Сделать SymLink","menu-heading":"SymLink",id:"solution-symlink"},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Создать\n    "},{type:b,tag:n,props:{title:"символическую ссылку",link:"https:\u002F\u002Fru.wikipedia.org\u002Fwiki\u002F%D0%A1%D0%B8%D0%BC%D0%B2%D0%BE%D0%BB%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B0%D1%8F_%D1%81%D1%81%D1%8B%D0%BB%D0%BA%D0%B0"},children:[]},{type:a,value:"\n    на "},{type:b,tag:e,props:{className:[f,j]},children:[{type:a,value:R}]},{type:a,value:h},{type:b,tag:w,props:{},children:[]},{type:a,value:"\n    Сделать это можно через консоль или в файловом менеджере (зависит от провайдера)\n  "}]},{type:a,value:c},{type:b,tag:ds,props:{className:[br,I,al,"pt-1"]},children:[{type:a,value:h},{type:b,tag:s,props:{className:[al]},children:[{type:a,value:"\n      Приложение загружается в любую доступную директорию кроме "},{type:b,tag:e,props:{className:[f,j]},children:[{type:a,value:Y}]},{type:a,value:" \n      или на один уровень выше, так чтобы\n      "},{type:b,tag:e,props:{className:[f,j]},children:[{type:a,value:Y}]},{type:a,value:" хостинга и "},{type:b,tag:e,props:{className:[f,j]},children:[{type:a,value:R}]},{type:a,value:"\n      фреймворка были в одной директории. Расположение проекта может быть любым, \n      главное указать правильный путь к директории "},{type:b,tag:e,props:{className:[f,j]},children:[{type:a,value:R}]},{type:a,value:" в символической ссылке.\n    "}]},{type:a,value:h},{type:b,tag:s,props:{className:[al]},children:[{type:a,value:"\n      Удаляется директория хостинга "},{type:b,tag:e,props:{className:[f,j]},children:[{type:a,value:Y}]},{type:a,value:h}]},{type:a,value:h},{type:b,tag:s,props:{},children:[{type:a,value:"\n      Создаётся симлинк "},{type:b,tag:e,props:{className:[f,j]},children:[{type:a,value:Y}]},{type:a,value:fB},{type:b,tag:e,props:{className:[f,j]},children:[{type:a,value:R}]},{type:a,value:"\n      любым доступным способом:\n      "},{type:b,tag:q,props:{name:"cases\u002Fshared-hosting\u002Flink"},children:[]},{type:a,value:m},{type:b,tag:d,props:{},children:[{type:a,value:o},{type:b,tag:k,props:{},children:[{type:a,value:J}]},{type:a,value:", что пути указаны абсолютно.\n      "}]},{type:a,value:h}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    В результате мы \"восстанавливаем\" "},{type:b,tag:e,props:{className:[f,j]},children:[{type:a,value:Y}]},{type:a,value:", но это уже не директория,\n    а ссылка на "},{type:b,tag:e,props:{className:[f,j]},children:[{type:a,value:R}]},{type:a,value:h},{type:b,tag:w,props:{},children:[]},{type:a,value:"Поэтому настройки web-сервера остаются прежними,\n    а запросы приходят в "},{type:b,tag:e,props:{className:[f,j]},children:[{type:a,value:bB}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Это простой вариант, но не все хостеры дают возможность создавать символические ссылки.\n  "}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:h},{type:b,tag:k,props:{},children:[{type:a,value:"Также данный вариант не рекомендуется при использовании OPCache"}]},{type:a,value:", \n    чтобы обезопасить развертывание приложений из-за realpath-кэша, подробнее читай в статье\n    "},{type:b,tag:n,props:{title:"\"Обзор расширения OPCache\"",link:"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompanies\u002Fvk\u002Farticles\u002F310054\u002F"},children:[]},{type:a,value:z}]},{type:a,value:g}]},{type:a,value:g},{type:b,tag:i,props:{heading:"Решение 4: Переименовать public","menu-heading":"Переименование",id:"solution-rename"},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Переименовать "},{type:b,tag:e,props:{className:[f,j]},children:[{type:a,value:R}]},{type:a,value:bD},{type:b,tag:e,props:{className:[f,j]},children:[{type:a,value:Y}]},{type:a,value:h},{type:b,tag:w,props:{},children:[]},{type:a,value:"\n    Для этого переименовываем саму директорию и переопределяем путь в "},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:fC}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:q,props:{name:"cases\u002Fshared-hosting\u002Fapp-service-provider"},children:[]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:h},{type:b,tag:k,props:{},children:[{type:a,value:J}]},{type:a,value:", что для локальной разработки директорию придётся переименовать всем кто работает с проектом, \n    а значит и перенастроить web-сервер.\n  "}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Если используется Laravel 8.x или более старая версия, то для работы "},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:"php artisan serve"}]},{type:a,value:"\n    необходимо изменить путь в\n    "},{type:b,tag:n,props:{title:"server.php",link:"https:\u002F\u002Fgithub.com\u002Flaravel\u002Flaravel\u002Fblob\u002F8.x\u002Fserver.php"},children:[]},{type:a,value:z}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Если используется Mix, то потребуется использовать\n    "},{type:b,tag:n,props:{title:"mix.setPublicPath()",link:"https:\u002F\u002Flaravel-mix.com\u002Fdocs\u002F6.0\u002Ffaq"},children:[]},{type:a,value:h},{type:b,tag:w,props:{},children:[]},{type:a,value:"Если используется Vite, \n    то необходимо изменить "},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:"publicDirectory"}]},{type:a,value:bD},{type:b,tag:e,props:{className:[f,j]},children:[{type:a,value:"vite.config.js"}]},{type:a,value:z}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Также не забудь внести изменения в\n    "},{type:b,tag:n,props:{title:".gitignore",link:"https:\u002F\u002Fgithub.com\u002Flaravel\u002Flaravel\u002Fblob\u002F12.x\u002F.gitignore"},children:[]},{type:a,value:c}]},{type:a,value:g}]}]},excerpt:{type:r,children:[{type:b,tag:i,props:{heading:A,id:B},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:fm},{type:b,tag:e,props:{className:[f,j]},children:[{type:a,value:Y}]},{type:a,value:fn}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:fo},{type:b,tag:F,props:{to:fp},children:[{type:a,value:fq}]},{type:a,value:fr},{type:b,tag:e,props:{className:[f,j]},children:[{type:a,value:bB}]},{type:a,value:fs}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:ft},{type:b,tag:e,props:{className:[f,j]},children:[{type:a,value:aG}]},{type:a,value:fu},{type:b,tag:w,props:{},children:[]},{type:a,value:fv},{type:b,tag:e,props:{className:[f,j]},children:[{type:a,value:ab}]},{type:a,value:fw},{type:b,tag:w,props:{},children:[]},{type:a,value:fx}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:h},{type:b,tag:k,props:{},children:[{type:a,value:fy}]},{type:a,value:fz},{type:b,tag:e,props:{className:[f,j]},children:[{type:a,value:R}]},{type:a,value:fA}]},{type:a,value:g}]}]},dir:x,path:"\u002Fcases\u002Fshared-hosting",extension:y,createdAt:P,updatedAt:bE},{slug:fD,description:"Чтобы отключить преобразования используй {!! !!}",heading:"Экранирование данных в Blade",altHeadings:D,tags:U,toc:[],body:{type:r,children:[{type:b,tag:i,props:{heading:A,id:B},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:fE},{type:b,tag:e,props:{className:[f,l]},children:[{type:a,value:fF}]},{type:a,value:fG}]},{type:a,value:g}]},{type:a,value:g},{type:a,value:g},{type:b,tag:i,props:{heading:aa,id:L},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:h},{type:b,tag:e,props:{className:[f,l]},children:[{type:a,value:"{{ }}"}]},{type:a,value:" преобразует специальные символы в\n    "},{type:b,tag:n,props:{title:"HTML-сущности",link:"https:\u002F\u002Fru.wikipedia.org\u002Fwiki\u002F%D0%9C%D0%BD%D0%B5%D0%BC%D0%BE%D0%BD%D0%B8%D0%BA%D0%B8_%D0%B2_HTML"},children:[]},{type:a,value:"\n    с помощью\n    "},{type:b,tag:n,props:{title:"htmlspecialchars()",link:"https:\u002F\u002Fwww.php.net\u002Fmanual\u002Fru\u002Ffunction.htmlspecialchars.php"},children:[]},{type:a,value:",\n    с целью защиты от XSS атак.\n  "}]},{type:a,value:g}]},{type:a,value:g},{type:b,tag:i,props:{heading:Z,id:V},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:ar},{type:b,tag:p,props:{title:C,uri:"blade#displaying-unescaped-data"},children:[]},{type:a,value:" используй\n    "},{type:b,tag:e,props:{className:[f,l]},children:[{type:a,value:"{!! !!}"}]},{type:a,value:", если необходимо сохранить исходный контент.\n  "}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:h},{type:b,tag:k,props:{},children:[{type:a,value:J}]},{type:a,value:", что пользовательские данные "},{type:b,tag:k,props:{},children:[{type:a,value:"обязательно"}]},{type:a,value:" должны экранироваться или фильтроваться, например,\n    с помощью "},{type:b,tag:n,props:{title:"Purifier",link:"https:\u002F\u002Fgithub.com\u002Fmewebstudio\u002FPurifier"},children:[]},{type:a,value:c}]},{type:a,value:g}]}]},excerpt:{type:r,children:[{type:b,tag:i,props:{heading:A,id:B},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:fE},{type:b,tag:e,props:{className:[f,l]},children:[{type:a,value:fF}]},{type:a,value:fG}]},{type:a,value:g}]}]},dir:x,path:"\u002Fcases\u002Funescaped-data",extension:y,createdAt:P,updatedAt:bE},{slug:fH,description:"Storage и диски, смотри инструкцию по ссылке",heading:"Работа с файлами в Laravel",altHeadings:"работа с дисками",tags:U,toc:[],body:{type:r,children:[{type:b,tag:d,props:{},children:[{type:a,value:fI},{type:b,tag:p,props:{title:az,uri:fJ},children:[]},{type:a,value:fK},{type:b,tag:n,props:{title:fL,link:fM},children:[]},{type:a,value:g}]},{type:a,value:g},{type:b,tag:i,props:{heading:bq,id:fN},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:fO},{type:b,tag:F,props:{to:fP},children:[{type:a,value:fQ}]},{type:a,value:c}]},{type:a,value:g}]},{type:a,value:g},{type:a,value:g},{type:b,tag:i,props:{heading:"Что такое диски",id:"disks"},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    В Storage есть понятие \"диски\",\n    которые можно свободно настраивать в "},{type:b,tag:e,props:{className:[f,j]},children:[{type:a,value:bF}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Каждый диск может хранить любые файлы, быть приватным или публичным, находиться на локальном или удалённом сервере.\n    Зачем это надо? Storage позволяет работать с файлами вне зависимости от их расположения,\n    будь то локальный диск, FTP или Amazon S3. Дисков может быть сколько необходимо, например, с их помощью можно разделить\n    аватарки пользователей, фотографии, медиа-контент в статьях и комментариях, загружаемые пользователями файлы, отчёты и т.д.\n    В дальнейшем можно не беспокоиться, если необходимо будет переместить какие-либо \"группы\",\n    достаточно просто изменить настройки диска, без изменений в коде и базе данных.\n  "}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    В простых проектах чаще всего используется только два диска\n    "},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:aU}]},{type:a,value:ae},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:R}]},{type:a,value:" и этого может быть вполне достаточно.\n  "}]},{type:a,value:g}]},{type:a,value:g},{type:b,tag:i,props:{heading:"Public",id:"public-disk"},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Публичный диск. По умолчанию файлы хранятся в\n    "},{type:b,tag:e,props:{className:[f,j]},children:[{type:a,value:at}]},{type:a,value:h},{type:b,tag:w,props:{},children:[]},{type:a,value:"Файлы хранящиеся в этом диске будут доступны из web по адресу "},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:"example.com\u002Fstorage"}]},{type:a,value:h},{type:b,tag:w,props:{},children:[]},{type:a,value:"Для этого необходимо создать симлинк с помощью команды "},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:bs}]},{type:a,value:c}]},{type:a,value:g}]},{type:a,value:g},{type:b,tag:i,props:{heading:"Local",id:"local-disk"},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Приватный диск. По умолчанию файлы хранятся в\n    "},{type:b,tag:e,props:{className:[f,j]},children:[{type:a,value:"storage\u002Fapp"}]},{type:a,value:h},{type:b,tag:w,props:{},children:[]},{type:a,value:"Файлы не будут доступны из web, но можно скачать по\n    "},{type:b,tag:p,props:{title:"временной ссылке",uri:"filesystem#temporary-urls"},children:[]},{type:a,value:"\n    или вернуть их\n    "},{type:b,tag:p,props:{title:"вручную",uri:"filesystem#downloading-files"},children:[]},{type:a,value:z}]},{type:a,value:g}]},{type:a,value:g},{type:b,tag:i,props:{heading:"Default",id:"default-disk"},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    По умолчанию используется диск "},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:aU}]},{type:a,value:",\n    а значит любые манипуляции с "},{type:b,tag:e,props:{className:[f,l]},children:[{type:a,value:az}]},{type:a,value:" без указания конкретного диска будут происходит\n    с "},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:aU}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Изменить диск по умолчанию можно в "},{type:b,tag:e,props:{className:[f,j]},children:[{type:a,value:aG}]},{type:a,value:" указав "},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:"FILESYSTEM_DISK"}]},{type:a,value:"\n    или в "},{type:b,tag:e,props:{className:[f,j]},children:[{type:a,value:bF}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Каким делать диск по умолчанию решать тебе, если в проекте используется только "},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:R}]},{type:a,value:",\n    то удобнее сделать его дефолтным, чтобы не указывать каждый раз.\n    Если в проекте много дисков и их указание неизбежно,\n    то выгоднее оставить "},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:aU}]},{type:a,value:", но это может быть любой диск, зависит от ТЗ.\n  "}]},{type:a,value:g}]},{type:a,value:g},{type:b,tag:d,props:{className:[ax,aT,ay,aQ]},children:[{type:a,value:"\n  Напомню, что все настройки дисков можно свободно менять под свои задачи и создавать новые диски,\n  а не ограничиваться предложенными из коробки.\n  В "},{type:b,tag:p,props:{title:C,uri:"filesystem#configuration"},children:[]},{type:a,value:"\n  отлично описаны возможности системы с примерами.\n"}]},{type:a,value:g},{type:b,tag:i,props:{heading:"Path & URL",id:"path-url"},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Самая популярная проблема у начинающих это связь файлового пути с URL,\n    по этой причине файлы часто сохраняют напрямую в public, но лучше один раз разобраться.\n  "}]},{type:a,value:c},{type:b,tag:M,props:{className:[N,I,W]},children:[{type:a,value:h},{type:b,tag:s,props:{className:[ac]},children:[{type:a,value:"\n      Файлы хранятся в "},{type:b,tag:e,props:{className:[f,j]},children:[{type:a,value:at}]},{type:a,value:h}]},{type:a,value:h},{type:b,tag:s,props:{className:[ac]},children:[{type:a,value:"\n      Команда "},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:bs}]},{type:a,value:" создаёт ссылку "},{type:b,tag:e,props:{className:[f,j]},children:[{type:a,value:bG}]},{type:a,value:h}]},{type:a,value:h},{type:b,tag:s,props:{className:[ac]},children:[{type:a,value:"\n      Путь "},{type:b,tag:e,props:{className:[f,j]},children:[{type:a,value:bG}]},{type:a,value:" ссылается на "},{type:b,tag:e,props:{className:[f,j]},children:[{type:a,value:at}]},{type:a,value:h}]},{type:a,value:h},{type:b,tag:s,props:{className:[ac]},children:[{type:a,value:"\n      Файл "},{type:b,tag:e,props:{className:[f,j]},children:[{type:a,value:"storage\u002Fapp\u002Fpublic\u002Flogo.jpg"}]},{type:a,value:"\n      в web доступен так: "},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:"https:\u002F\u002Fexample.com\u002Fstorage\u002Flogo.jpg"}]},{type:a,value:h}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:aI,props:{className:[bg]},children:[{type:a,value:h},{type:b,tag:am,props:{className:[am]},children:[{type:a,value:m},{type:b,tag:bh,props:{},children:[{type:a,value:m},{type:b,tag:K,props:{},children:[{type:a,value:o},{type:b,tag:S,props:{},children:[{type:a,value:az}]},{type:a,value:o},{type:b,tag:S,props:{},children:[{type:a,value:"URI"}]},{type:a,value:m}]},{type:a,value:m}]},{type:a,value:m},{type:b,tag:bj,props:{},children:[{type:b,tag:K,props:{},children:[{type:a,value:o},{type:b,tag:t,props:{},children:[{type:a,value:fR},{type:b,tag:k,props:{},children:[{type:a,value:R}]},{type:a,value:"\u002Flogo.jpg"}]},{type:a,value:o},{type:b,tag:t,props:{},children:[{type:a,value:"\u002Fstorage\u002Flogo.jpg"}]},{type:a,value:m}]},{type:a,value:m},{type:b,tag:K,props:{},children:[{type:a,value:o},{type:b,tag:t,props:{},children:[{type:a,value:fR},{type:b,tag:k,props:{},children:[{type:a,value:R}]},{type:a,value:"\u002Fposts\u002Fcover.jpg"}]},{type:a,value:o},{type:b,tag:t,props:{},children:[{type:a,value:"\u002Fstorage\u002Fposts\u002Fcover.jpg"}]},{type:a,value:m}]},{type:a,value:m},{type:b,tag:K,props:{},children:[{type:a,value:o},{type:b,tag:t,props:{},children:[{type:a,value:"storage\u002Fapp\u002Fphoto.jpg"}]},{type:a,value:o},{type:b,tag:t,props:{className:["text-pink-500"]},children:[{type:a,value:"недоступен"}]},{type:a,value:m}]},{type:a,value:h}]}]},{type:a,value:c}]},{type:a,value:g}]},{type:a,value:g},{type:b,tag:i,props:{heading:"Подробный пример",id:"example"},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Рассмотрим простейшую ситуацию с загрузкой изображения к посту.\n  "}]},{type:a,value:c},{type:b,tag:d,props:{className:[X]},children:[{type:a,value:"\n    Начнём с настройки диска. Добавляем новый диск в "},{type:b,tag:e,props:{className:[f,j]},children:[{type:a,value:bF}]},{type:a,value:",\n    за основу можно скопировать настройки public.\n  "}]},{type:a,value:c},{type:b,tag:q,props:{name:"cases\u002Fstorage\u002Fconfig"},children:[]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:h},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:"posts"}]},{type:a,value:" - имя диска по которому мы будем обращаться.\n    "},{type:b,tag:w,props:{},children:[]},{type:a,value:h},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:r}]},{type:a,value:" - путь к корневой директории, в "},{type:b,tag:e,props:{className:[f,l]},children:[{type:a,value:"storage_path()"}]},{type:a,value:" указывается\n    путь относительно "},{type:b,tag:e,props:{className:[f,j]},children:[{type:a,value:eR}]},{type:a,value:h},{type:b,tag:w,props:{},children:[]},{type:a,value:h},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:"url"}]},{type:a,value:" - адрес для генерации ссылки на файл.\n  "}]},{type:a,value:c},{type:b,tag:d,props:{className:[X]},children:[{type:a,value:"\n    Создаём симлинк "},{type:b,tag:e,props:{className:[f,j]},children:[{type:a,value:bG}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:q,props:{name:"cases\u002Fstorage\u002Fartisan-link"},children:[]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Создаём директорию командой или любым удобным способом и, если необходимо,\n    "},{type:b,tag:F,props:{to:"\u002Fpermission-denied\u002F#solution"},children:[{type:a,value:"выставляем права"}]},{type:a,value:bz}]},{type:a,value:c},{type:b,tag:q,props:{name:"cases\u002Fstorage\u002Fmkdir"},children:[]},{type:a,value:c},{type:b,tag:d,props:{className:[X]},children:[{type:a,value:"\n    Пишем простую форму создания поста:\n  "}]},{type:a,value:c},{type:b,tag:q,props:{name:"cases\u002Fstorage\u002Fform"},children:[]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:h},{type:b,tag:k,props:{},children:[{type:a,value:J}]},{type:a,value:fB},{type:b,tag:p,props:{title:"@csrf",uri:"csrf#preventing-csrf-requests"},children:[]},{type:a,value:bw},{type:b,tag:n,props:{title:"multipart\u002Fform-data",link:"https:\u002F\u002Fdeveloper.mozilla.org\u002Fen-US\u002Fdocs\u002FWeb\u002FAPI\u002FHTMLFormElement\u002Fenctype"},children:[]},{type:a,value:",\n    их отсутствие это причина популярных проблем.\n  "}]},{type:a,value:c},{type:b,tag:d,props:{className:[X]},children:[{type:a,value:"\n    Обрабатываем запрос:\n  "}]},{type:a,value:c},{type:b,tag:q,props:{name:"cases\u002Fstorage\u002Fcontroller"},children:[]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Здесь есть некоторые проблемы, но для примера этого достаточно,\n    ибо нас интересует только 14 строка.\n    Разберём её подробнее.\n  "}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:ar},{type:b,tag:p,props:{title:C,uri:"requests#storing-uploaded-files"},children:[]},{type:a,value:"\n    это один из простых способов быстро сохранить файл из запроса.\n  "}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Первым аргументом в "},{type:b,tag:e,props:{className:[f,l]},children:[{type:a,value:bH}]},{type:a,value:" указывается относительный путь от диска,\n    позволяющий дополнительно указать директорию в которую сохранить файл. \n    Это может быть удобно для разделения файлов внутри диска, например, \n    мы можем сохранить оригинальное изображение в папку "},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:"original"}]},{type:a,value:", \n    а миниатюру в папку "},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:"preview"}]},{type:a,value:". В данном примере сохраняем в корень диска,\n    поэтому значение оставляем пустым.\n  "}]},{type:a,value:c},{type:b,tag:q,props:{name:"cases\u002Fstorage\u002Frequest-store"},children:[]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Вторым аргументом указывается имя диска. Метод возвращает относительный путь к файлу вместе с именем и расширением, его и сохраняем в БД.\n  "}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:h},{type:b,tag:k,props:{},children:[{type:a,value:J}]},{type:a,value:", что "},{type:b,tag:e,props:{className:[f,l]},children:[{type:a,value:bH}]},{type:a,value:" генерирует случайное имя файла, \n    а если необходимо задать вручную, то для этого есть метод "},{type:b,tag:e,props:{className:[f,l]},children:[{type:a,value:"storeAs()"}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:d,props:{className:[X]},children:[{type:a,value:"\n    Файл сохранился здесь: "},{type:b,tag:e,props:{className:[f,j]},children:[{type:a,value:"storage\u002Fapp\u002Fpublic\u002Fposts\u002Fxxx.jpg"}]},{type:a,value:h},{type:b,tag:w,props:{},children:[]},{type:a,value:"Путь в базе данных: "},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:"xxx.jpg"}]},{type:a,value:h},{type:b,tag:w,props:{},children:[]},{type:a,value:"URL к файлу: "},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:"https:\u002F\u002Fexample.com\u002Fstorage\u002Fposts\u002Fxxx.jpg"}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Осталось вывести файл в шаблоне. Конечно, можно собрать URL вручную, но у "},{type:b,tag:e,props:{className:[f,l]},children:[{type:a,value:az}]},{type:a,value:" уже есть необходимый\n    "},{type:b,tag:p,props:{title:"метод",uri:"filesystem#file-urls"},children:[]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:q,props:{name:"cases\u002Fstorage\u002Fdisplay"},children:[]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Если это выглядит громоздко, то можно сделать в модели\n    "},{type:b,tag:p,props:{title:"аксессор",uri:"eloquent-mutators#defining-an-accessor"},children:[]},{type:a,value:"\n    и в шаблоне получится более элегантно:\n  "}]},{type:a,value:c},{type:b,tag:q,props:{name:"cases\u002Fstorage\u002Fdisplay-2"},children:[]},{type:a,value:g}]},{type:a,value:g},{type:b,tag:i,props:{heading:"Популярные вопросы",id:"questions"},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:h},{type:b,tag:k,props:{},children:[{type:a,value:"Необходимо каждый раз хардкодить имя диска?"}]},{type:a,value:h},{type:b,tag:e,props:{className:[fS,fT,fU]},children:[{type:a,value:"\n      Нет, если используется только public, то его можно сделать дефолтным. Или можно в модели\n      определить константу и обращаться к ней:\n    "}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:q,props:{name:"cases\u002Fstorage\u002Fdisk-constant"},children:[]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:h},{type:b,tag:k,props:{},children:[{type:a,value:"Как хранить разные версии изображений?"}]},{type:a,value:h},{type:b,tag:e,props:{className:[fS,fT,fU]},children:[{type:a,value:"\n      Достаточно сложный вопрос зависящий от ТЗ и тонкостей использования ссылок.\n      В примере выше в методе "},{type:b,tag:e,props:{className:[f,l]},children:[{type:a,value:bH}]},{type:a,value:" первым аргументом указывается директория.\n      Таким образом можно разделить на original, preview, full_hd, hd, medium, small, 512px, 480x320 и т.д.\n      Хранить можно в разных полях или в массиве\u002Fjson, всё зависит от того как это будет использоваться\n      и сколько вариантов может быть. Если для фронта потребуются новые форматы,\n      то хранить их в отдельных колонках может стать затруднительно, поскольку придётся каждый раз править БД.\n      В таком случае можно хранить только имя файла, которое во всех директориях будет одинаковое,\n      а директорию подставлять динамически, когда необходимо.\n      В некоторых системах размеры могут генерироваться \"на лету\", но это выходит за рамки данного материала.\n    "}]},{type:a,value:c}]},{type:a,value:g}]}]},excerpt:{type:r,children:[{type:b,tag:d,props:{},children:[{type:a,value:fI},{type:b,tag:p,props:{title:az,uri:fJ},children:[]},{type:a,value:fK},{type:b,tag:n,props:{title:fL,link:fM},children:[]},{type:a,value:g}]},{type:a,value:g},{type:b,tag:i,props:{heading:bq,id:fN},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:fO},{type:b,tag:F,props:{to:fP},children:[{type:a,value:fQ}]},{type:a,value:c}]},{type:a,value:g}]}]},dir:x,path:"\u002Fcases\u002Fstorage",extension:y,createdAt:P,updatedAt:bE},{slug:"vite-vs-mix",description:"В чем разница, что выбрать и как перейти",heading:"Vite vs Mix",altHeadings:D,toc:[],body:{type:r,children:[{type:b,tag:d,props:{},children:[{type:a,value:fV},{type:b,tag:n,props:{title:fW,link:fX},children:[]},{type:a,value:fY}]},{type:a,value:g},{type:a,value:g},{type:b,tag:d,props:{},children:[{type:a,value:"\n  В "},{type:b,tag:n,props:{title:cn,link:"https:\u002F\u002Fgithub.com\u002Flaravel\u002Fvite-plugin\u002Fblob\u002Fmain\u002FUPGRADE.md"},children:[]},{type:a,value:"\n  есть инструкция по переходу с Mix на Vite и наоборот.\n  Поскольку Laravel это backend фреймворк, то какой сборщик использовать - не принципиально,\n  можешь остаться на Mix или следовать за условностями фреймворка и перейти на Vite, или отказаться от обоих.\n"}]},{type:a,value:g},{type:b,tag:d,props:{},children:[{type:a,value:"\n  Тем не менее, если ты используешь UI пакеты (StarterKit), то отказ от Vite может стать проблемой. Например, \n  "},{type:b,tag:n,props:{title:"Breeze",link:"https:\u002F\u002Fgithub.com\u002Flaravel\u002Fbreeze"},children:[]},{type:a,value:"\n  использует Vite и\n  "},{type:b,tag:n,props:{title:"перестал поддерживать",link:"https:\u002F\u002Fgithub.com\u002Flaravel\u002Fbreeze\u002Fpull\u002F167"},children:[]},{type:a,value:"\n  предыдущие версии Laravel. Тоже самое может коснуться любого стороннего пакета.\n"}]},{type:a,value:g},{type:b,tag:d,props:{},children:[{type:a,value:"\n  Что касается сравнения, то правильнее сравнивать Vite с Webpack, а не с Mix. Об этом ты можешь почитать\n  "},{type:b,tag:n,props:{title:"здесь",link:"https:\u002F\u002Fblog.bitsrc.io\u002Fvite-is-better-than-webpack-d5dd59610d56"},children:[]},{type:a,value:dW},{type:b,tag:n,props:{title:eS,link:"https:\u002F\u002Fbit.ly\u002F3O18KBS"},children:[]},{type:a,value:" самостоятельно.\n"}]}]},excerpt:{type:r,children:[{type:b,tag:d,props:{},children:[{type:a,value:fV},{type:b,tag:n,props:{title:fW,link:fX},children:[]},{type:a,value:fY}]}]},dir:x,path:"\u002Fcases\u002Fvite-vs-mix",extension:y,createdAt:P,updatedAt:dX},{slug:fZ,description:"Что изменилось в 11 версии?",heading:"Laravel 11",altHeadings:"Рубикон",tags:U,toc:[],body:{type:r,children:[{type:b,tag:d,props:{className:[ax,E,aT,ay]},children:[{type:a,value:f_},{type:b,tag:e,props:{className:[aV]},children:[{type:a,value:f$}]},{type:a,value:bC},{type:b,tag:e,props:{className:[aV]},children:[{type:a,value:ga}]},{type:a,value:g}]},{type:a,value:g},{type:b,tag:i,props:{heading:gb,id:gc,":show-menu":aW},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:gd},{type:b,tag:p,props:{title:ge,version:H,uri:gf},children:[]},{type:a,value:gg},{type:b,tag:p,props:{title:gh,version:H,uri:gi},children:[]},{type:a,value:gj}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:gk}]},{type:a,value:g}]},{type:a,value:g},{type:a,value:g},{type:b,tag:i,props:{heading:"Обновление до 11",id:gl},children:[{type:a,value:c},{type:b,tag:aI,props:{className:[ax,W,co,"pb-1",ay]},children:[{type:a,value:h},{type:b,tag:d,props:{},children:[{type:a,value:"\n      Согласно\n      "},{type:b,tag:p,props:{title:gm,version:H,uri:"upgrade#application-structure"},children:[]},{type:a,value:m},{type:b,tag:k,props:{},children:[{type:a,value:"не рекомендуется"}]},{type:a,value:" переносить "},{type:b,tag:k,props:{},children:[{type:a,value:"новую структуру"}]},{type:a,value:" 11-ой версии в существующее приложение,\n      т.к. сохранена полная совместимость.\n    "}]},{type:a,value:h},{type:b,tag:d,props:{},children:[{type:a,value:"\n      Это "},{type:b,tag:k,props:{},children:[{type:a,value:"не значит"}]},{type:a,value:", что обновляться до 11-ой версии не рекомендуется.\n      Речь идет именно за структуру (файлы\u002Fклассы и директории), поэтому можно сохранить текущую структуру приложения. \n    "}]},{type:a,value:h},{type:b,tag:d,props:{},children:[{type:a,value:"\n      Конечно, в дальнейшем это может создать двойственность\n      и запутать начинающих разработчиков без опыта в предыдущих версиях, но так ли это важно?\n      Обновление структуры в существующем проекте может потребовать много усилий и не дать соразмерного профита, \n      но в перспективе будет проще обновляться до новых версий. \n    "}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Для обновления с 10-ой версии необходимо ознакомиться с\n    "},{type:b,tag:p,props:{title:gm,version:H,uri:gl},children:[]},{type:a,value:", а также можно воспользоваться\n    "},{type:b,tag:n,props:{title:"GitHub comparison tool",link:"https:\u002F\u002Fgithub.com\u002Flaravel\u002Flaravel\u002Fcompare\u002F10.x...11.x#files_bucket"},children:[]},{type:a,value:"\n    для более детального изучения изменений в исходном коде. \n    Обновление происходит так же, как и во всех предыдущих версиях.\n  "}]},{type:a,value:g}]},{type:a,value:g},{type:b,tag:i,props:{heading:"Что изменилось?",id:"changes",":show-menu":aW},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:"\n    Пересказывать "},{type:b,tag:p,props:{title:"«Release Notes»",version:H,uri:"releases#laravel-11"},children:[]},{type:a,value:"\n    не имеет смысла, в них отражены все важные моменты. \n    Мы же разберем популярные и неочевидные проблемы, с которыми столкнулись разработчики.\n  "}]},{type:a,value:c},{type:b,tag:i,props:{heading:"Основные моменты",id:"overview",":show-menu":aW},children:[{type:a,value:h},{type:b,tag:M,props:{className:[br,"list-airy"]},children:[{type:a,value:m},{type:b,tag:s,props:{},children:[{type:a,value:o},{type:b,tag:d,props:{},children:[{type:a,value:"\n          Содержимое "},{type:b,tag:e,props:{className:[f,j]},children:[{type:a,value:ej}]},{type:a,value:" после установки:\n        "}]},{type:a,value:o},{type:b,tag:d,props:{},children:[{type:a,value:bI},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:"App\\Http\\Controllers\\Controller"}]},{type:a,value:bI},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:"App\\Models\\User"}]},{type:a,value:bI},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:"App\\Provider\\AppServiceProvider"}]},{type:a,value:o}]},{type:a,value:m}]},{type:a,value:m},{type:b,tag:s,props:{},children:[{type:a,value:"\n        Удалено:\n        "},{type:b,tag:e,props:{className:[f,j]},children:[{type:a,value:"app\u002FExceptions"}]},{type:a,value:o},{type:b,tag:e,props:{className:[f,j]},children:[{type:a,value:"app\u002FConsole"}]},{type:a,value:o},{type:b,tag:e,props:{className:[f,j]},children:[{type:a,value:"app\u002FHttp\u002FMiddleware"}]},{type:a,value:o},{type:b,tag:e,props:{className:[f,j]},children:[{type:a,value:gn}]},{type:a,value:o},{type:b,tag:e,props:{className:[f,j]},children:[{type:a,value:"lang"}]},{type:a,value:m}]},{type:a,value:m},{type:b,tag:s,props:{},children:[{type:a,value:"\n        Регистрация сервис-провайдеров перенесена из конфига "},{type:b,tag:e,props:{className:[f,j]},children:[{type:a,value:go}]},{type:a,value:aX},{type:b,tag:e,props:{className:[f,j]},children:[{type:a,value:gp}]},{type:a,value:m}]},{type:a,value:m},{type:b,tag:s,props:{},children:[{type:a,value:"\n        Регистрация middleware перенесена из "},{type:b,tag:e,props:{className:[f,j]},children:[{type:a,value:gn}]},{type:a,value:aX},{type:b,tag:e,props:{className:[f,j]},children:[{type:a,value:ai}]},{type:a,value:m}]},{type:a,value:m},{type:b,tag:s,props:{},children:[{type:a,value:"\n        Обработчик ошибок перенесен из "},{type:b,tag:e,props:{className:[f,j]},children:[{type:a,value:"app\u002FExceptions\u002FHandler.php"}]},{type:a,value:aX},{type:b,tag:e,props:{className:[f,j]},children:[{type:a,value:ai}]},{type:a,value:m}]},{type:a,value:m},{type:b,tag:s,props:{},children:[{type:a,value:"\n        Планировщик (cron) перенесен из "},{type:b,tag:e,props:{className:[f,j]},children:[{type:a,value:"app\u002FConsole\u002FKernel.php"}]},{type:a,value:aX},{type:b,tag:e,props:{className:[f,j]},children:[{type:a,value:ai}]},{type:a,value:m}]},{type:a,value:h}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:i,props:{heading:"Service Providers",id:"providers"},children:[{type:a,value:h},{type:b,tag:d,props:{},children:[{type:a,value:"\n      Регистрация провайдеров в "},{type:b,tag:e,props:{className:[f,j]},children:[{type:a,value:go}]},{type:a,value:" всё еще доступна, \n      но по умолчанию была перемещена в "},{type:b,tag:e,props:{className:[f,j]},children:[{type:a,value:gp}]},{type:a,value:".\n      В массиве указываются свои провайдеры, например, "},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:a$}]},{type:a,value:".\n      Альтернатива: передавать массив\n      с помощью метода "},{type:b,tag:e,props:{className:[f,l]},children:[{type:a,value:"withProviders()"}]},{type:a,value:bD},{type:b,tag:e,props:{className:[f,j]},children:[{type:a,value:ai}]},{type:a,value:G}]},{type:a,value:h},{type:b,tag:d,props:{},children:[{type:a,value:"\n      Для удаления дефолтных провайдеров фреймворка необходимо прибегнуть к старому способу через конфиг, с помощью\n      "},{type:b,tag:e,props:{className:[f,l]},children:[{type:a,value:"ServiceProvider::defaultProviders()-\u003Eexcept()"}]},{type:a,value:G}]},{type:a,value:h},{type:b,tag:d,props:{},children:[{type:a,value:"\n      Стоит отметить, что были удалены многие провайдеры и все регистрации предлагается совершать через\n      "},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:fC}]},{type:a,value:". \n      С одной стороны это сосредоточило логику настройки приложения, с другой может сильно загрязнить провайдер.\n      Конечно, никто не запрещает создать любые необходимые провайдеры и подключить их, \n      тем самым распределив ответственность.\n    "}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:i,props:{heading:cx,id:ba},children:[{type:a,value:h},{type:b,tag:d,props:{},children:[{type:a,value:"\n      Все middleware были перемещены без изменений\n      в "},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:gq}]},{type:a,value:G}]},{type:a,value:h},{type:b,tag:d,props:{},children:[{type:a,value:"\n      Согласно "},{type:b,tag:p,props:{title:C,version:H,uri:"middleware#registering-middleware"},children:[]},{type:a,value:",\n      управление осуществляется в методе "},{type:b,tag:e,props:{className:[f,l]},children:[{type:a,value:gr}]},{type:a,value:G}]},{type:a,value:h},{type:b,tag:d,props:{},children:[{type:a,value:"\n      Для этого в распоряжении есть объект \n      "},{type:b,tag:p,props:{title:gq,version:H,type:O,uri:gs},children:[]},{type:a,value:",\n      со всеми необходимыми методами:\n      "},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:"append"}]},{type:a,value:af},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:"prepend"}]},{type:a,value:af},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:"remove"}]},{type:a,value:af},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:"replace"}]},{type:a,value:af},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:"group"}]},{type:a,value:af},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:cm}]},{type:a,value:" и т.п. \n      "},{type:b,tag:w,props:{},children:[]},{type:a,value:"\n      С полным списком можно ознакомиться \n      в "},{type:b,tag:p,props:{title:"API",version:H,type:O,uri:gs},children:[]},{type:a,value:"\n      или в "},{type:b,tag:p,props:{title:C,version:H,uri:ba},children:[]},{type:a,value:G}]},{type:a,value:h},{type:b,tag:d,props:{},children:[{type:a,value:"Пример, как это выглядит в 11 версии:"}]},{type:a,value:h},{type:b,tag:q,props:{name:"cases\u002Fversion-11\u002Fwith-middleware"},children:[]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:i,props:{heading:"Router",id:"router"},children:[{type:a,value:h},{type:b,tag:d,props:{},children:[{type:a,value:m},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:cp}]},{type:a,value:" удален и настройки производятся в\n      "},{type:b,tag:p,props:{title:"withRouting()",version:H,uri:"routing#routing-customization"},children:[]},{type:a,value:",\n      где указываются абсолютные пути к файлам маршрутов через аргументы:\n      "},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:"web"}]},{type:a,value:af},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:O}]},{type:a,value:af},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:"channels"}]},{type:a,value:af},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:"commands"}]},{type:a,value:G}]},{type:a,value:h},{type:b,tag:d,props:{},children:[{type:a,value:"\n      По умолчанию API маршруты не подключены, установить можно с помощью команды "},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:"php artisan install:api"}]},{type:a,value:", смотри \n      "},{type:b,tag:p,props:{title:aP,version:H,uri:"routing#api-routes"},children:[]},{type:a,value:G}]},{type:a,value:h},{type:b,tag:d,props:{},children:[{type:a,value:"\n      Префикс для API маршрутов можно изменить с помощью аргумента: "},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:"apiPrefix"}]},{type:a,value:h}]},{type:a,value:h},{type:b,tag:d,props:{},children:[{type:a,value:m},{type:b,tag:e,props:{className:[f,l]},children:[{type:a,value:"Route::pattern()"}]},{type:a,value:" \n      и "},{type:b,tag:e,props:{className:[f,l]},children:[{type:a,value:"RateLimiter::for()"}]},{type:a,value:" \n      можно определить в "},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:"AppServiceProvider::boot()"}]},{type:a,value:G}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:i,props:{heading:"Exceptions",id:"exceptions"},children:[{type:a,value:h},{type:b,tag:d,props:{},children:[{type:a,value:"\n      Обработка исключений перемещена из "},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:"App\u002FExceptions\u002FHandler"}]},{type:a,value:" в \n      "},{type:b,tag:e,props:{className:[f,l]},children:[{type:a,value:"withExceptions()"}]},{type:a,value:G}]},{type:a,value:h},{type:b,tag:d,props:{},children:[{type:a,value:"\n      Глобально ничего не изменилось, принцип такой же как с middleware, доступны все необходимые методы в\n      "},{type:b,tag:p,props:{title:"\\Illuminate\\Foundation\\Configuration\\Exceptions",version:H,type:O,uri:"Illuminate\u002FFoundation\u002FConfiguration\u002FExceptions.html"},children:[]},{type:a,value:G}]},{type:a,value:h},{type:b,tag:d,props:{},children:[{type:a,value:"\n      Подробнее смотри\n      "},{type:b,tag:p,props:{title:aP,version:H,uri:"errors#handling-exceptions"},children:[]},{type:a,value:" или пример в секции\n      "},{type:b,tag:bJ,props:{href:"#beautiful"},children:[{type:a,value:"«Наводим порядок»"}]},{type:a,value:G}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:i,props:{heading:"Redirect",id:"redirect"},children:[{type:a,value:h},{type:b,tag:d,props:{},children:[{type:a,value:"\n      За переадресацию пользователей раньше отвечали отдельные middleware, теперь за это отвечает метод\n      "},{type:b,tag:e,props:{className:[f,l]},children:[{type:a,value:"$middleware-\u003EredirectTo()"}]},{type:a,value:", который принимает два аргумента:\n    "}]},{type:a,value:h},{type:b,tag:d,props:{},children:[{type:a,value:m},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:"guests"}]},{type:a,value:" - для переадресации c auth маршрутов, если пользователь не аутентифицирован.\n    "}]},{type:a,value:h},{type:b,tag:d,props:{},children:[{type:a,value:m},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:"users"}]},{type:a,value:" - для переадресации с гостевых маршрутов, если пользователь аутентифицирован.\n    "}]},{type:a,value:h},{type:b,tag:d,props:{},children:[{type:a,value:"\n      Оба аргумента могут принимать callback, в который передается "},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:aO}]},{type:a,value:",\n      это может быть полезно для переадресации с учетом запроса. Пример смотри выше в секции\n      "},{type:b,tag:bJ,props:{href:gt},children:[{type:a,value:gu}]},{type:a,value:G}]},{type:a,value:h},{type:b,tag:d,props:{},children:[{type:a,value:m},{type:b,tag:k,props:{},children:[{type:a,value:J}]},{type:a,value:", что callback должен возвращать строку, путь куда будет перенаправлен пользователь. \n      Возвращать "},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:ee}]},{type:a,value:" нельзя.\n    "}]},{type:a,value:h},{type:b,tag:d,props:{},children:[{type:a,value:"\n      Так же стоит отметить, что для не аутентифицированных пользователей фреймворк самостоятельно вызовет\n      "},{type:b,tag:e,props:{className:[f,l]},children:[{type:a,value:"$request-\u003EexpectsJson()"}]},{type:a,value:" и для запросов ожидающих json редиректа не будет. \n      Но для аутентифицированных, такого поведения нет и всегда будет редирект,\n      что может оказаться нежелательным поведением для API, поэтому, возможно, понадобится дополнительная проверка в \n      callback.\n    "}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:i,props:{heading:"Casts",id:"casts"},children:[{type:a,value:h},{type:b,tag:d,props:{},children:[{type:a,value:"\n      Изменился способ определения кастов полей в моделях. Старый способ через свойство \n      "},{type:b,tag:e,props:{className:[f,l]},children:[{type:a,value:"protected array $casts;"}]},{type:a,value:" доступен тоже. В новом способе предлагается использовать метод\n      "},{type:b,tag:e,props:{className:[f,l]},children:[{type:a,value:"protected function casts(): array"}]},{type:a,value:", который возвращает массив (формат массива не изменился). \n      Подробнее смотри в "},{type:b,tag:p,props:{title:C,version:H,uri:"eloquent-mutators#attribute-casting"},children:[]},{type:a,value:G}]},{type:a,value:h},{type:b,tag:d,props:{},children:[{type:a,value:m},{type:b,tag:k,props:{},children:[{type:a,value:J}]},{type:a,value:", что при одновременном использовании двух способов, массивы сливаются и ключи перечисленные\n      в методе "},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:"casts()"}]},{type:a,value:" могут перетереть ключи из массива в свойстве \n      "},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:"$casts"}]},{type:a,value:", поэтому рекомендую выбрать один способ и придерживаться его.\n    "}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:i,props:{heading:"Throttling",id:"throttling"},children:[{type:a,value:h},{type:b,tag:d,props:{},children:[{type:a,value:"\n      По умолчанию "},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:"RateLimiter"}]},{type:a,value:" теперь отключен для API маршрутов.\n    "}]},{type:a,value:h},{type:b,tag:d,props:{},children:[{type:a,value:"\n      Для включения необходимо вызвать "},{type:b,tag:e,props:{className:[f,l]},children:[{type:a,value:"$middleware-\u003EthrottleApi();"}]},{type:a,value:" \n      в "},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:gr}]},{type:a,value:G}]},{type:a,value:h},{type:b,tag:d,props:{},children:[{type:a,value:"\n      Пример смотри в секции "},{type:b,tag:bJ,props:{href:gt},children:[{type:a,value:gu}]},{type:a,value:G}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:i,props:{heading:"CORS",id:aC},children:[{type:a,value:h},{type:b,tag:d,props:{},children:[{type:a,value:"\n      Конфиг "},{type:b,tag:e,props:{className:[f,j]},children:[{type:a,value:cv}]},{type:a,value:" по умолчанию отсутствует.\n      Для публикации конфига используй команду: "},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:"php artisan config:publish cors"}]},{type:a,value:h}]},{type:a,value:h},{type:b,tag:d,props:{},children:[{type:a,value:"\n      Подробнее смотри в\n      "},{type:b,tag:p,props:{title:C,version:H,uri:cu},children:[]},{type:a,value:G}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:i,props:{heading:"Service Aliases",id:"aliases"},children:[{type:a,value:h},{type:b,tag:d,props:{},children:[{type:a,value:"\n      Хоть альясы сервисов и не являются рекомендательной практикой, но если использовались, то в 11 версии\n      альясы можно определить в "},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:a$}]},{type:a,value:h}]},{type:a,value:h},{type:b,tag:q,props:{name:"cases\u002Fversion-11\u002Fservice-alias"},children:[]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:i,props:{heading:"Наводим порядок",id:"beautiful"},children:[{type:a,value:h},{type:b,tag:d,props:{},children:[{type:a,value:"\n      Изменения в 11 версии были восприняты сообществом неоднозначно. \n      В основном из-за подхода к настройке middleware, exceptions, scheduler.\n      Всё было вынесено в "},{type:b,tag:e,props:{className:[f,j]},children:[{type:a,value:ai}]},{type:a,value:",\n      что в реальном проекте сильно \"раздувает\" код и выглядит лаконично только в документации.\n    "}]},{type:a,value:h},{type:b,tag:d,props:{},children:[{type:a,value:"\n      Есть очень простое решение, как можно \"вернуть\" старую структуру не отказываясь от новой.\n    "}]},{type:a,value:h},{type:b,tag:d,props:{},children:[{type:a,value:"\n      Методы \n      "},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:"withExceptions"}]},{type:a,value:gv},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:"withMiddleware"}]},{type:a,value:gv},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:"withSchedule"}]},{type:a,value:" \n      и т.п. принимают тип callable, а значит мы можем передать invokable объект, \n      тем самым вынеся логику в привычные и отдельные классы.\n    "}]},{type:a,value:h},{type:b,tag:d,props:{},children:[{type:a,value:"\n      Создаем классы с магическим методом "},{type:b,tag:e,props:{className:[f,l]},children:[{type:a,value:"__invoke()"}]},{type:a,value:", имена и расположение могут быть любыми, \n      и переносим всю логику из callback.\n    "}]},{type:a,value:h},{type:b,tag:d,props:{className:[au]},children:[{type:a,value:m},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:"App\\Exceptions\\ExceptionHandler"}]},{type:a,value:h}]},{type:a,value:h},{type:b,tag:q,props:{name:"cases\u002Fversion-11\u002Fbeautiful-exceptions"},children:[]},{type:a,value:h},{type:b,tag:d,props:{className:[au]},children:[{type:a,value:m},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:"App\\Console\\ScheduleHandler"}]},{type:a,value:h}]},{type:a,value:h},{type:b,tag:q,props:{name:"cases\u002Fversion-11\u002Fbeautiful-schedule"},children:[]},{type:a,value:h},{type:b,tag:d,props:{className:[au]},children:[{type:a,value:m},{type:b,tag:e,props:{className:[f]},children:[{type:a,value:"App\\Http\\Middleware\\MiddlewareHandler"}]},{type:a,value:h}]},{type:a,value:h},{type:b,tag:q,props:{name:"cases\u002Fversion-11\u002Fbeautiful-middleware"},children:[]},{type:a,value:h},{type:b,tag:d,props:{className:[au]},children:[{type:a,value:"\n      Применяем классы в "},{type:b,tag:e,props:{className:[f,j]},children:[{type:a,value:ai}]},{type:a,value:h}]},{type:a,value:h},{type:b,tag:q,props:{name:"cases\u002Fversion-11\u002Fbeautiful"},children:[]},{type:a,value:h},{type:b,tag:d,props:{},children:[{type:a,value:"\n      Технически ничего не изменилось, но логика была распределена по своим классам \n      и "},{type:b,tag:e,props:{className:[f,j]},children:[{type:a,value:ai}]},{type:a,value:" стал выглядеть намного чище и проще для восприятия.\n    "}]},{type:a,value:c}]},{type:a,value:g}]}]},excerpt:{type:r,children:[{type:b,tag:d,props:{className:[ax,E,aT,ay]},children:[{type:a,value:f_},{type:b,tag:e,props:{className:[aV]},children:[{type:a,value:f$}]},{type:a,value:bC},{type:b,tag:e,props:{className:[aV]},children:[{type:a,value:ga}]},{type:a,value:g}]},{type:a,value:g},{type:b,tag:i,props:{heading:gb,id:gc,":show-menu":aW},children:[{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:gd},{type:b,tag:p,props:{title:ge,version:H,uri:gf},children:[]},{type:a,value:gg},{type:b,tag:p,props:{title:gh,version:H,uri:gi},children:[]},{type:a,value:gj}]},{type:a,value:c},{type:b,tag:d,props:{},children:[{type:a,value:gk}]},{type:a,value:g}]}]},dir:x,path:"\u002Fcases\u002Fversion-11",extension:y,createdAt:"2025-04-06T01:10:50.309Z",updatedAt:ek}],tags:{manual:[aY,cF,dh,dr,dt,dO,aR,fj,fl,fD,fH,fZ],errors:[bV,cf,aC,bd,be,aF,cU,bk,bp,el,eJ,fa],database:[bd,be,aF,cK,bk,bp,ev,eD,eT],api:[aY,cb,aC,dJ,aR],docker:[aF],sanctum:[aR]}}],fetch:{"CodeChips:0":{code:"\u003Cpre class=\"torchlight\" style=\"background-color: #011627; --theme-selection-background: #4373c2;\" data-torchlight-processed=\"3449c9e5e332f1dbb81505cd739fbf3f\"\u003E\u003Ccode data-lang=\"php\"\u003E\u003C!-- Syntax highlighted by torchlight.dev --\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color:#4b6479; text-align: right; -webkit-user-select: none; user-select: none;\" class=\"line-number\"\u003E1\u003C\u002Fspan\u003E\u003Cspan style=\"color: #BEC5D4;\"\u003E$path\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D6DEEB;\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: #C792EA;\"\u003E=\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D6DEEB;\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: #BEC5D4;\"\u003E$request\u003C\u002Fspan\u003E\u003Cspan style=\"color: #7FDBCA;\"\u003E-&gt;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #82AAFF;\"\u003Efile\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D6DEEB;\"\u003E(\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D9F5DD;\"\u003E&#39;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #ECC48D;\"\u003Ecover\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D9F5DD;\"\u003E&#39;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D6DEEB;\"\u003E)\u003C\u002Fspan\u003E\u003Cspan style=\"color: #7FDBCA;\"\u003E-&gt;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #82AAFF;\"\u003Estore\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D6DEEB;\"\u003E(\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D9F5DD;\"\u003E&#39;&#39;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D6DEEB;\"\u003E, \u003C\u002Fspan\u003E\u003Cspan style=\"color: #D9F5DD;\"\u003E&#39;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #ECC48D;\"\u003Epublic\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D9F5DD;\"\u003E&#39;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D6DEEB;\"\u003E);\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Ctextarea data-torchlight-original=\"true\" style=\"display: none !important;\"\u003E$path = $request-&gt;file('cover')-&gt;store('', 'public');\n\u003C\u002Ftextarea\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n",copied:gw,copiedTimeout:D},"CodeChips:1":{code:"\u003Cpre class=\"torchlight\" style=\"background-color: #011627; --theme-selection-background: #4373c2;\" data-torchlight-processed=\"3449c9e5e332f1dbb81505cd739fbf3f\"\u003E\u003Ccode data-lang=\"php\"\u003E\u003C!-- Syntax highlighted by torchlight.dev --\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color:#4b6479; text-align: right; -webkit-user-select: none; user-select: none;\" class=\"line-number\"\u003E1\u003C\u002Fspan\u003E\u003Cspan style=\"color: #FFCB8B;\"\u003EStorage\u003C\u002Fspan\u003E\u003Cspan style=\"color: #7FDBCA;\"\u003E::\u003C\u002Fspan\u003E\u003Cspan style=\"color: #82AAFF;\"\u003Edisk\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D6DEEB;\"\u003E(\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D9F5DD;\"\u003E&#39;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #ECC48D;\"\u003Epublic\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D9F5DD;\"\u003E&#39;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D6DEEB;\"\u003E)\u003C\u002Fspan\u003E\u003Cspan style=\"color: #7FDBCA;\"\u003E-&gt;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #82AAFF;\"\u003Eurl\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D6DEEB;\"\u003E(\u003C\u002Fspan\u003E\u003Cspan style=\"color: #BEC5D4;\"\u003E$post\u003C\u002Fspan\u003E\u003Cspan style=\"color: #7FDBCA;\"\u003E-&gt;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #BEC5D4;\"\u003Ecover\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D6DEEB;\"\u003E)\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Ctextarea data-torchlight-original=\"true\" style=\"display: none !important;\"\u003EStorage::disk('public')-&gt;url($post-&gt;cover)\n\u003C\u002Ftextarea\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n",copied:gw,copiedTimeout:D}},mutations:[["nav-sidebar\u002FlockGroup","context-section"]]}}("text","element","\n  ","p","span","bit","\n","\n    ","case-context-section","path","b","code","\n      ","external-link","\n        ","laravel-link","code-chips","root","li","td","console","log","br","\u002Fcases",".md",".\n  ","Проблема","problem","документации",null,"italic","nuxt-link",".\n    ","11.x","list-inside","Обрати внимание","tr","why","ul","list-disc","api","2023-10-19T09:38:37.880Z","2025-04-05T20:09:10.685Z","public","th","2025-04-05T20:09:10.684Z","manual","solution","mb-4","pt-3","public_html","Решение","errors",".\n","Причина",".htaccess","mb-1",",\n    "," и ",",\n      ","2024-12-11T10:52:12.054Z",", ","bootstrap\u002Fapp.php","variable","database","mb-3","table","insert()","get","EloquentCollection",", \n    ","\n    Согласно ","2024-12-11T10:52:12.052Z","storage\u002Fapp\u002Fpublic","mt-4","validated","where()","notice-box","px-4","Storage","storage\u002Flogs\u002Flaravel.log","\u002Fhere-is-logs\u002F","cors","\n    Любая попытка взаимодействия с базой данной завершается ошибкой:\n  ","2024-12-11T10:52:12.053Z","docker-database",".env"," или ","div","1 строка","create()","quote","mb-5","не","Request","документацию","text-sm","sanctum-postman","Origin","py-2","local","whitespace-nowrap","false"," в файл\n        ","api-headers","Теория","«Где найти логи?»","AppServiceProvider","middleware","fruitcake\u002Flaravel-cors","https:\u002F\u002Fgithub.com\u002Ffruitcake\u002Flaravel-cors","database-cache","database-driver","text-lg","overflow-x-auto","thead","Eloquent","tbody","foreign-keys","\n    General error: 3780 Referencing column 'post_id' and referenced column 'id' in foreign key constraint 'xxx' are incompatible\n  ","\n    General error: 1824 Failed to open the referenced table\n  ","\n    General error: 3730 Cannot drop table 'xxx' referenced by a foreign key constraint\n  ","\n    SQLSTATE[23000]: Integrity constraint violation: 1452 Cannot add or update a child row: a foreign key constraint fails\n  ","fillable","Быстрый пример","list-decimal","php artisan storage:link","«bad-практиках»","safe","input"," и \n    ","Collection","php artisan route:list",":\n  ","SANCTUM_STATEFUL_DOMAINS","public\u002Findex.php",",\n  "," в ","2025-04-05T20:09:10.686Z","config\u002Ffilesystems.php","public\u002Fstorage","store()","\n          ","a","\n    Например, ошибка валидации перенаправляет на предыдущий адрес и добавляет текст ошибок в сессию.\n    ","Критическая ошибка отобразит html страницу с подробным описанием или просто с текстом «Error 500», если\n    выключен debug.\n  ","\n    Но что если в ответе необходим json? Для\n    ","валидации","validation#validation-error-response-format","\n    сказано, что если запрос ожидает json, то фреймворк автоматически вернёт его с соответствующим кодом.\n    Что это значит?\n  ","Accept","Accept: application\u002Fjson","response()-\u003Ejson()","На мой взгляд","2025-04-05T20:09:10.683Z","artisan-not-working","Смотри логи storage\u002Flogs\u002Flaravel.log","\n    Вызов любой команды ","php artisan"," завершается без сообщений и ошибок.\n  ","\n    Отсутствие каких-либо сообщений и завершение команды сигнализирует о том,\n    что выполнение было прекращено по критической ошибке.\n    Отображение ошибок в терминале может быть отключено в php.ini,\n    директива\n    ","display_errors","https:\u002F\u002Fwww.php.net\u002Fmanual\u002Fru\u002Ferrorfunc.configuration.php#ini.display-errors","backend-frontend","\n  Вопрос ","«Как использовать php-переменную в js?»","\n  периодически всплывает в чатах по ларе и у фреймворка даже есть небольшой функционал для этого,\n  поэтому рассмотрим какие могут быть способы передачи данных между backend и frontend приложениями.\n","controller-does-not-exist","\n  Данная ошибка актуальна для тех кто изучает Laravel по старым курсам, либо крайне невнимательно обновил фреймворк.\n  Начиная с 8-ой версии был \n  ","изменён синтаксис роутов","routing#basic-routing"," по умолчанию.\n","\n  Target class [PostController] does not exist\n","\n  Раньше использовался «string syntax»:\n","use","Upgrade Guide","pt-2","App\\Providers\\RouteServiceProvider","\n  Крайне распространённая проблема, которой забиты и тг-чаты, и stack overflow, и qna хабр...\n  Активно набирает популярность с ростом популярности SPA и раздельных доменов для frontend и backend приложений.\n","\n    AJAX-запрос на \"api\" не работает в браузере, но работает в postman. Ошибка в консоли браузера:\n  ","\n    Access to XMLHttpRequest at 'http:\u002F\u002Flocalhost:8000' from origin 'http:\u002F\u002Flocalhost:3000'\n    has been blocked by CORS policy:\n    No 'Access-Control-Allow-Origin' header is present on the requested resource.\n  ","localhost","routing#cors","config\u002Fcors.php",", например,\n    ","Middleware","\\Illuminate\\Http\\Middleware\\HandleCors","database,errors","\n    [Illuminate\\Database\\QueryException] Base table or view not found: \n    1146 Table 'db.cache' doesn't exist\n  ","cache","\n    [Illuminate\\Database\\QueryException] could not find driver\n  ","\n    PDOException(code: 0): could not find driver at \u002FIlluminate\u002FDatabase\u002FConnectors\u002FConnector.php\n  "," и\n    ","datetime","\n  Возможно, данная тема немного холиварна и существуют кейсы, когда рекомендация неприменима,\n  но для большинства совет будет такой:\n","В backend-е всегда храни и работай с датой и временем в UTC (UTC±0).","\n    Не удалось подключиться к БД в докере, ошибка:\n  ","\n    SQLSTATE[HY000] [2002] Connection refused\n  ","eloquent-vs-db","\n  Eloquent - это мощная ORM, реализация шаблона ActiveRecord,\n  позволяющая комфортно работать с базой данных, например, с помощью таких вещей:\n  модели, связи, скоупы, события, аксессоры, мутаторы, касты...\n","\n  Но, к сожалению, у удобства есть своя цена и в случае с Eloquent - это производительность\n  из-за дополнительного функционала.\n","DB","Разница","Эффективность","Запись","0.00683","Выводы","summary","error-500","\n  Начнём с того, что 500 - \n  ","это код ответа сервера","https:\u002F\u002Fdeveloper.mozilla.org\u002Fru\u002Fdocs\u002FWeb\u002FHTTP\u002FStatus\u002F500",",\n  который является обобщённым и говорит только о том, что произошла ошибка, но не говорит о самой ошибке.\n","\n  Поэтому, первое что необходимо сделать - найти ошибку в логах,\n  смотри ","dd()","errors,database","\n    Попытка добавить внешний ключ к таблице приводит к одной из ошибок:\n  ","\n    General error: 1215 Cannot add foreign key constraint \n  ","\n    Поле не сохраняется в базе данных без ошибок или запрос завершается ошибкой:\n  ","\n    General error: 1364 Field 'xxx' doesn't have a default value\n  ","\n    При этом поле не пустое и корректно передано.\n  ","eloquent#mass-assignment","$fillable","here-is-logs","Логи фреймворка","laravel","mt-0","\n    По умолчанию логи находятся по адресу ","\n    В зависимости от настроек в ","config\u002Flogging.php",",\n    логи могут быть разделены по файлам или находиться в другой директории.\n  ","\n    Подробнее о конфигурации логирования можно узнать в\n    ","logging#configuration","how-store-image","ol","how-to-ask","\n  «Правильно заданный вопрос содержит половину ответа»\n","Формулировка","drafting","\n    Не пиши сразу в чат по любой проблеме. ","Сформулируй вопрос в блокноте",".\n    Напиши вопрос, прочти его (можешь вслух), подумай всё ли ты учёл, правильно ли ты донёс свою мысль, могут ли тебя понять иначе.\n    Это называется \n    ","«Метод утёнка»","https:\u002F\u002Fru.wikipedia.org\u002Fwiki\u002F%D0%9C%D0%B5%D1%82%D0%BE%D0%B4_%D1%83%D1%82%D1%91%D0%BD%D0%BA%D0%B0",",\n    суть которого проговорить вопрос или проблему, вслух или письменно.\n  ","\n    Попробуй сократить текст, чтобы было максимум сути и минимум слов.\n  ","\n    А теперь ","погугли ключевые слова"," из своего вопроса. Ничего не нашёл? Измени ключевые слова, уточни их. Опять ничего?\n    Воспользуйся поиском по чату, многие проблемы уже обсуждались и не единожды. Не нашёл? Теперь задавай вопрос в чат.\n  ","font-normal","\"xxx\"","laravel-and-vue","Запрещённые слова, Холивар","Нет никакой магической связки между Laravel и Vue."," Они не созданы друг для друга. Забудь навсегда этот бред.\n","\n  Когда кто-либо пишет о \"связке backend и frontend\", то таким образом он показывает незнание основ работы web-приложений.\n","logic-in-controllers","\n  «Логика в контроллерах это плохо... понятненько». Мистер Маки\n","\n  На данную тему есть блок в ","\u002Fbad-practices\u002F#heavy-controllers"," и\n  для большинства ситуаций это действительно так, как минимум, потому что мы не сможем переиспользовать логику,\n  которую написали в контроллере (хотя некоторые додумываются вызывать контроллеры из контроллера,\n  как следствие полного непонимания роли контроллера в приложении).\n","\n  На просторах интернета можно встретить выражения «Laravel Way», «ларавэй», «ларавэйно» и т.п.\n","\n  «Laravel Way» - это негласный набор практик, принятых сообществом.\n","\n  В каждом фреймворке или CMS, или в любой другой системе есть какие-либо специфичные требования и рекомендации,\n  но чаще всего они прозрачны и опциональны. Если мы говорим о мире PHP, то большинство принципов применимы независимо от инструмента.\n  А Laravel - это всего-лишь инструмент.\n  Да, да, ты не ослышался, это всего-лишь набор функций, а не волшебная палочка, позволяющая тебе делать \"вжух и ты в продакшене\".\n","\n  или ","2022-08-15T19:05:35.000Z","\n  Laravel - фреймворк который предлагает большое количество вспомогательных инструментов \n  и активно использует магию, что приводит иногда к неожиданным результатам.\n","\n  Разработчики, избалованные гибкостью и магией фреймворка,\n  перестают следить за тем как выполняется код под капотом и создают многочисленные обертки и неявные вызовы, \n  которые работают, но имеют сайд-эффекты.\n","\n  Рассмотрим наиболее популярные моменты, о которых необходимо знать.\n","prepareForValidation","passedValidation","UserResource","data","JsonResponse","Response","mt-5","load","Job","\n    Метод ","app","2025-04-15T23:14:20.353Z","method-is-not-supported","Первый вариант","variant-1","\n    The POST method is not supported for this route. Supported methods: GET, HEAD.\n  ","\n    Данная ошибка говорит о том, что метод POST (или любой другой) не поддерживается текущим роутом.\n    Далее перечисляются допустимые методы.\n  ","\n    POST запрос пришёл на ","Route::get()",", а должен на ","Route::post()",",\n    поэтому проверь актуальный список маршрутов с помощью ","method-magic-syntax","Laraway","\n  Laravel - фреймворк с лаконичным синтаксисом и местами он пытается угодить всем,\n  предоставляя разные способы написания одного и того же кода,\n  что часто приводит к ","\u002Fintro\u002F","«laraway»"," спорам.\n","\n  Здесь я хочу рассмотреть сомнительную функциональность, которой нет в документации, но тем не менее её применяют -\n  это магические методы, речь не про саму \"магию\" в php, а про альтернативный синтаксис некоторых методов, например,\n  "," \n","model-creation","\n  Согласно ","eloquent#inserts","\n  есть несколько способов создать новую модель и сохранить данные в БД.\n","\n  Это неизбежно приводит к вопросу «Как правильно\u002Fлучше?» и обычно тема перетекает в холивар,\n  с доводами а-ля\n  ","\"у нас в проекте пишут вот так\"","permission-denied","\n  Дословный перевод ошибки: ","\"Не удалось открыть поток: Отказано в доступе\"","Примеры ошибок","examples","\n    The stream of file \"storage\u002Flogs\u002Flaravel.log\" could not be opened in append mode:\n    Failed to open stream: Permission denied. The exception occurred while attempting to log...\n  ","\n    Unable to create lockable file. Please ensure you have permission to create files in this location.\n  ","\n    file_put_contents(storage\u002Fframework\u002Fviews\u002Fxxx.php): Failed to open stream: Permission denied\n  ","storage\u002F","погуглив","repository","\n  Одна из самых горячих тем в чатах, которая вспыхивает по КД.\n  Сразу подчеркну, что этот текст мои (и не только) размышления на данную тему,\n  поэтому никаких выводов о добре и зле здесь не будет.\n","\n    В Postman не работает \n    ","SPA аутентификация","sanctum#spa-authentication"," \n    на Sanctum. Маршруты с ","auth:sanctum"," возвращают 401 статус, даже после успешного логина.\n    В браузере аутентификация работает.\n  ","Referer","pretty-url-404","\n    В Laravel используется единая ","точка входа","structure#the-public-directory","\n    для запросов, поэтому web-сервер должен правильно передавать входные параметры в ","index.php","\n    Следовательно, если работает только главная страница, а остальные нет, то web-сервер неверно передаёт запрос.\n  ","mod_rewrite","AllowOverride","ssh-key","\n  Очень часто начинающие, а иногда и \"начавшие\",\n  разработчики пренебрегают способом аутентификации на своих git-репозиториях и используют соединение по https,\n  постоянно вводя логин\u002Fпароль или вбивая его в GUI.\n","shared-hosting","\n    Популярнейшая ошибка начинающих разработчиков\n    - размещение проекта на виртуальном хостинге и как следствие загрузка всего исходного кода в\n    общедоступный каталог "," или иной, как в случае с простыми CMS, например,\n    WordPress. С Laravel такой подход не работает и вместо сайта отображается, или каталог с файлами, или 403 Forbidden,\n    или сообщение о циклической переадресации, или не работают ссылки на стили, скрипты и обычные файлы.\n  ","\n    В попытках запустить проект, разработчик совершает\n    ","\u002Fbad-practices\u002F#document-root","серьёзную ошибку","\n    и пытается перенаправить запросы в "," из корня проекта.\n  ","\n    Во-первых, это нарушение безопасности, файл "," доступен в web, \n    как и всё остальное (composer.json, любые приватные файлы на диске, например, дамп базы данных).\n    ","\n    Во-вторых, переадресация запросов через ","\n    это дополнительная нагрузка и увеличение TTFB.\n    ","\n    В-третьих, это приводит к другим разнообразным проблемам связанных с некорректной \"переадресацией\" запроса. \n  ","Ни в коем случае не проксируй запросы через htaccess",", \n    только содержимое "," должно быть доступно в web.\n  "," на ","App\\Providers\\AppServiceProvider","unescaped-data","\n    Необходимо отобразить данные с html-форматированием ","{{ $content }}",", но html отображается как текст.\n  ","storage","\n  Для работы с файлами Laravel предоставляет мощную абстракцию файловой системы\n  ","filesystem#introduction",", реализованную на библиотеке\n  ","Flysystem","https:\u002F\u002Fgithub.com\u002Fthephpleague\u002Fflysystem","quick","\n    Смотри краткую версию ","\u002Fhow-store-image\u002F","«Как сохранить изображение?»","storage\u002Fapp\u002F","block","ml-3","mt-1","\n  Согласно посту на\n  ","laravel-news.com","https:\u002F\u002Flaravel-news.com\u002Fvite-is-the-default-frontend-asset-bundler-for-laravel-applications",",\n  в Laravel 9 сборщик Mix был заменён на Vite, как более быстрое и современное решение.\n","version-11","\n  «Старый свет погибает с теми, кто не способен понять новое».\n  ","Mr. Freeman","part 62","Что произошло?","what","\n    Laravel 11 вышел ","в марте 2024 года","releases#support-policy","\n    и в отличии от 6 - 10 версий, которые не сильно отличались друг от друга,\n    11-ая получила обновленную структуру scaffold-а.\n    Вся суть обновления заключается в \n    ","минималистичности ","releases#structure","\n    стартового приложения\n    и некоторые привычные моменты были спрятаны под \"капот\". \n    Это коснулось конфигурации, мидлварок, планировщика, маршрутов, обработчика ошибок и сервис-провайдеров.\n  ","\n    Функционал фреймворка работает как и прежде, ничего важного не удалили\n    и не добавили. Но если ты привык использовать предыдущие версии, то в 11-ой у тебя скорей всего возникнут вопросы\n    как сделать привычные вещи или почему что-то стало работать не так.\n  ","upgrade","«Upgrade Guide»","app\u002FHttp\u002FKernel.php","config\u002Fapp.php","bootstrap\u002Fproviders.php","\\Illuminate\\Foundation\\Configuration\\Middleware","withMiddleware()","Illuminate\u002FFoundation\u002FConfiguration\u002FMiddleware.html","#middleware","«Middleware»",", \n      ",false)));