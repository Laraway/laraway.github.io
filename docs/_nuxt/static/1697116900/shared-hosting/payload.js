__NUXT_JSONP__("/shared-hosting", (function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T){return {data:[{page:{slug:x,description:"Web-сервер должен смотреть в public",heading:"Laravel и shared-hosting",altHeadings:null,toc:[],body:{type:y,children:[{type:b,tag:m,props:{heading:z,id:A},children:[{type:a,value:c},{type:b,tag:g,props:{},children:[{type:a,value:B},{type:b,tag:d,props:{className:[e,f]},children:[{type:a,value:k}]},{type:a,value:C}]},{type:a,value:c},{type:b,tag:g,props:{},children:[{type:a,value:D},{type:b,tag:E,props:{to:F},children:[{type:a,value:G}]},{type:a,value:H},{type:b,tag:d,props:{className:[e,f]},children:[{type:a,value:s}]},{type:a,value:I}]},{type:a,value:c},{type:b,tag:g,props:{},children:[{type:a,value:J},{type:b,tag:d,props:{className:[e,f]},children:[{type:a,value:K}]},{type:a,value:L},{type:b,tag:o,props:{},children:[]},{type:a,value:M},{type:b,tag:d,props:{className:[e,f]},children:[{type:a,value:N}]},{type:a,value:O}]},{type:a,value:c},{type:b,tag:g,props:{},children:[{type:a,value:h},{type:b,tag:n,props:{},children:[{type:a,value:P}]},{type:a,value:Q},{type:b,tag:d,props:{className:[e,f]},children:[{type:a,value:l}]},{type:a,value:R}]},{type:a,value:i}]},{type:a,value:i},{type:a,value:i},{type:b,tag:m,props:{heading:"Проблема хостингов",id:"hosting-trouble"},children:[{type:a,value:c},{type:b,tag:g,props:{},children:[{type:a,value:"\n    Шаред-хостинги не подходят под фреймворки, которые более требовательны к окружению, чем CMS.\n    Даже с наличием ssh-доступа и более-менее функционального cli, проблемы не ограничиваются корневой директорией:\n  "}]},{type:a,value:c},{type:b,tag:"ul",props:{className:["list-disc",S,r]},children:[{type:a,value:h},{type:b,tag:j,props:{},children:[{type:a,value:"\n      Ограниченные ресурсы железа.\n    "}]},{type:a,value:h},{type:b,tag:j,props:{},children:[{type:a,value:"\n      Могут быть недоступны какие-либо расширения php.\n    "}]},{type:a,value:h},{type:b,tag:j,props:{},children:[{type:a,value:"\n      Может не быть требуемой версии php для web или для cli.\n    "}]},{type:a,value:h},{type:b,tag:j,props:{},children:[{type:a,value:"\n      Ограниченные возможности настройки php.ini или баз данных.\n    "}]},{type:a,value:h},{type:b,tag:j,props:{},children:[{type:a,value:"\n      Сложности с запуском демона для очередей.\n    "}]},{type:a,value:h},{type:b,tag:j,props:{},children:[{type:a,value:"\n      Отсутствует node или установлена устаревшая версия.\n    "}]},{type:a,value:h},{type:b,tag:j,props:{},children:[{type:a,value:"\n      Нет возможности использовать Websockets, Supervisor, Octane, Docker, Redis, Varnish, Meilisearch...\n    "}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:g,props:{},children:[{type:a,value:"\n    Данный список можно продолжать очень долго, всё зависит от технологий использующихся в проекте.\n    Если ко всему этому и нет нормальной консоли с php cli и git, то это вообще безумие...\n  "}]},{type:a,value:i}]},{type:a,value:i},{type:b,tag:g,props:{className:["notice-box","py-2","px-4","text-sm"]},children:[{type:a,value:"\n  В примерах ниже будет использоваться "},{type:b,tag:d,props:{className:[e,f]},children:[{type:a,value:k}]},{type:a,value:" как директория web-сервера.\n  Имя директории варьируется от провайдера и в твоём случае может быть иной, например,\n  "},{type:b,tag:d,props:{className:[e,f]},children:[{type:a,value:"www"}]},{type:a,value:t},{type:b,tag:d,props:{className:[e,f]},children:[{type:a,value:"docs"}]},{type:a,value:t},{type:b,tag:d,props:{className:[e,f]},children:[{type:a,value:"html"}]},{type:a,value:",\n  "},{type:b,tag:d,props:{className:[e,f]},children:[{type:a,value:"htdocs"}]},{type:a,value:t},{type:b,tag:d,props:{className:[e,f]},children:[{type:a,value:"domains"}]},{type:a,value:" и т.д.\n"}]},{type:a,value:i},{type:b,tag:m,props:{heading:"Решение 1: Взять VPS","menu-heading":"VPS",id:"solution-vps"},children:[{type:a,value:c},{type:b,tag:g,props:{},children:[{type:a,value:h},{type:b,tag:n,props:{},children:[{type:a,value:"Отказаться от шаред-хостинга"}]},{type:a,value:" и взять по той же цене обычный VPS, в котором можно свободно настроить среду.\n    "},{type:b,tag:n,props:{},children:[{type:a,value:"Это самый адекватный и правильный вариант"}]},{type:a,value:". \n  "}]},{type:a,value:i}]},{type:a,value:i},{type:b,tag:m,props:{heading:"Решение 2: Настроить DocumentRoot","menu-heading":"DocumentRoot",id:"solution-document-root"},children:[{type:a,value:c},{type:b,tag:g,props:{},children:[{type:a,value:"\n    Настроить web-сервер и "},{type:b,tag:n,props:{},children:[{type:a,value:"изменить document_root"}]},{type:a,value:" так, чтобы он смотрел в "},{type:b,tag:d,props:{className:[e,f]},children:[{type:a,value:l}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:u,props:{name:"cases\u002Fshared-hosting\u002Fconfig"},children:[]},{type:a,value:c},{type:b,tag:g,props:{},children:[{type:a,value:"\n    Некоторые современные хостинги позволяют настраивать корневую директорию,\n    уточни у тех. поддержки и если такой возможности нет,\n    то читай дальше...\n  "}]},{type:a,value:i}]},{type:a,value:i},{type:b,tag:m,props:{heading:"Решение 3: Сделать SymLink","menu-heading":"SymLink",id:"solution-symlink"},children:[{type:a,value:c},{type:b,tag:g,props:{},children:[{type:a,value:"\n    Создать\n    "},{type:b,tag:q,props:{title:"символическую ссылку",link:"https:\u002F\u002Fru.wikipedia.org\u002Fwiki\u002F%D0%A1%D0%B8%D0%BC%D0%B2%D0%BE%D0%BB%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B0%D1%8F_%D1%81%D1%81%D1%8B%D0%BB%D0%BA%D0%B0"},children:[]},{type:a,value:"\n    на "},{type:b,tag:d,props:{className:[e,f]},children:[{type:a,value:l}]},{type:a,value:h},{type:b,tag:o,props:{},children:[]},{type:a,value:"\n    Сделать это можно через консоль или в файловом менеджере (зависит от провайдера)\n  "}]},{type:a,value:c},{type:b,tag:"ol",props:{className:["list-decimal",S,r,"pt-1"]},children:[{type:a,value:h},{type:b,tag:j,props:{className:[r]},children:[{type:a,value:"\n      Приложение загружается на один уровень выше, так чтобы\n      "},{type:b,tag:d,props:{className:[e,f]},children:[{type:a,value:k}]},{type:a,value:" хостинга и "},{type:b,tag:d,props:{className:[e,f]},children:[{type:a,value:l}]},{type:a,value:"\n      фреймворка были в одной директории (на одном уровне)\n    "}]},{type:a,value:h},{type:b,tag:j,props:{className:[r]},children:[{type:a,value:"\n      Удаляется директория хостинга "},{type:b,tag:d,props:{className:[e,f]},children:[{type:a,value:k}]},{type:a,value:h}]},{type:a,value:h},{type:b,tag:j,props:{},children:[{type:a,value:"\n      Создаётся симлинк "},{type:b,tag:d,props:{className:[e,f]},children:[{type:a,value:k}]},{type:a,value:" на "},{type:b,tag:d,props:{className:[e,f]},children:[{type:a,value:l}]},{type:a,value:"\n      любым доступным способом:\n      "},{type:b,tag:u,props:{name:"cases\u002Fshared-hosting\u002Flink"},children:[]},{type:a,value:"\n      "},{type:b,tag:g,props:{},children:[{type:a,value:"\n        "},{type:b,tag:n,props:{},children:[{type:a,value:T}]},{type:a,value:", что пути указаны абсолютно.\n      "}]},{type:a,value:h}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:g,props:{},children:[{type:a,value:"\n    В результате мы возвращаем удалённый "},{type:b,tag:d,props:{className:[e,f]},children:[{type:a,value:k}]},{type:a,value:", но это уже не директория,\n    а ссылка на "},{type:b,tag:d,props:{className:[e,f]},children:[{type:a,value:l}]},{type:a,value:h},{type:b,tag:o,props:{},children:[]},{type:a,value:"Поэтому настройки web-сервера остаются прежними,\n    а запросы приходят в "},{type:b,tag:d,props:{className:[e,f]},children:[{type:a,value:s}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:g,props:{},children:[{type:a,value:"\n    Это простой и надёжный вариант, но не все хостеры дают возможность создавать символические ссылки.\n  "}]},{type:a,value:i}]},{type:a,value:i},{type:b,tag:m,props:{heading:"Решение 4: Переименовать public","menu-heading":"Переименование",id:"solution-rename"},children:[{type:a,value:c},{type:b,tag:g,props:{},children:[{type:a,value:"\n    Переименовать "},{type:b,tag:d,props:{className:[e,f]},children:[{type:a,value:l}]},{type:a,value:" в "},{type:b,tag:d,props:{className:[e,f]},children:[{type:a,value:k}]},{type:a,value:h},{type:b,tag:o,props:{},children:[]},{type:a,value:"\n    Для этого переименовываем саму директорию и переопределяем путь в "},{type:b,tag:d,props:{className:[e]},children:[{type:a,value:"App\\Providers\\AppServiceProvider"}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:u,props:{name:"cases\u002Fshared-hosting\u002Fapp-service-provider"},children:[]},{type:a,value:c},{type:b,tag:g,props:{},children:[{type:a,value:h},{type:b,tag:n,props:{},children:[{type:a,value:T}]},{type:a,value:", что для локальной разработки директорию придётся переименовать всем кто работает с проектом.\n  "}]},{type:a,value:c},{type:b,tag:g,props:{},children:[{type:a,value:"\n    Если используется Laravel 8.x или более старая версия, то для работы "},{type:b,tag:d,props:{className:[e]},children:[{type:a,value:"php artisan serve"}]},{type:a,value:"\n    необходимо изменить путь в\n    "},{type:b,tag:q,props:{title:"server.php",link:"https:\u002F\u002Fgithub.com\u002Flaravel\u002Flaravel\u002Fblob\u002F8.x\u002Fserver.php"},children:[]},{type:a,value:".\n  "}]},{type:a,value:c},{type:b,tag:g,props:{},children:[{type:a,value:"\n    Если используется Mix, то потребуется использовать\n    "},{type:b,tag:q,props:{title:"mix.setPublicPath()",link:"https:\u002F\u002Flaravel-mix.com\u002Fdocs\u002F6.0\u002Ffaq"},children:[]},{type:a,value:h},{type:b,tag:o,props:{},children:[]},{type:a,value:"Если используется Vite, то необходимо изменить\n    "},{type:b,tag:q,props:{title:"build_path",link:"https:\u002F\u002Flaravel-vite.dev\u002Fconfiguration\u002Flaravel-package.html#build-path"},children:[]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:g,props:{},children:[{type:a,value:"\n    Также не забудь внести изменения в\n    "},{type:b,tag:q,props:{title:".gitignore",link:"https:\u002F\u002Fgithub.com\u002Flaravel\u002Flaravel\u002Fblob\u002F9.x\u002F.gitignore"},children:[]},{type:a,value:c}]},{type:a,value:i}]}]},excerpt:{type:y,children:[{type:b,tag:m,props:{heading:z,id:A},children:[{type:a,value:c},{type:b,tag:g,props:{},children:[{type:a,value:B},{type:b,tag:d,props:{className:[e,f]},children:[{type:a,value:k}]},{type:a,value:C}]},{type:a,value:c},{type:b,tag:g,props:{},children:[{type:a,value:D},{type:b,tag:E,props:{to:F},children:[{type:a,value:G}]},{type:a,value:H},{type:b,tag:d,props:{className:[e,f]},children:[{type:a,value:s}]},{type:a,value:I}]},{type:a,value:c},{type:b,tag:g,props:{},children:[{type:a,value:J},{type:b,tag:d,props:{className:[e,f]},children:[{type:a,value:K}]},{type:a,value:L},{type:b,tag:o,props:{},children:[]},{type:a,value:M},{type:b,tag:d,props:{className:[e,f]},children:[{type:a,value:N}]},{type:a,value:O}]},{type:a,value:c},{type:b,tag:g,props:{},children:[{type:a,value:h},{type:b,tag:n,props:{},children:[{type:a,value:P}]},{type:a,value:Q},{type:b,tag:d,props:{className:[e,f]},children:[{type:a,value:l}]},{type:a,value:R}]},{type:a,value:i}]}]},dir:"\u002Fcases",path:"\u002Fcases\u002Fshared-hosting",extension:".md",createdAt:"2022-08-15T13:41:49.968Z",updatedAt:"2023-03-30T12:25:52.236Z"},id:x}],fetch:{"CodeChips:0":{_error:{message:"request to http:\u002F\u002Flocalhost:3000\u002F_content\u002Fcode-chips\u002Fout\u002Fcases\u002Fshared-hosting\u002Fconfig.md failed, reason: connect ECONNREFUSED 127.0.0.1:3000",type:v,errno:p,code:p,statusCode:w}},"CodeChips:1":{_error:{message:"request to http:\u002F\u002Flocalhost:3000\u002F_content\u002Fcode-chips\u002Fout\u002Fcases\u002Fshared-hosting\u002Flink.md failed, reason: connect ECONNREFUSED 127.0.0.1:3000",type:v,errno:p,code:p,statusCode:w}},"CodeChips:2":{_error:{message:"request to http:\u002F\u002Flocalhost:3000\u002F_content\u002Fcode-chips\u002Fout\u002Fcases\u002Fshared-hosting\u002Fapp-service-provider.md failed, reason: connect ECONNREFUSED 127.0.0.1:3000",type:v,errno:p,code:p,statusCode:w}}},mutations:[]}}("text","element","\n  ","span","bit","path","p","\n    ","\n","li","public_html","public","case-context-section","b","br","ECONNREFUSED","external-link","mb-3","public\u002Findex.php",", ","code-chips","system",500,"shared-hosting","root","Проблема","problem","\n    Популярнейшая ошибка начинающих разработчиков\n    - размещение проекта на виртуальном хостинге и как следствие загрузка всего исходного кода в\n    общедоступный каталог "," или иной, как в случае с простыми CMS, например,\n    WordPress. С Laravel такой подход не работает и вместо сайта отображается, или каталог с файлами, или 403 Forbidden,\n    или сообщение о циклической переадресации, или не работают ссылки на стили, скрипты и обычные файлы.\n  ","\n    В попытках запустить проект, разработчик совершает\n    ","nuxt-link","\u002Fbad-practices\u002F#document-root","серьёзную ошибку","\n    и пытается перенаправить запросы в "," из корня проекта.\n  ","\n    Во-первых, это нарушение безопасности, файл ",".env"," доступен в web, \n    как и всё остальное (composer.json, любые приватные файлы на диске, например, дамп базы данных).\n    ","\n    Во-вторых, переадресация запросов через ",".htaccess","\n    это дополнительная нагрузка и увеличение TTFB.\n  ","Ни в коем случае не проксируй запросы через htaccess",", \n    только содержимое "," должно быть доступно в web.\n  ","list-inside","Обрати внимание")));