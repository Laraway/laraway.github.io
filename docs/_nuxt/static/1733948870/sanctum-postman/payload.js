__NUXT_JSONP__("/sanctum-postman", (function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D){return {data:[{page:{slug:l,description:"Передай заголовки Referer или Origin с доменом для SPA.",heading:"Postman и Sanctum",altHeadings:m,tags:"sanctum,api,manual",toc:[],body:{type:n,children:[{type:b,tag:h,props:{heading:o,id:p},children:[{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:q},{type:b,tag:r,props:{title:s,uri:t},children:[]},{type:a,value:u},{type:b,tag:d,props:{className:[e]},children:[{type:a,value:v}]},{type:a,value:w}]},{type:a,value:g}]},{type:a,value:g},{type:a,value:g},{type:b,tag:h,props:{heading:"Причина",id:"why"},children:[{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"\n    Для корректной работы \"SPA способа\" необходимы некоторые условия, а именно:\n  "}]},{type:a,value:c},{type:b,tag:"ul",props:{className:["list-disc","list-inside","mb-3"]},children:[{type:a,value:i},{type:b,tag:x,props:{},children:[{type:a,value:"\n      Заголовок "},{type:b,tag:d,props:{className:[e]},children:[{type:a,value:"Accept"}]},{type:a,value:" (см. "},{type:b,tag:"nuxt-link",props:{to:"\u002Fapi-headers\u002F"},children:[{type:a,value:"«Заголовки для API»"}]},{type:a,value:")\n    "}]},{type:a,value:i},{type:b,tag:x,props:{},children:[{type:a,value:"Заголовки "},{type:b,tag:d,props:{className:[e]},children:[{type:a,value:y}]},{type:a,value:z},{type:b,tag:d,props:{className:[e]},children:[{type:a,value:j}]}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"\n    С первым пунктом обычно проблем не возникает, а вот про Referer\u002FOrigin знают не все, хотя это есть в документации.\n    Дело в том, что механизм Sanctum подключается вариативно с помощью middleware\n    "},{type:b,tag:A,props:{title:"\\Laravel\\Sanctum\\Http\\Middleware\\EnsureFrontendRequestsAreStateful",link:"https:\u002F\u002Fgithub.com\u002Flaravel\u002Fsanctum\u002Fblob\u002F4.x\u002Fsrc\u002FHttp\u002FMiddleware\u002FEnsureFrontendRequestsAreStateful.php"},children:[]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"\n    И будут ли применены к запросу другие middleware зависит от метода "},{type:b,tag:d,props:{className:[e,"code"]},children:[{type:a,value:"fromFrontend"}]},{type:a,value:",\n    который получает домен из заголовков Referer или Origin \n    и ищет их среди разрешенных доменов в конфиге "},{type:b,tag:d,props:{className:[e]},children:[{type:a,value:"sanctum.stateful"}]},{type:a,value:"\n    или "},{type:b,tag:d,props:{className:[e]},children:[{type:a,value:k}]},{type:a,value:" в env.\n  "}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"\n    Таким образом, если нет заголовков или домен не соответствует разрешенным, то middleware не подключается, а значит\n    не стартует сессия и не работает аутентификация.\n  "}]},{type:a,value:g}]},{type:a,value:g},{type:b,tag:h,props:{heading:"Решение",id:"solution"},children:[{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"\n    Необходимо отправлять в Postman заголовок "},{type:b,tag:d,props:{className:[e]},children:[{type:a,value:y}]},{type:a,value:z},{type:b,tag:d,props:{className:[e]},children:[{type:a,value:j}]},{type:a,value:"\n    с разрешенным доменом (на котором находится SPA), указанным в "},{type:b,tag:d,props:{className:[e]},children:[{type:a,value:k}]},{type:a,value:B}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"\n    Например, "},{type:b,tag:d,props:{className:[e]},children:[{type:a,value:"Origin: https:\u002F\u002Fexample.com"}]},{type:a,value:c}]},{type:a,value:g}]},{type:a,value:g},{type:b,tag:h,props:{heading:"Настройка Postman",id:"config"},children:[{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"\n    Выполнять запросы вручную каждый раз утомительно, \n    необходим предварительный запрос на "},{type:b,tag:d,props:{className:[e]},children:[{type:a,value:"\u002Fsanctum\u002Fcsrf-cookie"}]},{type:a,value:" и передавать куки в следующем запросе.\n  "}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"\n    Вместо этого можно \"автоматизировать\" запросы в Postman.\n    Для этого необходимо добавить скрипт на вкладке Pre-request Script.\n  "}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:i},{type:b,tag:C,props:{},children:[{type:a,value:D}]},{type:a,value:", что используется переменная окружения "},{type:b,tag:d,props:{className:[e]},children:[{type:a,value:"API_URL"}]},{type:a,value:", её необходимо \n    "},{type:b,tag:A,props:{title:"создать в Postman",link:"https:\u002F\u002Flearning.postman.com\u002Fdocs\u002Fsending-requests\u002Fvariables\u002Fenvironment-variables\u002F"},children:[]},{type:a,value:", \n    либо заменить на свой URL прямо в скрипте.\n  "}]},{type:a,value:c},{type:b,tag:"code-chips",props:{name:"cases\u002Fsanctum-postman\u002Fpre-script"},children:[]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:"\n    Не забудь передать заголовки "},{type:b,tag:d,props:{className:[e]},children:[{type:a,value:"Accept: application\u002Fjson"}]},{type:a,value:" и "},{type:b,tag:d,props:{className:[e]},children:[{type:a,value:j}]},{type:a,value:" с\n    адресом, где находится frontend приложение. Так же убедись, что домен добавлен в "},{type:b,tag:d,props:{className:[e]},children:[{type:a,value:k}]},{type:a,value:B}]},{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:i},{type:b,tag:C,props:{},children:[{type:a,value:D}]},{type:a,value:", что SPA и API приложения могут находиться на разных поддоменах, \n    поэтому в "},{type:b,tag:d,props:{className:[e]},children:[{type:a,value:j}]},{type:a,value:" необходимо указывать именно адрес SPA, а не API.\n  "}]},{type:a,value:g}]}]},excerpt:{type:n,children:[{type:b,tag:h,props:{heading:o,id:p},children:[{type:a,value:c},{type:b,tag:f,props:{},children:[{type:a,value:q},{type:b,tag:r,props:{title:s,uri:t},children:[]},{type:a,value:u},{type:b,tag:d,props:{className:[e]},children:[{type:a,value:v}]},{type:a,value:w}]},{type:a,value:g}]}]},dir:"\u002Fcases",path:"\u002Fcases\u002Fsanctum-postman",extension:".md",createdAt:"2024-12-11T10:52:12.055Z",updatedAt:"2024-12-11T13:47:59.702Z"},id:l}],fetch:{"CodeChips:0":{code:"\u003Cpre class=\"torchlight\" style=\"background-color: #011627; --theme-selection-background: #4373c2;\" data-torchlight-processed=\"3449c9e5e332f1dbb81505cd739fbf3f\"\u003E\u003Ccode data-lang=\"js\"\u003E\u003C!-- Syntax highlighted by torchlight.dev --\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color:#4b6479; text-align: right; -webkit-user-select: none; user-select: none;\" class=\"line-number\"\u003E 1\u003C\u002Fspan\u003E\u003Cspan style=\"color: #C792EA;\"\u003Eif\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D6DEEB;\"\u003E (\u003C\u002Fspan\u003E\u003Cspan style=\"color: #7FDBCA;\"\u003Epm\u003C\u002Fspan\u003E\u003Cspan style=\"color: #C792EA;\"\u003E.\u003C\u002Fspan\u003E\u003Cspan style=\"color: #FAF39F;\"\u003Erequest\u003C\u002Fspan\u003E\u003Cspan style=\"color: #C792EA;\"\u003E.\u003C\u002Fspan\u003E\u003Cspan style=\"color: #BAEBE2;\"\u003Emethod\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D6DEEB;\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: #C792EA;\"\u003E!==\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D6DEEB;\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: #D9F5DD;\"\u003E&#39;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #ECC48D;\"\u003EGET\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D9F5DD;\"\u003E&#39;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D6DEEB;\"\u003E) {\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color:#4b6479; text-align: right; -webkit-user-select: none; user-select: none;\" class=\"line-number\"\u003E 2\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D6DEEB;\"\u003E    \u003C\u002Fspan\u003E\u003Cspan style=\"color: #C792EA;\"\u003Eif\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D6DEEB;\"\u003E (\u003C\u002Fspan\u003E\u003Cspan style=\"color: #7FDBCA;\"\u003Epm\u003C\u002Fspan\u003E\u003Cspan style=\"color: #C792EA;\"\u003E.\u003C\u002Fspan\u003E\u003Cspan style=\"color: #FAF39F;\"\u003Eenvironment\u003C\u002Fspan\u003E\u003Cspan style=\"color: #C792EA;\"\u003E.\u003C\u002Fspan\u003E\u003Cspan style=\"color: #82AAFF;\"\u003Eget\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D6DEEB;\"\u003E(\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D9F5DD;\"\u003E&#39;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #ECC48D;\"\u003EXSRF-TOKEN\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D9F5DD;\"\u003E&#39;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D6DEEB;\"\u003E)) {\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color:#4b6479; text-align: right; -webkit-user-select: none; user-select: none;\" class=\"line-number\"\u003E 3\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D6DEEB;\"\u003E        \u003C\u002Fspan\u003E\u003Cspan style=\"color: #7FDBCA;\"\u003Epm\u003C\u002Fspan\u003E\u003Cspan style=\"color: #C792EA;\"\u003E.\u003C\u002Fspan\u003E\u003Cspan style=\"color: #FAF39F;\"\u003Erequest\u003C\u002Fspan\u003E\u003Cspan style=\"color: #C792EA;\"\u003E.\u003C\u002Fspan\u003E\u003Cspan style=\"color: #FAF39F;\"\u003Eheaders\u003C\u002Fspan\u003E\u003Cspan style=\"color: #C792EA;\"\u003E.\u003C\u002Fspan\u003E\u003Cspan style=\"color: #82AAFF;\"\u003Eupsert\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D6DEEB;\"\u003E({\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color:#4b6479; text-align: right; -webkit-user-select: none; user-select: none;\" class=\"line-number\"\u003E 4\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D6DEEB;\"\u003E            key: \u003C\u002Fspan\u003E\u003Cspan style=\"color: #D9F5DD;\"\u003E&#39;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #ECC48D;\"\u003Ex-xsrf-token\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D9F5DD;\"\u003E&#39;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D6DEEB;\"\u003E,\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color:#4b6479; text-align: right; -webkit-user-select: none; user-select: none;\" class=\"line-number\"\u003E 5\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D6DEEB;\"\u003E            value: \u003C\u002Fspan\u003E\u003Cspan style=\"color: #7FDBCA;\"\u003Epm\u003C\u002Fspan\u003E\u003Cspan style=\"color: #C792EA;\"\u003E.\u003C\u002Fspan\u003E\u003Cspan style=\"color: #FAF39F;\"\u003Eenvironment\u003C\u002Fspan\u003E\u003Cspan style=\"color: #C792EA;\"\u003E.\u003C\u002Fspan\u003E\u003Cspan style=\"color: #82AAFF;\"\u003Eget\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D6DEEB;\"\u003E(\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D9F5DD;\"\u003E&#39;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #ECC48D;\"\u003EXSRF-TOKEN\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D9F5DD;\"\u003E&#39;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D6DEEB;\"\u003E),\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color:#4b6479; text-align: right; -webkit-user-select: none; user-select: none;\" class=\"line-number\"\u003E 6\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D6DEEB;\"\u003E        })\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color:#4b6479; text-align: right; -webkit-user-select: none; user-select: none;\" class=\"line-number\"\u003E 7\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D6DEEB;\"\u003E    } \u003C\u002Fspan\u003E\u003Cspan style=\"color: #C792EA;\"\u003Eelse\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D6DEEB;\"\u003E { \u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color:#4b6479; text-align: right; -webkit-user-select: none; user-select: none;\" class=\"line-number\"\u003E 8\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D6DEEB;\"\u003E        \u003C\u002Fspan\u003E\u003Cspan style=\"color: #7FDBCA;\"\u003Epm\u003C\u002Fspan\u003E\u003Cspan style=\"color: #C792EA;\"\u003E.\u003C\u002Fspan\u003E\u003Cspan style=\"color: #82AAFF;\"\u003EsendRequest\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D6DEEB;\"\u003E(\u003C\u002Fspan\u003E\u003Cspan style=\"color: #7FDBCA;\"\u003Epm\u003C\u002Fspan\u003E\u003Cspan style=\"color: #C792EA;\"\u003E.\u003C\u002Fspan\u003E\u003Cspan style=\"color: #FAF39F;\"\u003Eenvironment\u003C\u002Fspan\u003E\u003Cspan style=\"color: #C792EA;\"\u003E.\u003C\u002Fspan\u003E\u003Cspan style=\"color: #82AAFF;\"\u003Eget\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D6DEEB;\"\u003E(\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D9F5DD;\"\u003E&#39;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #ECC48D;\"\u003Eurl\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D9F5DD;\"\u003E&#39;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D6DEEB;\"\u003E) \u003C\u002Fspan\u003E\u003Cspan style=\"color: #C792EA;\"\u003E+\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D6DEEB;\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: #D9F5DD;\"\u003E&#39;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #ECC48D;\"\u003E\u002Fsanctum\u002Fcsrf-cookie\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D9F5DD;\"\u003E&#39;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D6DEEB;\"\u003E, \u003C\u002Fspan\u003E\u003Cspan style=\"color: #C792EA;\"\u003Efunction\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D9F5DD;\"\u003E(\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D7DBE0;\"\u003Eerror\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D6DEEB;\"\u003E, \u003C\u002Fspan\u003E\u003Cspan style=\"color: #D7DBE0;\"\u003Eresponse\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D9F5DD;\"\u003E)\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D6DEEB;\"\u003E {\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color:#4b6479; text-align: right; -webkit-user-select: none; user-select: none;\" class=\"line-number\"\u003E 9\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D6DEEB;\"\u003E            \u003C\u002Fspan\u003E\u003Cspan style=\"color: #7FDBCA;\"\u003Epm\u003C\u002Fspan\u003E\u003Cspan style=\"color: #C792EA;\"\u003E.\u003C\u002Fspan\u003E\u003Cspan style=\"color: #82AAFF;\"\u003Eexpect\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D6DEEB;\"\u003E(\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D7DBE0;\"\u003Eerror\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D6DEEB;\"\u003E)\u003C\u002Fspan\u003E\u003Cspan style=\"color: #C792EA;\"\u003E.\u003C\u002Fspan\u003E\u003Cspan style=\"color: #FAF39F;\"\u003Eto\u003C\u002Fspan\u003E\u003Cspan style=\"color: #C792EA;\"\u003E.\u003C\u002Fspan\u003E\u003Cspan style=\"color: #82AAFF;\"\u003Eequal\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D6DEEB;\"\u003E(\u003C\u002Fspan\u003E\u003Cspan style=\"color: #FF5874;\"\u003Enull\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D6DEEB;\"\u003E)\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color:#4b6479; text-align: right; -webkit-user-select: none; user-select: none;\" class=\"line-number\"\u003E10\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D6DEEB;\"\u003E            \u003C\u002Fspan\u003E\u003Cspan style=\"color: #7FDBCA;\"\u003Epm\u003C\u002Fspan\u003E\u003Cspan style=\"color: #C792EA;\"\u003E.\u003C\u002Fspan\u003E\u003Cspan style=\"color: #82AAFF;\"\u003Eexpect\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D6DEEB;\"\u003E(\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D7DBE0;\"\u003Eresponse\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D6DEEB;\"\u003E)\u003C\u002Fspan\u003E\u003Cspan style=\"color: #C792EA;\"\u003E.\u003C\u002Fspan\u003E\u003Cspan style=\"color: #FAF39F;\"\u003Eto\u003C\u002Fspan\u003E\u003Cspan style=\"color: #C792EA;\"\u003E.\u003C\u002Fspan\u003E\u003Cspan style=\"color: #FAF39F;\"\u003Ehave\u003C\u002Fspan\u003E\u003Cspan style=\"color: #C792EA;\"\u003E.\u003C\u002Fspan\u003E\u003Cspan style=\"color: #82AAFF;\"\u003Eproperty\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D6DEEB;\"\u003E(\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D9F5DD;\"\u003E&#39;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #ECC48D;\"\u003Ecode\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D9F5DD;\"\u003E&#39;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #5F7E97;\"\u003E,\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D6DEEB;\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: #F78C6C;\"\u003E204\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D6DEEB;\"\u003E)\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color:#4b6479; text-align: right; -webkit-user-select: none; user-select: none;\" class=\"line-number\"\u003E11\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D6DEEB;\"\u003E            \u003C\u002Fspan\u003E\u003Cspan style=\"color: #7FDBCA;\"\u003Epm\u003C\u002Fspan\u003E\u003Cspan style=\"color: #C792EA;\"\u003E.\u003C\u002Fspan\u003E\u003Cspan style=\"color: #82AAFF;\"\u003Eexpect\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D6DEEB;\"\u003E(\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D7DBE0;\"\u003Eresponse\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D6DEEB;\"\u003E)\u003C\u002Fspan\u003E\u003Cspan style=\"color: #C792EA;\"\u003E.\u003C\u002Fspan\u003E\u003Cspan style=\"color: #FAF39F;\"\u003Eto\u003C\u002Fspan\u003E\u003Cspan style=\"color: #C792EA;\"\u003E.\u003C\u002Fspan\u003E\u003Cspan style=\"color: #FAF39F;\"\u003Ehave\u003C\u002Fspan\u003E\u003Cspan style=\"color: #C792EA;\"\u003E.\u003C\u002Fspan\u003E\u003Cspan style=\"color: #82AAFF;\"\u003Eproperty\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D6DEEB;\"\u003E(\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D9F5DD;\"\u003E&#39;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #ECC48D;\"\u003Estatus\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D9F5DD;\"\u003E&#39;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #5F7E97;\"\u003E,\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D6DEEB;\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: #D9F5DD;\"\u003E&#39;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #ECC48D;\"\u003ENo Content\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D9F5DD;\"\u003E&#39;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D6DEEB;\"\u003E)\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color:#4b6479; text-align: right; -webkit-user-select: none; user-select: none;\" class=\"line-number\"\u003E12\u003C\u002Fspan\u003E&nbsp;\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color:#4b6479; text-align: right; -webkit-user-select: none; user-select: none;\" class=\"line-number\"\u003E13\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D6DEEB;\"\u003E            \u003C\u002Fspan\u003E\u003Cspan style=\"color: #C792EA;\"\u003Elet\u003C\u002Fspan\u003E\u003Cspan style=\"color: #C792EA;\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: #D7DBE0;\"\u003ExsrfCookie\u003C\u002Fspan\u003E\u003Cspan style=\"color: #C792EA;\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: #C792EA;\"\u003E=\u003C\u002Fspan\u003E\u003Cspan style=\"color: #C792EA;\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: #7FDBCA;\"\u003Eresponse\u003C\u002Fspan\u003E\u003Cspan style=\"color: #C792EA;\"\u003E.\u003C\u002Fspan\u003E\u003Cspan style=\"color: #FAF39F;\"\u003Eheaders\u003C\u002Fspan\u003E\u003Cspan style=\"color: #C792EA;\"\u003E.\u003C\u002Fspan\u003E\u003Cspan style=\"color: #82AAFF;\"\u003Efind\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D6DEEB;\"\u003E(\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D7DBE0;\"\u003Eheader\u003C\u002Fspan\u003E\u003Cspan style=\"color: #C792EA;\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: #C792EA;\"\u003E=&gt;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #C792EA;\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: #7FDBCA;\"\u003Eheader\u003C\u002Fspan\u003E\u003Cspan style=\"color: #C792EA;\"\u003E.\u003C\u002Fspan\u003E\u003Cspan style=\"color: #FAF39F;\"\u003Ekey\u003C\u002Fspan\u003E\u003Cspan style=\"color: #C792EA;\"\u003E.\u003C\u002Fspan\u003E\u003Cspan style=\"color: #82AAFF;\"\u003EtoLowerCase\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D6DEEB;\"\u003E()\u003C\u002Fspan\u003E\u003Cspan style=\"color: #C792EA;\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: #C792EA;\"\u003E===\u003C\u002Fspan\u003E\u003Cspan style=\"color: #C792EA;\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: #D9F5DD;\"\u003E&#39;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #ECC48D;\"\u003Eset-cookie\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D9F5DD;\"\u003E&#39;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #C792EA;\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: #C792EA;\"\u003E&amp;&amp;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #C792EA;\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: #7FDBCA;\"\u003Eheader\u003C\u002Fspan\u003E\u003Cspan style=\"color: #C792EA;\"\u003E.\u003C\u002Fspan\u003E\u003Cspan style=\"color: #FAF39F;\"\u003Evalue\u003C\u002Fspan\u003E\u003Cspan style=\"color: #C792EA;\"\u003E.\u003C\u002Fspan\u003E\u003Cspan style=\"color: #82AAFF;\"\u003Eincludes\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D6DEEB;\"\u003E(\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D9F5DD;\"\u003E&#39;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #ECC48D;\"\u003EXSRF-TOKEN\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D9F5DD;\"\u003E&#39;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D6DEEB;\"\u003E))\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color:#4b6479; text-align: right; -webkit-user-select: none; user-select: none;\" class=\"line-number\"\u003E14\u003C\u002Fspan\u003E&nbsp;\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color:#4b6479; text-align: right; -webkit-user-select: none; user-select: none;\" class=\"line-number\"\u003E15\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D6DEEB;\"\u003E            \u003C\u002Fspan\u003E\u003Cspan style=\"color: #C792EA;\"\u003Eif\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D6DEEB;\"\u003E (\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D7DBE0;\"\u003ExsrfCookie\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D6DEEB;\"\u003E) {\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color:#4b6479; text-align: right; -webkit-user-select: none; user-select: none;\" class=\"line-number\"\u003E16\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D6DEEB;\"\u003E                \u003C\u002Fspan\u003E\u003Cspan style=\"color: #C792EA;\"\u003Elet\u003C\u002Fspan\u003E\u003Cspan style=\"color: #C792EA;\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: #D7DBE0;\"\u003ExsrfToken\u003C\u002Fspan\u003E\u003Cspan style=\"color: #C792EA;\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: #C792EA;\"\u003E=\u003C\u002Fspan\u003E\u003Cspan style=\"color: #C792EA;\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: #C5E478;\"\u003EdecodeURIComponent\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D6DEEB;\"\u003E(\u003C\u002Fspan\u003E\u003Cspan style=\"color: #7FDBCA;\"\u003ExsrfCookie\u003C\u002Fspan\u003E\u003Cspan style=\"color: #C792EA;\"\u003E.\u003C\u002Fspan\u003E\u003Cspan style=\"color: #FAF39F;\"\u003Evalue\u003C\u002Fspan\u003E\u003Cspan style=\"color: #C792EA;\"\u003E.\u003C\u002Fspan\u003E\u003Cspan style=\"color: #82AAFF;\"\u003Esplit\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D6DEEB;\"\u003E(\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D9F5DD;\"\u003E&#39;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #ECC48D;\"\u003E;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D9F5DD;\"\u003E&#39;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D6DEEB;\"\u003E)[\u003C\u002Fspan\u003E\u003Cspan style=\"color: #F78C6C;\"\u003E0\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D6DEEB;\"\u003E]\u003C\u002Fspan\u003E\u003Cspan style=\"color: #C792EA;\"\u003E.\u003C\u002Fspan\u003E\u003Cspan style=\"color: #82AAFF;\"\u003Esplit\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D6DEEB;\"\u003E(\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D9F5DD;\"\u003E&#39;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #ECC48D;\"\u003E=\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D9F5DD;\"\u003E&#39;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D6DEEB;\"\u003E)[\u003C\u002Fspan\u003E\u003Cspan style=\"color: #F78C6C;\"\u003E1\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D6DEEB;\"\u003E])\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color:#4b6479; text-align: right; -webkit-user-select: none; user-select: none;\" class=\"line-number\"\u003E17\u003C\u002Fspan\u003E&nbsp;\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color:#4b6479; text-align: right; -webkit-user-select: none; user-select: none;\" class=\"line-number\"\u003E18\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D6DEEB;\"\u003E                \u003C\u002Fspan\u003E\u003Cspan style=\"color: #7FDBCA;\"\u003Epm\u003C\u002Fspan\u003E\u003Cspan style=\"color: #C792EA;\"\u003E.\u003C\u002Fspan\u003E\u003Cspan style=\"color: #FAF39F;\"\u003Erequest\u003C\u002Fspan\u003E\u003Cspan style=\"color: #C792EA;\"\u003E.\u003C\u002Fspan\u003E\u003Cspan style=\"color: #FAF39F;\"\u003Eheaders\u003C\u002Fspan\u003E\u003Cspan style=\"color: #C792EA;\"\u003E.\u003C\u002Fspan\u003E\u003Cspan style=\"color: #82AAFF;\"\u003Eupsert\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D6DEEB;\"\u003E({\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color:#4b6479; text-align: right; -webkit-user-select: none; user-select: none;\" class=\"line-number\"\u003E19\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D6DEEB;\"\u003E                    key: \u003C\u002Fspan\u003E\u003Cspan style=\"color: #D9F5DD;\"\u003E&#39;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #ECC48D;\"\u003Ex-xsrf-token\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D9F5DD;\"\u003E&#39;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #5F7E97;\"\u003E,\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color:#4b6479; text-align: right; -webkit-user-select: none; user-select: none;\" class=\"line-number\"\u003E20\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D6DEEB;\"\u003E                    value: \u003C\u002Fspan\u003E\u003Cspan style=\"color: #D7DBE0;\"\u003ExsrfToken\u003C\u002Fspan\u003E\u003Cspan style=\"color: #5F7E97;\"\u003E,\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color:#4b6479; text-align: right; -webkit-user-select: none; user-select: none;\" class=\"line-number\"\u003E21\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D6DEEB;\"\u003E                })\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color:#4b6479; text-align: right; -webkit-user-select: none; user-select: none;\" class=\"line-number\"\u003E22\u003C\u002Fspan\u003E&nbsp;\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color:#4b6479; text-align: right; -webkit-user-select: none; user-select: none;\" class=\"line-number\"\u003E23\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D6DEEB;\"\u003E                \u003C\u002Fspan\u003E\u003Cspan style=\"color: #7FDBCA;\"\u003Epm\u003C\u002Fspan\u003E\u003Cspan style=\"color: #C792EA;\"\u003E.\u003C\u002Fspan\u003E\u003Cspan style=\"color: #FAF39F;\"\u003Eenvironment\u003C\u002Fspan\u003E\u003Cspan style=\"color: #C792EA;\"\u003E.\u003C\u002Fspan\u003E\u003Cspan style=\"color: #82AAFF;\"\u003Eset\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D6DEEB;\"\u003E(\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D9F5DD;\"\u003E&#39;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #ECC48D;\"\u003EXSRF-TOKEN\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D9F5DD;\"\u003E&#39;\u003C\u002Fspan\u003E\u003Cspan style=\"color: #5F7E97;\"\u003E,\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D6DEEB;\"\u003E \u003C\u002Fspan\u003E\u003Cspan style=\"color: #D7DBE0;\"\u003ExsrfToken\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D6DEEB;\"\u003E)\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color:#4b6479; text-align: right; -webkit-user-select: none; user-select: none;\" class=\"line-number\"\u003E24\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D6DEEB;\"\u003E            }\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color:#4b6479; text-align: right; -webkit-user-select: none; user-select: none;\" class=\"line-number\"\u003E25\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D6DEEB;\"\u003E        })\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color:#4b6479; text-align: right; -webkit-user-select: none; user-select: none;\" class=\"line-number\"\u003E26\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D6DEEB;\"\u003E    }\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Cdiv class='line'\u003E\u003Cspan style=\"color:#4b6479; text-align: right; -webkit-user-select: none; user-select: none;\" class=\"line-number\"\u003E27\u003C\u002Fspan\u003E\u003Cspan style=\"color: #D6DEEB;\"\u003E}\u003C\u002Fspan\u003E\u003C\u002Fdiv\u003E\u003Ctextarea data-torchlight-original=\"true\" style=\"display: none !important;\"\u003Eif (pm.request.method !== 'GET') {\n    if (pm.environment.get('XSRF-TOKEN')) {\n        pm.request.headers.upsert({\n            key: 'x-xsrf-token',\n            value: pm.environment.get('XSRF-TOKEN'),\n        })\n    } else { \n        pm.sendRequest(pm.environment.get('url') + '\u002Fsanctum\u002Fcsrf-cookie', function(error, response) {\n            pm.expect(error).to.equal(null)\n            pm.expect(response).to.have.property('code', 204)\n            pm.expect(response).to.have.property('status', 'No Content')\n\n            let xsrfCookie = response.headers.find(header =&gt; header.key.toLowerCase() === 'set-cookie' &amp;&amp; header.value.includes('XSRF-TOKEN'))\n\n            if (xsrfCookie) {\n                let xsrfToken = decodeURIComponent(xsrfCookie.value.split(';')[0].split('=')[1])\n\n                pm.request.headers.upsert({\n                    key: 'x-xsrf-token',\n                    value: xsrfToken,\n                })\n\n                pm.environment.set('XSRF-TOKEN', xsrfToken)\n            }\n        })\n    }\n}\n\u003C\u002Ftextarea\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n",copied:false,copiedTimeout:m}},mutations:[]}}("text","element","\n  ","span","bit","p","\n","case-context-section","\n    ","Origin","SANCTUM_STATEFUL_DOMAINS","sanctum-postman",null,"root","Проблема","problem","\n    В Postman не работает \n    ","laravel-link","SPA аутентификация","sanctum#spa-authentication"," \n    на Sanctum. Маршруты с ","auth:sanctum"," возвращают 401 статус, даже после успешного логина.\n    В браузере аутентификация работает.\n  ","li","Referer"," или ","external-link",".\n  ","b","Обрати внимание")));